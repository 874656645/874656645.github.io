[{"content":"ä¸‰å±‚æ¶æ„ï¼šä¸šåŠ¡é€»è¾‘å±‚ã€æŠ½è±¡å±‚ã€å®ç°å±‚\nåŸåˆ™ï¼šä¾èµ–å€’è½¬\n","permalink":"https://874656645.github.io/rick/posts/67-%E9%9D%A2%E5%90%91%E6%8A%BD%E8%B1%A1%E7%B1%BB%E7%BC%96%E7%A8%8B/","summary":"ä¸‰å±‚æ¶æ„ï¼šä¸šåŠ¡é€»è¾‘å±‚ã€æŠ½è±¡å±‚ã€å®ç°å±‚\nåŸåˆ™ï¼šä¾èµ–å€’è½¬","title":"é¢å‘æŠ½è±¡ç±»ç¼–ç¨‹"},{"content":"MyString.h\n#ifndef __MYSTRING_H_ #define __MYSTRING_H_  #include \u0026lt;stdlib.h\u0026gt;#include \u0026lt;iostream\u0026gt;#include \u0026lt;cstring\u0026gt; using namespace std; class MyString { // é‡è½½ \u0026lt;\u0026lt;  // æœ€å¥½æ˜¯ const çš„ï¼Œå¯ä»¥è¾“å‡ºåŒ¿åå˜é‡ï¼ˆåŒ¿åå˜é‡ä¸èƒ½è¢«é const çš„å·¦å€¼å¼•ç”¨æ¥æ”¶ï¼‰  friend ostream\u0026amp; operator\u0026lt;\u0026lt;(ostream \u0026amp;os, const MyString \u0026amp;s); // é‡è½½ \u0026gt;\u0026gt;  friend istream\u0026amp; operator\u0026gt;\u0026gt;(istream \u0026amp;is, MyString \u0026amp;s); private: // å­—ç¬¦ä¸²çš„æœ‰æ•ˆé•¿åº¦  int m_len; // å­—ç¬¦ä¸²æŒ‡é’ˆ  char* m_pStr; public: MyString(); MyString(const char *); MyString(const MyString \u0026amp;); ~MyString(); // é‡è½½ =  MyString\u0026amp; operator=(const MyString \u0026amp;); // é‡è½½ []  char\u0026amp; operator[](int index); // é‡è½½ +  MyString operator+(const MyString \u0026amp;); // é‡è½½ +=  MyString\u0026amp; operator+=(const MyString \u0026amp;); // é‡è½½ ==  bool operator==(const MyString \u0026amp;); // é‡è½½ !=  bool operator!=(const MyString \u0026amp;); }; #endif MyString.cpp\n#include \u0026#34;MyString.h\u0026#34; ostream\u0026amp; operator\u0026lt;\u0026lt;(ostream \u0026amp;os, const MyString \u0026amp;s){ os \u0026lt;\u0026lt; s.m_pStr; return os; } istream\u0026amp; operator\u0026gt;\u0026gt;(istream \u0026amp;is, MyString \u0026amp;s){ char temp[4096] = {0}; is \u0026gt;\u0026gt; temp; if (s.m_pStr != NULL) { s.m_len = 0; free(s.m_pStr); s.m_pStr = NULL; } s.m_len = strlen(temp); s.m_pStr = (char*)malloc(s.m_len); strcpy(s.m_pStr, temp); return is; } MyString::MyString() { m_len = 0; m_pStr = NULL; // æ³¨æ„ \u0026#39;\\0\u0026#39; NULL \u0026#34;\u0026#34;çš„åŒºåˆ« } MyString::MyString(const char *c) { if (c != NULL) { m_len = strlen(c); m_pStr = (char*)malloc(m_len + 1); strcpy(m_pStr, c); } cout \u0026lt;\u0026lt; \u0026#34;MyString(const char *c)...\u0026#34; \u0026lt;\u0026lt; endl; } MyString::MyString(const MyString \u0026amp;s) { if (s.m_pStr != NULL) { m_len = s.m_len; m_pStr = (char*)malloc(m_len + 1); strcpy(m_pStr, s.m_pStr); } cout \u0026lt;\u0026lt; \u0026#34;MyString(const MyString \u0026amp;s)...\u0026#34; \u0026lt;\u0026lt; endl; } MyString::~MyString() { m_len = 0; if (m_pStr != NULL) { free(m_pStr); m_pStr = NULL; } cout \u0026lt;\u0026lt; \u0026#34;~MyString()...\u0026#34; \u0026lt;\u0026lt; endl; } MyString\u0026amp; MyString::operator=(const MyString \u0026amp;s) { cout \u0026lt;\u0026lt; \u0026#34;operator=(const MyString \u0026amp;s)...\u0026#34; \u0026lt;\u0026lt; endl; // 1. æ˜¯å¦æ˜¯ç»™è‡ªèº«èµ‹å€¼  if (this == \u0026amp;s) { return *this; } // 2. å¤„ç†è‡ªèº«åƒåœ¾  if (m_pStr != NULL) { free(m_pStr); m_pStr = NULL; } // 3. æ·±æ‹·è´  if (s.m_pStr != NULL) { m_len = s.m_len; m_pStr = (char*)malloc(m_len + 1); strcpy(m_pStr, s.m_pStr); } // 4. è¿”å›è‡ªèº«  return *this; } char\u0026amp; MyString::operator[](int index) { if (m_len == 0) { throw \u0026#34;bad memory\u0026#34;; } if (index \u0026lt; 0 || index \u0026gt;= m_len) { throw \u0026#34;out of range\u0026#34;; } return m_pStr[index]; } MyString MyString::operator+(const MyString \u0026amp;s) { // æ–¹å¼ä¸€ï¼š  /* MyString temp; temp.m_len = m_len + s.m_len; temp.m_pStr = (char*)malloc(temp.m_len + 1); // memset(temp.m_pStr, 0, temp.m_len + 1); strcpy(temp.m_pStr, m_pStr); // æ³¨æ„ strcpy å’Œ strcat çš„ä½¿ç”¨ strcat(temp.m_pStr, s.m_pStr); // æ³¨æ„ strcat çš„ä½¿ç”¨ return temp; */ // æ–¹å¼äºŒï¼š  MyString temp = *this; return temp += s; } MyString\u0026amp; MyString::operator+=(const MyString \u0026amp;s) { if (s.m_len \u0026gt; 0) { // å¤„ç†è‡ªèº«åƒåœ¾  if (m_pStr != NULL) { char* pTemp = m_pStr; m_len += s.m_len; m_pStr = (char*)malloc(m_len + 1); strcpy(m_pStr, pTemp); strcat(m_pStr, s.m_pStr); free(pTemp); pTemp = NULL; } } return *this; } bool MyString::operator==(const MyString \u0026amp;s) { if (m_len == 0 || s.m_len == 0) { return false; } if(m_len != s.m_len) { return false; } for (int i = 0; i \u0026lt; m_len; i++) { if (m_pStr[i] != s.m_pStr[i]) { return false; } } return true; } bool MyString::operator!=(const MyString \u0026amp;s) { return !(*this == s); } test.cpp\n#include \u0026lt;iostream\u0026gt;#include \u0026#34;MyString.h\u0026#34; using namespace std; int main(){ // éšå¼è½¬æ¢  MyString s0 = \u0026#34;123\u0026#34;; cout \u0026lt;\u0026lt; s0 \u0026lt;\u0026lt; endl; // æ„é€ å‡½æ•°  MyString s1(\u0026#34;abc\u0026#34;); cout \u0026lt;\u0026lt; s1 \u0026lt;\u0026lt; endl; // æ‹·è´æ„é€   MyString s2 = s1; cout \u0026lt;\u0026lt; s2 \u0026lt;\u0026lt; endl; // æ‹·è´æ„é€   MyString s3(s2); cout \u0026lt;\u0026lt; s3 \u0026lt;\u0026lt; endl; // = æ“ä½œç¬¦  s3 = s1; cout \u0026lt;\u0026lt; s3 \u0026lt;\u0026lt; endl; // [] æ“ä½œç¬¦  cout \u0026lt;\u0026lt; s3[1] \u0026lt;\u0026lt; endl; s3[1] = \u0026#39;1\u0026#39;; cout \u0026lt;\u0026lt; s3 \u0026lt;\u0026lt; endl; // + æ“ä½œç¬¦  cout \u0026lt;\u0026lt; s1 + s2 +s3 \u0026lt;\u0026lt; endl; // += æ“ä½œç¬¦  s3 += s1; cout \u0026lt;\u0026lt; s3 \u0026lt;\u0026lt; endl; // == æ“ä½œç¬¦  cout \u0026lt;\u0026lt; (s3 == s1) \u0026lt;\u0026lt; endl; // != æ“ä½œç¬¦  cout \u0026lt;\u0026lt; (s3 != s1) \u0026lt;\u0026lt; endl; return 0; } è¾“å‡ºï¼š\nMyString(const char *c)... abc MyString(const MyString \u0026amp;s)... abc MyString(const MyString \u0026amp;s)... abc operator=(const MyString \u0026amp;s)... abc b a1c abcabca1c ~MyString()... ~MyString()... a1cabc 0 1 ~MyString()... ~MyString()... ~MyString()... ","permalink":"https://874656645.github.io/rick/posts/66-%E5%AE%9E%E7%8E%B0%E4%B8%80%E4%B8%AA%E7%AE%80%E5%8D%95%E7%9A%84%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%B1%BB/","summary":"MyString.h\n#ifndef __MYSTRING_H_ #define __MYSTRING_H_  #include \u0026lt;stdlib.h\u0026gt;#include \u0026lt;iostream\u0026gt;#include \u0026lt;cstring\u0026gt; using namespace std; class MyString { // é‡è½½ \u0026lt;\u0026lt;  // æœ€å¥½æ˜¯ const çš„ï¼Œå¯ä»¥è¾“å‡ºåŒ¿åå˜é‡ï¼ˆåŒ¿åå˜é‡ä¸èƒ½è¢«é const çš„å·¦å€¼å¼•ç”¨æ¥æ”¶ï¼‰  friend ostream\u0026amp; operator\u0026lt;\u0026lt;(ostream \u0026amp;os, const MyString \u0026amp;s); // é‡è½½ \u0026gt;\u0026gt;  friend istream\u0026amp; operator\u0026gt;\u0026gt;(istream \u0026amp;is, MyString \u0026amp;s); private: // å­—ç¬¦ä¸²çš„æœ‰æ•ˆé•¿åº¦  int m_len; // å­—ç¬¦ä¸²æŒ‡é’ˆ  char* m_pStr; public: MyString(); MyString(const char *); MyString(const MyString \u0026amp;); ~MyString(); // é‡è½½ =  MyString\u0026amp; operator=(const MyString \u0026amp;); // é‡è½½ []  char\u0026amp; operator[](int index); // é‡è½½ +  MyString operator+(const MyString \u0026amp;); // é‡è½½ +=  MyString\u0026amp; operator+=(const MyString \u0026amp;); // é‡è½½ ==  bool operator==(const MyString \u0026amp;); // é‡è½½ !","title":"å®ç°ä¸€ä¸ªç®€å•çš„å­—ç¬¦ä¸²ç±»"},{"content":"1. å£°æ˜é™æ€æ•°ç»„åä¸€å®šè¦è¿›è¡Œåˆå§‹åŒ–ï¼Œå¦åˆ™é‡Œé¢çš„å€¼éƒ½æ˜¯æœªçŸ¥çš„ int main() { int ia[3] = {0}; // è¿™è™½ç„¶åªæ˜¯ç»™ç¬¬ä¸€ä¸ªå…ƒç´ èµ‹äº†å€¼ï¼Œä½†å‰©ä½™æœªèµ‹å€¼çš„å…ƒç´ éƒ½ä¼šåˆå§‹åŒ–ä¸º0  char ca[3] = {0}; double da[3]; bool ba[3]; short sa[3]; float fa[3]; for(auto \u0026amp; i : da){ cout \u0026lt;\u0026lt; i \u0026lt;\u0026lt; endl; } return 0; } è¾“å‡ºï¼š\n6.95128e-310 4.63759e-310 0 2. C++ æ•°ç»„æŒ‡é’ˆå’Œæ•°ç»„ç±»å‹  æ•°ç»„ç±»å‹å’Œæ•°ç»„æŒ‡é’ˆï¼ˆæ•°ç»„åï¼‰ä¸æ˜¯ä¸€ç§ç±»å‹ï¼Œåªæ˜¯æ°å¥½æŒ‡å‘çš„åœ°å€ç›¸åŒè€Œå·² æ•°ç»„åæ˜¯æŒ‡é’ˆå¸¸é‡ï¼ˆint * constï¼‰ï¼Œä»£è¡¨æ•°ç»„ä¸­ç¬¬ä¸€ä¸ªå…ƒç´ çš„åœ°å€ æ•°ç»„ç±»å‹ä»£è¡¨æ•´ä¸ªæ•°ç»„  int main() { int arr[10]; cout \u0026lt;\u0026lt; arr \u0026lt;\u0026lt; endl; cout \u0026lt;\u0026lt; arr + 1 \u0026lt;\u0026lt; endl; cout \u0026lt;\u0026lt; \u0026#34;----------\u0026#34; \u0026lt;\u0026lt; endl; cout \u0026lt;\u0026lt; \u0026amp;arr \u0026lt;\u0026lt; endl; cout \u0026lt;\u0026lt; \u0026amp;arr + 1 \u0026lt;\u0026lt; endl; return 0; } è¾“å‡ºï¼š\n0x7fff7fd65c20 0x7fff7fd65c24 ---------- 0x7fff7fd65c20 0x7fff7fd65c48 å®šä¹‰æ•°ç»„ç±»å‹ï¼š // æ–¹æ³•ä¸€ï¼šå®šä¹‰ä¸€ä¸ªæ•°ç»„ç±»å‹ typedef int(ARRAY_INT_10)[10]; // æ–¹æ³•äºŒï¼šå®šä¹‰ä¸€ä¸ªæ•°ç»„æŒ‡é’ˆï¼ˆä¸æ¨èè¿™ç§å†™æ³•ï¼‰ typedef int(*ARRAY_INT_10_P)[10]; int main() { int arr[10]; // æ–¹æ³•ä¸€ï¼š  ARRAY_INT_10 *arr1 = \u0026amp;arr; for(int i = 0; i \u0026lt; 10; i++){ //arr2[i] = i; // é”™è¯¯ cannot convert â€˜int*â€™ to â€˜int (*)[10]â€™  // arr æ˜¯æ•°ç»„æŒ‡é’ˆï¼Œarr1 æ˜¯æ•°ç»„å  (*arr1)[i] = i; // æ­£ç¡®ï¼Œè¦å¯¹ arr1 é™çº§  } for(int i = 0; i \u0026lt; 10; i++){ cout \u0026lt;\u0026lt; arr[i] \u0026lt;\u0026lt; endl; } cout \u0026lt;\u0026lt; \u0026#34;-----\u0026#34; \u0026lt;\u0026lt; endl; // æ–¹æ³•äºŒï¼š  ARRAY_INT_10_P arr2 = \u0026amp;arr; for(int i = 0; i \u0026lt; 10; i++){ cout \u0026lt;\u0026lt; (*arr2)[i] \u0026lt;\u0026lt; endl; } cout \u0026lt;\u0026lt; \u0026#34;+++++\u0026#34; \u0026lt;\u0026lt; endl; // æ–¹æ³•ä¸‰ï¼š  int(*arr3)[10] = \u0026amp;arr; for(int i = 0; i \u0026lt; 10; i++){ cout \u0026lt;\u0026lt; (*arr3)[i] \u0026lt;\u0026lt; endl; } return 0; } é”™è¯¯è¾“å‡ºï¼š\nmain.cpp:50:26: error: cannot convert â€˜int*â€™ to â€˜int (*)[10]â€™ in initialization 50 | ARRAY_INT_10 *arr2 = arr; | ^~~ | | | int* è¾“å‡ºï¼š\n0 1 2 3 4 5 6 7 8 9 ----- 0 1 2 3 4 5 6 7 8 9 +++++ 0 1 2 3 4 5 6 7 8 9 ","permalink":"https://874656645.github.io/rick/posts/65-%E9%9D%99%E6%80%81%E6%95%B0%E7%BB%84%E5%88%9D%E5%A7%8B%E5%8C%96/","summary":"1. å£°æ˜é™æ€æ•°ç»„åä¸€å®šè¦è¿›è¡Œåˆå§‹åŒ–ï¼Œå¦åˆ™é‡Œé¢çš„å€¼éƒ½æ˜¯æœªçŸ¥çš„ int main() { int ia[3] = {0}; // è¿™è™½ç„¶åªæ˜¯ç»™ç¬¬ä¸€ä¸ªå…ƒç´ èµ‹äº†å€¼ï¼Œä½†å‰©ä½™æœªèµ‹å€¼çš„å…ƒç´ éƒ½ä¼šåˆå§‹åŒ–ä¸º0  char ca[3] = {0}; double da[3]; bool ba[3]; short sa[3]; float fa[3]; for(auto \u0026amp; i : da){ cout \u0026lt;\u0026lt; i \u0026lt;\u0026lt; endl; } return 0; } è¾“å‡ºï¼š\n6.95128e-310 4.63759e-310 0 2. C++ æ•°ç»„æŒ‡é’ˆå’Œæ•°ç»„ç±»å‹  æ•°ç»„ç±»å‹å’Œæ•°ç»„æŒ‡é’ˆï¼ˆæ•°ç»„åï¼‰ä¸æ˜¯ä¸€ç§ç±»å‹ï¼Œåªæ˜¯æ°å¥½æŒ‡å‘çš„åœ°å€ç›¸åŒè€Œå·² æ•°ç»„åæ˜¯æŒ‡é’ˆå¸¸é‡ï¼ˆint * constï¼‰ï¼Œä»£è¡¨æ•°ç»„ä¸­ç¬¬ä¸€ä¸ªå…ƒç´ çš„åœ°å€ æ•°ç»„ç±»å‹ä»£è¡¨æ•´ä¸ªæ•°ç»„  int main() { int arr[10]; cout \u0026lt;\u0026lt; arr \u0026lt;\u0026lt; endl; cout \u0026lt;\u0026lt; arr + 1 \u0026lt;\u0026lt; endl; cout \u0026lt;\u0026lt; \u0026#34;----------\u0026#34; \u0026lt;\u0026lt; endl; cout \u0026lt;\u0026lt; \u0026amp;arr \u0026lt;\u0026lt; endl; cout \u0026lt;\u0026lt; \u0026amp;arr + 1 \u0026lt;\u0026lt; endl; return 0; } è¾“å‡ºï¼š","title":"é™æ€æ•°ç»„åˆå§‹åŒ–"},{"content":"ä¸€ã€å®‰è£… C++ å¼€å‘ç¯å¢ƒ Using GCC with MinGW\n å®‰è£… MSYS2 æ›´æ–° MSYS2 pacman -Syu åœ¨å¼€å§‹èœå•ä¸­è¿è¡Œ MSYS2 MSYSï¼Œæ›´æ–°å…¶ä½™çš„åŸºæœ¬åŒ… pacman -Su å®‰è£… C++ å¼€å‘ç¯å¢ƒï¼š  clang++ x64 gdb: pacman -S --needed base-devel mingw-w64-ucrt-x86_64-clang mingw-w64-ucrt-x86_64-gdb g++ gdb: pacman -S --needed base-devel mingw-w64-x86_64-toolchain clang++ lldb: pacman -S --needed base-devel mingw-w64-clang-x86_64-lldb\nè¿™ä¸ªåº“ä¼šæŠŠ clang clang++ ç­‰åº“å®‰è£…åˆ° msys64/clang64/bin ç›®å½•ï¼Œä½†æ˜¯ lldb åœ¨ Windows ä¸Šçš„è°ƒè¯•æ•ˆæœä¸å¦‚ gdb clang++ x86ï¼špacman -S --needed base-devel mingw-w64-i686-clang   æ·»åŠ ç¯å¢ƒå˜é‡ D:\\msys64\\ucrt64\\bin æ£€æŸ¥æ˜¯å¦å®‰è£…æˆåŠŸ  clang++ --version g++ --version gdb --version    pacman -Syu // æ›´æ–°æ•´ä¸ªç³»ç»Ÿ pacman -Su // æ›´æ–°å·²å®‰è£…çš„åŒ… pacman -Ss å…³é”®å­— // æœç´¢å«å…³é”®å­—çš„åŒ… pacman -S åŒ…å // å®‰è£…åŒ…ï¼Œä¹Ÿå¯ä»¥åŒæ—¶å®‰è£…å¤šä¸ªåŒ…ï¼Œåªéœ€ä»¥ç©ºæ ¼åˆ†éš”åŒ…åå³å¯ pacman -Rs åŒ…å // åˆ é™¤åŒ…åŠå…¶ä¾èµ– pacman -R åŒ…å // åˆ é™¤åŒ… äºŒã€é…ç½® VS Code ä¸»è¦æ˜¯ä¿®æ”¹ task.json å’Œ launch.json ä¸¤ä¸ªé…ç½®æ–‡ä»¶ï¼›\næ–°ç‰ˆæœ¬çš„ VS Code æŒ‰ F5 ä¼šè‡ªåŠ¨åˆ›å»ºè¿™ä¸¤ä¸ªé…ç½®æ–‡ä»¶ï¼Œç¨åšä¿®æ”¹å°±å¯ä»¥äº†ï¼›\ntask.json ç¤ºä¾‹ï¼š\n{ \u0026#34;tasks\u0026#34;: [ { \u0026#34;type\u0026#34;: \u0026#34;cppbuild\u0026#34;, \u0026#34;label\u0026#34;: \u0026#34;Build\u0026#34;, \u0026#34;command\u0026#34;: \u0026#34;clang++.exe\u0026#34;, \u0026#34;args\u0026#34;: [ \u0026#34;-fdiagnostics-color=always\u0026#34;, \u0026#34;-g\u0026#34;, // \u0026#34;${file}\u0026#34;, // å•æ–‡ä»¶  \u0026#34;${fileDirname}\\\\*.cpp\u0026#34;, // å¤šæ–‡ä»¶  \u0026#34;-o\u0026#34;, \u0026#34;${workspaceRoot}\\\\bin64\\\\${fileBasenameNoExtension}.exe\u0026#34;, \u0026#34;-ggdb3\u0026#34;, // ç”Ÿæˆå’Œè°ƒè¯•æœ‰å…³çš„ä¿¡æ¯  \u0026#34;-Wall\u0026#34;, // å¼€å¯é¢å¤–è­¦å‘Š  \u0026#34;-static-libgcc\u0026#34;, // é™æ€é“¾æ¥  \u0026#34;-std=c++17\u0026#34;, // ä½¿ç”¨c++17æ ‡å‡†  \u0026#34;-finput-charset=UTF-8\u0026#34;, // è¾“å…¥ç¼–è¯‘å™¨æ–‡æœ¬ç¼–ç  é»˜è®¤ä¸ºUTF-8  \u0026#34;-D _USE_MATH_DEFINES\u0026#34; ], \u0026#34;options\u0026#34;: { \u0026#34;cwd\u0026#34;: \u0026#34;${fileDirname}\u0026#34; }, \u0026#34;problemMatcher\u0026#34;: [ \u0026#34;$gcc\u0026#34; ], \u0026#34;group\u0026#34;: \u0026#34;build\u0026#34;, \u0026#34;detail\u0026#34;: \u0026#34;è°ƒè¯•å™¨ç”Ÿæˆçš„ä»»åŠ¡ã€‚\u0026#34; } ], \u0026#34;version\u0026#34;: \u0026#34;2.0.0\u0026#34; } launch.json ç¤ºä¾‹ï¼š\n{ // ä½¿ç”¨ IntelliSense äº†è§£ç›¸å…³å±æ€§ã€‚  // æ‚¬åœä»¥æŸ¥çœ‹ç°æœ‰å±æ€§çš„æè¿°ã€‚  // æ¬²äº†è§£æ›´å¤šä¿¡æ¯ï¼Œè¯·è®¿é—®: https://go.microsoft.com/fwlink/?linkid=830387  \u0026#34;version\u0026#34;: \u0026#34;0.2.0\u0026#34;, \u0026#34;configurations\u0026#34;: [ { \u0026#34;name\u0026#34;: \u0026#34;Debug\u0026#34;, \u0026#34;type\u0026#34;: \u0026#34;cppdbg\u0026#34;, \u0026#34;request\u0026#34;: \u0026#34;launch\u0026#34;, \u0026#34;program\u0026#34;: \u0026#34;${workspaceRoot}\\\\bin64\\\\${fileBasenameNoExtension}.exe\u0026#34;, \u0026#34;args\u0026#34;: [], \u0026#34;stopAtEntry\u0026#34;: false, \u0026#34;cwd\u0026#34;: \u0026#34;${fileDirname}\u0026#34;, \u0026#34;environment\u0026#34;: [], \u0026#34;externalConsole\u0026#34;: false, \u0026#34;MIMode\u0026#34;: \u0026#34;gdb\u0026#34;, \u0026#34;miDebuggerPath\u0026#34;: \u0026#34;gdb.exe\u0026#34;, \u0026#34;setupCommands\u0026#34;: [ { \u0026#34;description\u0026#34;: \u0026#34;ä¸º gdb å¯ç”¨æ•´é½æ‰“å°\u0026#34;, \u0026#34;text\u0026#34;: \u0026#34;-enable-pretty-printing\u0026#34;, \u0026#34;ignoreFailures\u0026#34;: true } ], \u0026#34;preLaunchTask\u0026#34;: \u0026#34;Build\u0026#34; } ] } ","permalink":"https://874656645.github.io/rick/posts/64-vs-code-%E6%90%AD%E5%BB%BA-c++-%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83/","summary":"ä¸€ã€å®‰è£… C++ å¼€å‘ç¯å¢ƒ Using GCC with MinGW\n å®‰è£… MSYS2 æ›´æ–° MSYS2 pacman -Syu åœ¨å¼€å§‹èœå•ä¸­è¿è¡Œ MSYS2 MSYSï¼Œæ›´æ–°å…¶ä½™çš„åŸºæœ¬åŒ… pacman -Su å®‰è£… C++ å¼€å‘ç¯å¢ƒï¼š  clang++ x64 gdb: pacman -S --needed base-devel mingw-w64-ucrt-x86_64-clang mingw-w64-ucrt-x86_64-gdb g++ gdb: pacman -S --needed base-devel mingw-w64-x86_64-toolchain clang++ lldb: pacman -S --needed base-devel mingw-w64-clang-x86_64-lldb\nè¿™ä¸ªåº“ä¼šæŠŠ clang clang++ ç­‰åº“å®‰è£…åˆ° msys64/clang64/bin ç›®å½•ï¼Œä½†æ˜¯ lldb åœ¨ Windows ä¸Šçš„è°ƒè¯•æ•ˆæœä¸å¦‚ gdb clang++ x86ï¼špacman -S --needed base-devel mingw-w64-i686-clang   æ·»åŠ ç¯å¢ƒå˜é‡ D:\\msys64\\ucrt64\\bin æ£€æŸ¥æ˜¯å¦å®‰è£…æˆåŠŸ  clang++ --version g++ --version gdb --version    pacman -Syu // æ›´æ–°æ•´ä¸ªç³»ç»Ÿ pacman -Su // æ›´æ–°å·²å®‰è£…çš„åŒ… pacman -Ss å…³é”®å­— // æœç´¢å«å…³é”®å­—çš„åŒ… pacman -S åŒ…å // å®‰è£…åŒ…ï¼Œä¹Ÿå¯ä»¥åŒæ—¶å®‰è£…å¤šä¸ªåŒ…ï¼Œåªéœ€ä»¥ç©ºæ ¼åˆ†éš”åŒ…åå³å¯ pacman -Rs åŒ…å // åˆ é™¤åŒ…åŠå…¶ä¾èµ– pacman -R åŒ…å // åˆ é™¤åŒ… äºŒã€é…ç½® VS Code ä¸»è¦æ˜¯ä¿®æ”¹ task.","title":"VS Code æ­å»º c++ gdb å¼€å‘ç¯å¢ƒ"},{"content":"C/C++å†…å­˜å¯¹é½è¯¦è§£\nå†…å­˜å¯¹é½è§„åˆ™  å¯¹é½ç³»æ•°ï¼ˆä¹Ÿå«å¯¹é½æ¨¡æ•°ï¼‰ï¼šgccä¸­é»˜è®¤ #pragma pack(4)ï¼Œå¯ä»¥é€šè¿‡é¢„ç¼–è¯‘å‘½ä»¤ #pragma pack(n)ï¼Œn = 1,2,4,8,16 æ¥æ”¹å˜è¿™ä¸€ç³»æ•° æœ‰æ•ˆå¯¹é½å€¼ï¼šæ˜¯ç»™å®šå€¼ #pragma pack(n) å’Œç»“æ„ä½“ä¸­ æœ€é•¿æ•°æ®ç±»å‹é•¿åº¦ä¸­è¾ƒå°çš„é‚£ä¸ªã€‚æœ‰æ•ˆå¯¹é½å€¼ä¹Ÿå« å¯¹é½å•ä½    è§„åˆ™ä¸€ï¼šç»“æ„ä½“ç¬¬ä¸€ä¸ªæˆå‘˜çš„åç§»é‡ offset ä¸º 0ï¼Œä»¥åæ¯ä¸ªæˆå‘˜ç›¸å¯¹äºç»“æ„ä½“é¦–åœ°å€çš„ offset éƒ½æ˜¯è¯¥æˆå‘˜å¤§å°ä¸æœ‰æ•ˆå¯¹é½å€¼ä¸­è¾ƒå°é‚£ä¸ªçš„æ•´æ•°å€ï¼Œå¦‚æœ‰éœ€è¦ç¼–è¯‘å™¨ä¼šåœ¨æˆå‘˜ä¹‹é—´åŠ ä¸Šå¡«å……å­—èŠ‚\n  è§„åˆ™äºŒï¼šç»“æ„ä½“çš„æ€»å¤§å°ä¸º æœ‰æ•ˆå¯¹é½å€¼ çš„æ•´æ•°å€ï¼Œå¦‚æœ‰éœ€è¦ç¼–è¯‘å™¨ä¼šåœ¨æœ€æœ«ä¸€ä¸ªæˆå‘˜ä¹‹ååŠ ä¸Šå¡«å……å­—èŠ‚\næ³¨æ„ï¼šä¸Šé¢ä¸¤æ¡è§„åˆ™éƒ½éœ€è¦å¾—åˆ°æ»¡è¶³\næ³¨æ„ï¼šæˆå‘˜å˜é‡é¦–åœ°å€åç§»å’Œå¯¹é½éƒ½æ˜¯ä¸ã€æœ‰æ•ˆå¯¹é½å€¼ã€‘è¿›è¡Œæ¯”è¾ƒï¼Œè€Œæœ‰æ•ˆå¯¹é½å€¼æ˜¯å¯¹é½ç³»æ•°ä¸ç»“æ„ä½“ä¸­æœ€é•¿æ•°æ®ç±»å‹ä¸­çš„è¾ƒå°è€…\n  // 64 ä½ç¨‹åº struct { int i; char c1; char c2; }x1; struct{ char c1; int i; char c2; }x2; struct{ char c1; char c2; int i; }x3; struct { short i; char c1; char c2; }y1; struct{ char c1; short i; char c2; }y2; struct{ char c1; char c2; short i; }y3; int main() { printf(\u0026#34;%ld\\n\u0026#34;,sizeof(x1)); // è¾“å‡º8  printf(\u0026#34;%ld\\n\u0026#34;,sizeof(x2)); // è¾“å‡º12  printf(\u0026#34;%ld\\n\u0026#34;,sizeof(x3)); // è¾“å‡º8  cout \u0026lt;\u0026lt; \u0026#34;----------------\u0026#34; \u0026lt;\u0026lt; endl; printf(\u0026#34;%ld\\n\u0026#34;,sizeof(y1)); // è¾“å‡º4  printf(\u0026#34;%ld\\n\u0026#34;,sizeof(y2)); // è¾“å‡º6  printf(\u0026#34;%ld\\n\u0026#34;,sizeof(y3)); // è¾“å‡º4  return 0; } æ—¢è¦è€ƒè™‘é¦–åœ°å€åç§»ï¼Œåˆè¦æ˜¯æœ‰æ•ˆå¯¹é½å€¼ï¼ˆå¯¹é½å•ä½ï¼‰çš„æ•´æ•°å€ y1 y2 y3ç»“æ„ä½“ï¼š\nä»¥ä¸Šæµ‹è¯•éƒ½æ˜¯åœ¨ Linux ç¯å¢ƒä¸‹è¿›è¡Œçš„ï¼Œlinux ä¸‹é»˜è®¤ #pragma pack(4)ï¼Œä¸”ç»“æ„ä½“ä¸­æœ€é•¿çš„æ•°æ®ç±»å‹ä¸º 2 ä¸ªå­—èŠ‚ï¼Œæ‰€ä»¥æœ‰æ•ˆå¯¹é½å•ä½ä¸º 2 å­—èŠ‚ï¼Œä¸‹é¢æ ¹æ®ä¸Šé¢æ‰€è¯´çš„è§„åˆ™ä»¥ y2 æ¥åˆ†æå…¶å†…å­˜å¸ƒå±€ï¼š\né¦–å…ˆä½¿ç”¨è§„åˆ™ 1ï¼Œå¯¹æˆå‘˜å˜é‡è¿›è¡Œå¯¹é½ï¼š\nsizeof(c1) = 1 \u0026lt;= 2 (æœ‰æ•ˆå¯¹é½ä½)ï¼ŒæŒ‰ç…§ 1 å­—èŠ‚å¯¹é½ï¼Œå ç”¨ç¬¬ 0 å•å…ƒï¼›\nsizeof(i) = 2 \u0026lt;= 2 (æœ‰æ•ˆå¯¹é½ä½)ï¼Œç›¸å¯¹äºç»“æ„ä½“é¦–åœ°å€çš„åç§»è¦ä¸º 2 çš„å€æ•°ï¼Œå ç”¨ç¬¬ 2ï¼Œ3 å•å…ƒï¼›\nsizeof(c2) = 1 \u0026lt;= 2 (æœ‰æ•ˆå¯¹é½ä½)ï¼Œç›¸å¯¹äºç»“æ„ä½“é¦–åœ°å€çš„åç§»è¦ä¸º 1 çš„å€æ•°ï¼Œå ç”¨ç¬¬ 4 å•å…ƒï¼›\nç„¶åä½¿ç”¨è§„åˆ™ 2ï¼Œå¯¹ç»“æ„ä½“æ•´ä½“è¿›è¡Œå¯¹é½ï¼š\ny2 ä¸­å˜é‡ i å ç”¨å†…å­˜æœ€å¤§å  2 å­—èŠ‚ï¼Œè€Œæœ‰å¯¹é½ç³»æ•°ä¸º 4 å­—èŠ‚ï¼Œä¸¤è€…è¾ƒå°å€¼å°±æ˜¯ 2 å­—èŠ‚ã€‚å› æ­¤æ•´ä½“ä¹Ÿæ˜¯æŒ‰ç…§ 2 å­—èŠ‚å¯¹é½ã€‚ç”±è§„åˆ™ 1 å¾—åˆ° y2 å  5 ä¸ªå­—èŠ‚ï¼Œæ­¤å¤„å†æŒ‰ç…§è§„åˆ™ 2 è¿›è¡Œæ•´ä½“çš„ 2 å­—èŠ‚å¯¹é½ï¼Œæ‰€ä»¥æ•´ä¸ªç»“æ„ä½“å ç”¨ 6 ä¸ªå­—èŠ‚ã€‚\n","permalink":"https://874656645.github.io/rick/posts/63-c++-%E5%86%85%E5%AD%98%E5%AF%B9%E9%BD%90/","summary":"C/C++å†…å­˜å¯¹é½è¯¦è§£\nå†…å­˜å¯¹é½è§„åˆ™  å¯¹é½ç³»æ•°ï¼ˆä¹Ÿå«å¯¹é½æ¨¡æ•°ï¼‰ï¼šgccä¸­é»˜è®¤ #pragma pack(4)ï¼Œå¯ä»¥é€šè¿‡é¢„ç¼–è¯‘å‘½ä»¤ #pragma pack(n)ï¼Œn = 1,2,4,8,16 æ¥æ”¹å˜è¿™ä¸€ç³»æ•° æœ‰æ•ˆå¯¹é½å€¼ï¼šæ˜¯ç»™å®šå€¼ #pragma pack(n) å’Œç»“æ„ä½“ä¸­ æœ€é•¿æ•°æ®ç±»å‹é•¿åº¦ä¸­è¾ƒå°çš„é‚£ä¸ªã€‚æœ‰æ•ˆå¯¹é½å€¼ä¹Ÿå« å¯¹é½å•ä½    è§„åˆ™ä¸€ï¼šç»“æ„ä½“ç¬¬ä¸€ä¸ªæˆå‘˜çš„åç§»é‡ offset ä¸º 0ï¼Œä»¥åæ¯ä¸ªæˆå‘˜ç›¸å¯¹äºç»“æ„ä½“é¦–åœ°å€çš„ offset éƒ½æ˜¯è¯¥æˆå‘˜å¤§å°ä¸æœ‰æ•ˆå¯¹é½å€¼ä¸­è¾ƒå°é‚£ä¸ªçš„æ•´æ•°å€ï¼Œå¦‚æœ‰éœ€è¦ç¼–è¯‘å™¨ä¼šåœ¨æˆå‘˜ä¹‹é—´åŠ ä¸Šå¡«å……å­—èŠ‚\n  è§„åˆ™äºŒï¼šç»“æ„ä½“çš„æ€»å¤§å°ä¸º æœ‰æ•ˆå¯¹é½å€¼ çš„æ•´æ•°å€ï¼Œå¦‚æœ‰éœ€è¦ç¼–è¯‘å™¨ä¼šåœ¨æœ€æœ«ä¸€ä¸ªæˆå‘˜ä¹‹ååŠ ä¸Šå¡«å……å­—èŠ‚\næ³¨æ„ï¼šä¸Šé¢ä¸¤æ¡è§„åˆ™éƒ½éœ€è¦å¾—åˆ°æ»¡è¶³\næ³¨æ„ï¼šæˆå‘˜å˜é‡é¦–åœ°å€åç§»å’Œå¯¹é½éƒ½æ˜¯ä¸ã€æœ‰æ•ˆå¯¹é½å€¼ã€‘è¿›è¡Œæ¯”è¾ƒï¼Œè€Œæœ‰æ•ˆå¯¹é½å€¼æ˜¯å¯¹é½ç³»æ•°ä¸ç»“æ„ä½“ä¸­æœ€é•¿æ•°æ®ç±»å‹ä¸­çš„è¾ƒå°è€…\n  // 64 ä½ç¨‹åº struct { int i; char c1; char c2; }x1; struct{ char c1; int i; char c2; }x2; struct{ char c1; char c2; int i; }x3; struct { short i; char c1; char c2; }y1; struct{ char c1; short i; char c2; }y2; struct{ char c1; char c2; short i; }y3; int main() { printf(\u0026#34;%ld\\n\u0026#34;,sizeof(x1)); // è¾“å‡º8  printf(\u0026#34;%ld\\n\u0026#34;,sizeof(x2)); // è¾“å‡º12  printf(\u0026#34;%ld\\n\u0026#34;,sizeof(x3)); // è¾“å‡º8  cout \u0026lt;\u0026lt; \u0026#34;----------------\u0026#34; \u0026lt;\u0026lt; endl; printf(\u0026#34;%ld\\n\u0026#34;,sizeof(y1)); // è¾“å‡º4  printf(\u0026#34;%ld\\n\u0026#34;,sizeof(y2)); // è¾“å‡º6  printf(\u0026#34;%ld\\n\u0026#34;,sizeof(y3)); // è¾“å‡º4  return 0; } æ—¢è¦è€ƒè™‘é¦–åœ°å€åç§»ï¼Œåˆè¦æ˜¯æœ‰æ•ˆå¯¹é½å€¼ï¼ˆå¯¹é½å•ä½ï¼‰çš„æ•´æ•°å€ y1 y2 y3ç»“æ„ä½“ï¼š","title":"C++ å†…å­˜å¯¹é½"},{"content":" ä½¿ç”¨æ¨¡æ¿ç±» é‡è½½ -\u0026gt; æ“ä½œç¬¦ é‡è½½ * æ“ä½œç¬¦  template\u0026lt;typename T\u0026gt; class MyAutoPtr{ public: MyAutoPtr(T * t){ ptr = t; } ~MyAutoPtr(){ if(ptr != NULL){ delete ptr; ptr = NULL; } } T* operator-\u0026gt;(){ // ç›¸å½“äº ptr-\u0026gt; , æ‰€ä»¥è¿”å› ptr æŒ‡é’ˆå³å¯  return ptr; } T\u0026amp; operator*(){ // ç›¸å½“äº (*ptr). ï¼Œæ‰€ä»¥è¿”å› ptr æŒ‡å‘çš„å¯¹è±¡å¼•ç”¨å³å¯  return *ptr; } private: T* ptr; }; class A{ public: A(int a){ cout \u0026lt;\u0026lt; \u0026#34;A(int)...\u0026#34; \u0026lt;\u0026lt; endl; this-\u0026gt;a = a; } ~A(){ cout \u0026lt;\u0026lt; \u0026#34;~A()...\u0026#34; \u0026lt;\u0026lt; endl; } void printA(){ cout \u0026lt;\u0026lt; \u0026#34;a = \u0026#34; \u0026lt;\u0026lt; a \u0026lt;\u0026lt; endl; } private: int a; }; int main( ) { MyAutoPtr\u0026lt;A\u0026gt; p(new A(10)); p-\u0026gt;printA(); // ptr-\u0026gt;printA()  (*p).printA(); // (*ptr).printA()  MyAutoPtr\u0026lt;int\u0026gt; ip(new int(100)); cout \u0026lt;\u0026lt; *ip \u0026lt;\u0026lt; endl; return 0; } è¾“å‡ºï¼š\nA(int)... a = 10 a = 10 100 ~A()... ","permalink":"https://874656645.github.io/rick/posts/62-%E8%87%AA%E5%AE%9A%E4%B9%89%E6%99%BA%E8%83%BD%E6%8C%87%E9%92%88/","summary":"ä½¿ç”¨æ¨¡æ¿ç±» é‡è½½ -\u0026gt; æ“ä½œç¬¦ é‡è½½ * æ“ä½œç¬¦  template\u0026lt;typename T\u0026gt; class MyAutoPtr{ public: MyAutoPtr(T * t){ ptr = t; } ~MyAutoPtr(){ if(ptr != NULL){ delete ptr; ptr = NULL; } } T* operator-\u0026gt;(){ // ç›¸å½“äº ptr-\u0026gt; , æ‰€ä»¥è¿”å› ptr æŒ‡é’ˆå³å¯  return ptr; } T\u0026amp; operator*(){ // ç›¸å½“äº (*ptr). ï¼Œæ‰€ä»¥è¿”å› ptr æŒ‡å‘çš„å¯¹è±¡å¼•ç”¨å³å¯  return *ptr; } private: T* ptr; }; class A{ public: A(int a){ cout \u0026lt;\u0026lt; \u0026#34;A(int)...\u0026#34; \u0026lt;\u0026lt; endl; this-\u0026gt;a = a; } ~A(){ cout \u0026lt;\u0026lt; \u0026#34;~A().","title":"è‡ªå®šä¹‰æ™ºèƒ½æŒ‡é’ˆ"},{"content":"ä¸€ã€è¿›ç¨‹ä¸çº¿ç¨‹  è¿›ç¨‹æ˜¯èµ„æºåˆ†é…å’Œè°ƒåº¦çš„ä¸€ä¸ªç‹¬ç«‹å•ä½ï¼›è€Œçº¿ç¨‹æ˜¯è¿›ç¨‹çš„ä¸€ä¸ªå®ä½“ï¼Œæ˜¯ CPU è°ƒåº¦å’Œåˆ†é…çš„åŸºæœ¬å•ä½ åŒä¸€ä¸ªè¿›ç¨‹ä¸­çš„å¤šä¸ªçº¿ç¨‹çš„å†…å­˜èµ„æºæ˜¯å…±äº«çš„ï¼Œå„çº¿ç¨‹éƒ½å¯ä»¥æ”¹å˜è¿›ç¨‹ä¸­çš„å˜é‡ã€‚å› æ­¤åœ¨æ‰§è¡Œå¤šçº¿ç¨‹è¿ç®—çš„æ—¶å€™è¦æ³¨æ„æ‰§è¡Œé¡ºåº  äºŒã€å¹¶è¡Œä¸å¹¶å‘  å¹¶è¡Œï¼ˆparallellismï¼‰æŒ‡çš„æ˜¯å¤šä¸ªä»»åŠ¡åœ¨åŒä¸€æ—¶åˆ»åŒæ—¶åœ¨æ‰§è¡Œ å¹¶å‘ï¼ˆconcurrencyï¼‰æ˜¯æŒ‡åœ¨ä¸€ä¸ªæ—¶é—´æ®µå†…ï¼Œå¤šä¸ªä»»åŠ¡äº¤æ›¿è¿›è¡Œã€‚è™½ç„¶çœ‹èµ·æ¥åƒåœ¨åŒæ—¶æ‰§è¡Œï¼Œä½†å…¶å®æ˜¯äº¤æ›¿çš„  ä¸‰ã€å¤šä»»åŠ¡å¤„ç† å¤šçº¿ç¨‹æ˜¯å¤šä»»åŠ¡å¤„ç†çš„ä¸€ç§ç‰¹æ®Šå½¢å¼ï¼Œä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæœ‰åŸºäºè¿›ç¨‹å’ŒåŸºäºçº¿ç¨‹çš„ä¸¤ç§ç±»å‹çš„å¤šä»»åŠ¡å¤„ç†æ–¹å¼ã€‚\n åŸºäºè¿›ç¨‹çš„å¤šä»»åŠ¡å¤„ç†æ˜¯ç¨‹åºçš„å¹¶å‘æ‰§è¡Œ åŸºäºçº¿ç¨‹çš„å¤šä»»åŠ¡å¤„ç†æ˜¯åŒä¸€ç¨‹åºçš„ç‰‡æ®µçš„å¹¶å‘æ‰§è¡Œ  å››ã€C++11 çº¿ç¨‹ç®¡ç† thread åº“  C++11 æä¾›äº†å¤šçº¿ç¨‹åº“ï¼Œä½¿ç”¨æ—¶éœ€è¦ #include \u0026lt;thread\u0026gt; å¤´æ–‡ä»¶ï¼Œè¯¥å¤´æ–‡ä»¶ä¸»è¦åŒ…å«äº†å¯¹çº¿ç¨‹çš„ç®¡ç†ç±» std::thread ä»¥åŠå…¶ä»–ç®¡ç†çº¿ç¨‹ç›¸å…³çš„ç±» æ¯ä¸ªåº”ç”¨ç¨‹åºè‡³å°‘æœ‰ä¸€ä¸ªè¿›ç¨‹ï¼Œè€Œæ¯ä¸ªè¿›ç¨‹è‡³å°‘æœ‰ä¸€ä¸ªä¸»çº¿ç¨‹ï¼Œé™¤äº†ä¸»çº¿ç¨‹å¤–ï¼Œåœ¨ä¸€ä¸ªè¿›ç¨‹ä¸­è¿˜å¯ä»¥åˆ›å»ºå¤šä¸ªå­çº¿ç¨‹ã€‚æ¯ä¸ªçº¿ç¨‹éƒ½éœ€è¦ä¸€ä¸ªå…¥å£å‡½æ•°ï¼Œå…¥å£å‡½æ•°è¿”å›é€€å‡ºï¼Œè¯¥çº¿ç¨‹ä¹Ÿä¼šé€€å‡ºï¼Œä¸»çº¿ç¨‹å°±æ˜¯ä»¥ main å‡½æ•°ä½œä¸ºå…¥å£å‡½æ•°çš„çº¿ç¨‹ ä¸»çº¿ç¨‹é€€å‡ºåï¼Œè¿è¡Œä¸­çš„å­çº¿ç¨‹ä¹Ÿä¼šè¢«é”€æ¯ std::thread çš„æ„é€ å‡½æ•°éœ€è¦çš„æ˜¯å¯è°ƒç”¨ï¼ˆcallableï¼‰ç±»å‹ï¼Œé™¤äº†å‡½æ•°å¤–ï¼Œè¿˜å¯ä»¥è°ƒç”¨ lambda è¡¨è¾¾å¼ã€é‡è½½äº† () è¿ç®—ç¬¦çš„ç±»çš„å®ä¾‹ æŠŠå‡½æ•°å¯¹è±¡ä¼ å…¥ std::thread æ—¶ï¼Œåº”ä¼ å…¥å‡½æ•°åç§°ï¼ˆä¸å¸¦æ‹¬å·ï¼‰ å½“å¯åŠ¨ä¸€ä¸ªçº¿ç¨‹åï¼Œä¸€å®šè¦åœ¨è¯¥çº¿ç¨‹ thread é”€æ¯å‰ï¼Œè°ƒç”¨ join() æˆ–è€… detach()ï¼Œç¡®å®šä»¥ä½•ç§æ–¹å¼ç­‰å¾…çº¿ç¨‹æ‰§è¡Œç»“æŸ  detach æ–¹å¼ï¼Œå¯åŠ¨çš„çº¿ç¨‹è‡ªä¸»åœ¨åå°è¿è¡Œï¼Œå½“å‰çš„ä»£ç ç»§ç»­å¾€ä¸‹æ‰§è¡Œï¼Œä¸ç­‰å¾…æ–°çº¿ç¨‹ç»“æŸ join æ–¹å¼ï¼Œç­‰å¾…å…³è”çš„çº¿ç¨‹å®Œæˆï¼Œæ‰ä¼šç»§ç»­æ‰§è¡Œ join() åçš„ä»£ç  åœ¨ä»¥ detach çš„æ–¹å¼æ‰§è¡Œçº¿ç¨‹æ—¶ï¼Œè¦å°†çº¿ç¨‹è®¿é—®çš„å±€éƒ¨æ•°æ®å¤åˆ¶åˆ°çº¿ç¨‹çš„ç©ºé—´ï¼ˆä½¿ç”¨æŒ‰å€¼ä¼ é€’ï¼‰ï¼Œä¸€å®šè¦ç¡®ä¿çº¿ç¨‹æ²¡æœ‰ä½¿ç”¨å±€éƒ¨å˜é‡çš„å¼•ç”¨æˆ–è€…æŒ‡é’ˆï¼Œé™¤éä½ èƒ½è‚¯å®šè¯¥çº¿ç¨‹ä¼šåœ¨å±€éƒ¨ä½œç”¨åŸŸç»“æŸå‰æ‰§è¡Œç»“æŸ    1ã€è°ƒç”¨å…¨å±€å‡½æ•°å¯åŠ¨çº¿ç¨‹ #include \u0026lt;thread\u0026gt; using namespace std; void func(int i){ cout \u0026lt;\u0026lt; i \u0026lt;\u0026lt; endl; } int main() { for(int i = 0; i \u0026lt; 4; ++i){ // åˆ›å»ºä¸€ä¸ªçº¿ç¨‹tï¼Œç¬¬ä¸€ä¸ªå‚æ•°ä¸ºè°ƒç”¨çš„å‡½æ•°ï¼Œç¬¬äºŒä¸ªå‚æ•°ä¸ºä¼ é€’çš„å‚æ•°  thread t(func, i); // è¡¨ç¤ºå…è®¸è¯¥çº¿ç¨‹åœ¨åå°è¿è¡Œ  t.detach(); } return 0; } è¾“å‡ºï¼š\nStart 10 2 3 0 Finish 2ã€è°ƒç”¨ç±»æˆå‘˜å‡½æ•°å¯åŠ¨çº¿ç¨‹ class Test{ public: explicit Test(int a){ this-\u0026gt;a = a; } void fuc1(int n){ cout \u0026lt;\u0026lt; \u0026#34;fuc1() n = \u0026#34; \u0026lt;\u0026lt; n * a \u0026lt;\u0026lt; endl; } static void fuc2(int n){ cout \u0026lt;\u0026lt; \u0026#34;static fuc2() n = \u0026#34; \u0026lt;\u0026lt; n \u0026lt;\u0026lt; endl; } private: int a; }; int main() { Test t(5); thread t1(\u0026amp;Test::fuc1, \u0026amp;t, 10); t1.join(); thread t2(\u0026amp;Test::fuc2, 100); t2.join(); return 0; } è¾“å‡ºï¼š\nStart fuc1() n = 50 static fuc2() n = 100 0 Finish 3ã€è½¬ç§»çº¿ç¨‹çš„æ‰€æœ‰æƒ thread æ˜¯å¯ç§»åŠ¨çš„ (movable) çš„ï¼Œä½†ä¸å¯å¤åˆ¶çš„ (copyable)ã€‚å¯ä»¥é€šè¿‡ move æ¥æ”¹å˜çº¿ç¨‹çš„æ‰€æœ‰æƒï¼Œçµæ´»çš„å†³å®šçº¿ç¨‹åœ¨ä»€ä¹ˆæ—¶å€™ join æˆ–è€… detach\nthread t1(f1); thread t3(move(t1)); å°†çº¿ç¨‹ä» t1 è½¬ç§»ç»™ t3ï¼Œè¿™æ—¶å€™ t1 å°±ä¸å†æ‹¥æœ‰çº¿ç¨‹çš„æ‰€æœ‰æƒï¼Œè°ƒç”¨ t1.join æˆ– t1.detach ä¼šå‡ºç°å¼‚å¸¸ï¼Œè¦ä½¿ç”¨ t3 æ¥ç®¡ç†çº¿ç¨‹ã€‚è¿™ä¹Ÿå°±æ„å‘³ç€ thread å¯ä»¥ä½œä¸ºå‡½æ•°çš„è¿”å›ç±»å‹ï¼Œæˆ–è€…ä½œä¸ºå‚æ•°ä¼ é€’ç»™å‡½æ•°ï¼Œèƒ½å¤Ÿæ›´ä¸ºæ–¹ä¾¿çš„ç®¡ç†çº¿ç¨‹\n4ã€çº¿ç¨‹æ ‡è¯†çš„è·å– çº¿ç¨‹çš„æ ‡è¯†ç±»å‹ä¸º std:ğŸ§µ:idï¼Œæœ‰ä¸¤ç§æ–¹å¼è·å¾—åˆ°çº¿ç¨‹çš„ idï¼š\n é€šè¿‡ thread çš„å®ä¾‹è°ƒç”¨ get_id() ç›´æ¥è·å– åœ¨å½“å‰çº¿ç¨‹ä¸Šè°ƒç”¨ this_thread::get_id() è·å–  5ã€çº¿ç¨‹æš‚åœ å¦‚æœè®©çº¿ç¨‹ä»å¤–éƒ¨æš‚åœä¼šå¼•å‘å¾ˆå¤šå¹¶å‘é—®é¢˜ï¼Œè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆstd::threadæ²¡æœ‰ç›´æ¥æä¾›pauseå‡½æ•°çš„åŸå› ã€‚å¦‚æœçº¿ç¨‹åœ¨è¿è¡Œè¿‡ç¨‹ä¸­ï¼Œç¡®å®éœ€è¦åœé¡¿ï¼Œå°±å¯ä»¥ç”¨ this_thread::sleep_for\nclass Test{ public: explicit Test(int a){ this-\u0026gt;a = a; } void fuc1(int n){ this_thread::sleep_for(chrono::seconds(3)); cout \u0026lt;\u0026lt; \u0026#34;fuc1() n = \u0026#34; \u0026lt;\u0026lt; n * a \u0026lt;\u0026lt; endl; } static void fuc2(int n){ cout \u0026lt;\u0026lt; \u0026#34;static fuc2() n = \u0026#34; \u0026lt;\u0026lt; n \u0026lt;\u0026lt; endl; } private: int a; }; int main() { Test t(5); thread t1(\u0026amp;Test::fuc1, \u0026amp;t, 10); cout \u0026lt;\u0026lt; t1.get_id() \u0026lt;\u0026lt; endl; t1.join(); //t1.detach(); // ä¸»çº¿ç¨‹é”€åï¼Œt1 è¿™ä¸ªç­‰å¾…çº¿ç¨‹ä¹Ÿä¼šè¢«é”€æ¯ï¼ˆæ²¡æœ‰æ‰§è¡Œfuc1å‡½æ•°çš„è¾“å‡ºï¼‰  thread t2(\u0026amp;Test::fuc2, 100); cout \u0026lt;\u0026lt; t2.get_id() \u0026lt;\u0026lt; endl; t2.join(); cout \u0026lt;\u0026lt; \u0026#34;main thread id: \u0026#34; \u0026lt;\u0026lt; this_thread::get_id() \u0026lt;\u0026lt; endl; return 0; } è¾“å‡ºï¼š\nStart 140270821496576 140270813103872 static fuc2() n = 100 main thread id: 140270844794624 0 Finish 6ã€å¼‚å¸¸æƒ…å†µä¸‹ç­‰å¾…çº¿ç¨‹å®Œæˆ ä¸ºäº†é¿å…ä¸»çº¿ç¨‹å‡ºç°å¼‚å¸¸æ—¶å°†å­çº¿ç¨‹ç»ˆç»“ï¼Œå°±è¦ä¿è¯å­çº¿ç¨‹åœ¨å‡½æ•°é€€å‡ºå‰å®Œæˆï¼Œå³åœ¨å‡½æ•°é€€å‡ºå‰è°ƒç”¨ join()\n æ–¹æ³•ä¸€ï¼šå¼‚å¸¸æ•è·  void func() { thread t([]{ cout \u0026lt;\u0026lt; \u0026#34;hello C++ 11\u0026#34; \u0026lt;\u0026lt; endl; }); try { do_something_else(); } catch (...) { t.join(); throw; } t.join(); }  æ–¹æ³•äºŒï¼šèµ„æºè·å–å³åˆå§‹åŒ–ï¼ˆRAIIï¼‰  æ— è®ºæ˜¯ä½•ç§æƒ…å†µï¼Œå½“å‡½æ•°é€€å‡ºæ—¶ï¼Œå¯¹è±¡ guard è°ƒç”¨å…¶ææ„å‡½æ•°é”€æ¯ï¼Œä»è€Œèƒ½å¤Ÿä¿è¯ join ä¸€å®šä¼šè¢«è°ƒç”¨\nclass thread_guard { private: thread \u0026amp;t; public: /*åŠ å…¥explicité˜²æ­¢éšå¼è½¬æ¢*/ explicit thread_guard(thread\u0026amp; _t) { t = _t; } thread_guard(const thread_guard\u0026amp;) = delete; //åˆ é™¤é»˜è®¤æ‹·è´æ„é€ å‡½æ•°  thread_guard\u0026amp; operator=(const thread_guard\u0026amp;) = delete; //åˆ é™¤é»˜è®¤èµ‹å€¼è¿ç®—ç¬¦  ~thread_guard() { if (t.joinable()) t.join(); } }; void func(){ thread t([]{ cout \u0026lt;\u0026lt; \u0026#34;Hello thread\u0026#34; \u0026lt;\u0026lt;endl ; }); thread_guard guard(t); } ","permalink":"https://874656645.github.io/rick/posts/61-c++-%E5%A4%9A%E7%BA%BF%E7%A8%8B/","summary":"ä¸€ã€è¿›ç¨‹ä¸çº¿ç¨‹  è¿›ç¨‹æ˜¯èµ„æºåˆ†é…å’Œè°ƒåº¦çš„ä¸€ä¸ªç‹¬ç«‹å•ä½ï¼›è€Œçº¿ç¨‹æ˜¯è¿›ç¨‹çš„ä¸€ä¸ªå®ä½“ï¼Œæ˜¯ CPU è°ƒåº¦å’Œåˆ†é…çš„åŸºæœ¬å•ä½ åŒä¸€ä¸ªè¿›ç¨‹ä¸­çš„å¤šä¸ªçº¿ç¨‹çš„å†…å­˜èµ„æºæ˜¯å…±äº«çš„ï¼Œå„çº¿ç¨‹éƒ½å¯ä»¥æ”¹å˜è¿›ç¨‹ä¸­çš„å˜é‡ã€‚å› æ­¤åœ¨æ‰§è¡Œå¤šçº¿ç¨‹è¿ç®—çš„æ—¶å€™è¦æ³¨æ„æ‰§è¡Œé¡ºåº  äºŒã€å¹¶è¡Œä¸å¹¶å‘  å¹¶è¡Œï¼ˆparallellismï¼‰æŒ‡çš„æ˜¯å¤šä¸ªä»»åŠ¡åœ¨åŒä¸€æ—¶åˆ»åŒæ—¶åœ¨æ‰§è¡Œ å¹¶å‘ï¼ˆconcurrencyï¼‰æ˜¯æŒ‡åœ¨ä¸€ä¸ªæ—¶é—´æ®µå†…ï¼Œå¤šä¸ªä»»åŠ¡äº¤æ›¿è¿›è¡Œã€‚è™½ç„¶çœ‹èµ·æ¥åƒåœ¨åŒæ—¶æ‰§è¡Œï¼Œä½†å…¶å®æ˜¯äº¤æ›¿çš„  ä¸‰ã€å¤šä»»åŠ¡å¤„ç† å¤šçº¿ç¨‹æ˜¯å¤šä»»åŠ¡å¤„ç†çš„ä¸€ç§ç‰¹æ®Šå½¢å¼ï¼Œä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæœ‰åŸºäºè¿›ç¨‹å’ŒåŸºäºçº¿ç¨‹çš„ä¸¤ç§ç±»å‹çš„å¤šä»»åŠ¡å¤„ç†æ–¹å¼ã€‚\n åŸºäºè¿›ç¨‹çš„å¤šä»»åŠ¡å¤„ç†æ˜¯ç¨‹åºçš„å¹¶å‘æ‰§è¡Œ åŸºäºçº¿ç¨‹çš„å¤šä»»åŠ¡å¤„ç†æ˜¯åŒä¸€ç¨‹åºçš„ç‰‡æ®µçš„å¹¶å‘æ‰§è¡Œ  å››ã€C++11 çº¿ç¨‹ç®¡ç† thread åº“  C++11 æä¾›äº†å¤šçº¿ç¨‹åº“ï¼Œä½¿ç”¨æ—¶éœ€è¦ #include \u0026lt;thread\u0026gt; å¤´æ–‡ä»¶ï¼Œè¯¥å¤´æ–‡ä»¶ä¸»è¦åŒ…å«äº†å¯¹çº¿ç¨‹çš„ç®¡ç†ç±» std::thread ä»¥åŠå…¶ä»–ç®¡ç†çº¿ç¨‹ç›¸å…³çš„ç±» æ¯ä¸ªåº”ç”¨ç¨‹åºè‡³å°‘æœ‰ä¸€ä¸ªè¿›ç¨‹ï¼Œè€Œæ¯ä¸ªè¿›ç¨‹è‡³å°‘æœ‰ä¸€ä¸ªä¸»çº¿ç¨‹ï¼Œé™¤äº†ä¸»çº¿ç¨‹å¤–ï¼Œåœ¨ä¸€ä¸ªè¿›ç¨‹ä¸­è¿˜å¯ä»¥åˆ›å»ºå¤šä¸ªå­çº¿ç¨‹ã€‚æ¯ä¸ªçº¿ç¨‹éƒ½éœ€è¦ä¸€ä¸ªå…¥å£å‡½æ•°ï¼Œå…¥å£å‡½æ•°è¿”å›é€€å‡ºï¼Œè¯¥çº¿ç¨‹ä¹Ÿä¼šé€€å‡ºï¼Œä¸»çº¿ç¨‹å°±æ˜¯ä»¥ main å‡½æ•°ä½œä¸ºå…¥å£å‡½æ•°çš„çº¿ç¨‹ ä¸»çº¿ç¨‹é€€å‡ºåï¼Œè¿è¡Œä¸­çš„å­çº¿ç¨‹ä¹Ÿä¼šè¢«é”€æ¯ std::thread çš„æ„é€ å‡½æ•°éœ€è¦çš„æ˜¯å¯è°ƒç”¨ï¼ˆcallableï¼‰ç±»å‹ï¼Œé™¤äº†å‡½æ•°å¤–ï¼Œè¿˜å¯ä»¥è°ƒç”¨ lambda è¡¨è¾¾å¼ã€é‡è½½äº† () è¿ç®—ç¬¦çš„ç±»çš„å®ä¾‹ æŠŠå‡½æ•°å¯¹è±¡ä¼ å…¥ std::thread æ—¶ï¼Œåº”ä¼ å…¥å‡½æ•°åç§°ï¼ˆä¸å¸¦æ‹¬å·ï¼‰ å½“å¯åŠ¨ä¸€ä¸ªçº¿ç¨‹åï¼Œä¸€å®šè¦åœ¨è¯¥çº¿ç¨‹ thread é”€æ¯å‰ï¼Œè°ƒç”¨ join() æˆ–è€… detach()ï¼Œç¡®å®šä»¥ä½•ç§æ–¹å¼ç­‰å¾…çº¿ç¨‹æ‰§è¡Œç»“æŸ  detach æ–¹å¼ï¼Œå¯åŠ¨çš„çº¿ç¨‹è‡ªä¸»åœ¨åå°è¿è¡Œï¼Œå½“å‰çš„ä»£ç ç»§ç»­å¾€ä¸‹æ‰§è¡Œï¼Œä¸ç­‰å¾…æ–°çº¿ç¨‹ç»“æŸ join æ–¹å¼ï¼Œç­‰å¾…å…³è”çš„çº¿ç¨‹å®Œæˆï¼Œæ‰ä¼šç»§ç»­æ‰§è¡Œ join() åçš„ä»£ç  åœ¨ä»¥ detach çš„æ–¹å¼æ‰§è¡Œçº¿ç¨‹æ—¶ï¼Œè¦å°†çº¿ç¨‹è®¿é—®çš„å±€éƒ¨æ•°æ®å¤åˆ¶åˆ°çº¿ç¨‹çš„ç©ºé—´ï¼ˆä½¿ç”¨æŒ‰å€¼ä¼ é€’ï¼‰ï¼Œä¸€å®šè¦ç¡®ä¿çº¿ç¨‹æ²¡æœ‰ä½¿ç”¨å±€éƒ¨å˜é‡çš„å¼•ç”¨æˆ–è€…æŒ‡é’ˆï¼Œé™¤éä½ èƒ½è‚¯å®šè¯¥çº¿ç¨‹ä¼šåœ¨å±€éƒ¨ä½œç”¨åŸŸç»“æŸå‰æ‰§è¡Œç»“æŸ    1ã€è°ƒç”¨å…¨å±€å‡½æ•°å¯åŠ¨çº¿ç¨‹ #include \u0026lt;thread\u0026gt; using namespace std; void func(int i){ cout \u0026lt;\u0026lt; i \u0026lt;\u0026lt; endl; } int main() { for(int i = 0; i \u0026lt; 4; ++i){ // åˆ›å»ºä¸€ä¸ªçº¿ç¨‹tï¼Œç¬¬ä¸€ä¸ªå‚æ•°ä¸ºè°ƒç”¨çš„å‡½æ•°ï¼Œç¬¬äºŒä¸ªå‚æ•°ä¸ºä¼ é€’çš„å‚æ•°  thread t(func, i); // è¡¨ç¤ºå…è®¸è¯¥çº¿ç¨‹åœ¨åå°è¿è¡Œ  t.","title":"C++ å¤šçº¿ç¨‹"},{"content":"error: cannot bind non-const lvalue reference of type â€˜T\u0026amp;â€™ to an rvalue of type â€˜Tâ€™\nå¦‚æœä¸€ä¸ªå‚æ•°æ˜¯ä»¥é const å¼•ç”¨ä¼ å…¥ï¼Œc++ ç¼–è¯‘å™¨å°±æœ‰ç†ç”±è®¤ä¸ºç¨‹åºå‘˜ä¼šåœ¨å‡½æ•°ä¸­ä¿®æ”¹è¿™ä¸ªå€¼ï¼Œå¹¶ä¸”è¿™ä¸ªè¢«ä¿®æ”¹çš„å¼•ç”¨åœ¨å‡½æ•°è¿”å›åè¦å‘æŒ¥ä½œç”¨ã€‚\nä½†å¦‚æœä½  æŠŠä¸€ä¸ªä¸´æ—¶å˜é‡å½“ä½œé const å¼•ç”¨å‚æ•°ä¼ è¿›æ¥ï¼Œç”±äºä¸´æ—¶å˜é‡çš„ç‰¹æ®Šæ€§ï¼Œç¨‹åºå‘˜å¹¶ä¸èƒ½æ“ä½œä¸´æ—¶å˜é‡ï¼Œè€Œä¸”ä¸´æ—¶å˜é‡éšæ—¶å¯èƒ½è¢«é‡Šæ”¾æ‰ã€‚\næ‰€ä»¥ï¼Œä¿®æ”¹ä¸€ä¸ªä¸´æ—¶å˜é‡æ˜¯æ¯«æ— æ„ä¹‰çš„ã€‚æ®æ­¤ï¼Œc++ ç¼–è¯‘å™¨åŠ å…¥äº†ä¸´æ—¶å˜é‡ä¸èƒ½ä½œä¸ºé const å¼•ç”¨çš„è¿™ä¸ªè¯­ä¹‰é™åˆ¶ã€‚\nc++ ä¸­ä¸´æ—¶å˜é‡æ˜¯å³å€¼ç±»å‹ï¼Œä¸èƒ½ä½œä¸ºé const çš„å¼•ç”¨å‚æ•°\nstd::move() è¿”å›çš„ä¹Ÿæ˜¯ä¸€ä¸ªå³å€¼\nä¸€èˆ¬æ¥è¯´ï¼Œå³å€¼çš„åœ°å€ä¸èƒ½é€šè¿‡è§£å¼•ç”¨æ¥è·å¾—ï¼Œå› ä¸ºå®ƒä»¬æ˜¯å­—é¢é‡ï¼Œæˆ–è€…å› ä¸ºå®ƒä»¬æœ¬è´¨ä¸Šæ˜¯ä¸´æ—¶çš„(ä¾‹å¦‚ç”±å‡½æ•°æˆ–æ˜¾å¼æ„é€ å‡½æ•°è°ƒç”¨è¿”å›çš„å€¼)ã€‚é€šè¿‡å°†ä¸€ä¸ªå¯¹è±¡ä¼ é€’ç»™è¿™ä¸ªå‡½æ•°ï¼Œå¯ä»¥è·å¾—ä¸€ä¸ªå¼•ç”¨å®ƒçš„å³å€¼ã€‚\nclass T{ public: T(int v){ a = v; } T operator+(T \u0026amp;t){ T temp = this-\u0026gt;a + t.a; return temp; } void printT(T \u0026amp;t){ cout \u0026lt;\u0026lt; \u0026#34;a = \u0026#34; \u0026lt;\u0026lt; t.a \u0026lt;\u0026lt; endl; } private: int a; }; int main() { T t0(0), t1(1), t2(2); t0.printT(t1 + t2); // t1 + t2 è¿”å›ä¸´æ—¶å˜é‡ å³å€¼  return 0; } è¾“å‡ºï¼š\nmain.cpp:29:18: error: cannot bind non-const lvalue reference of type â€˜T\u0026amp;â€™ to an rvalue of type â€˜Tâ€™ 29 | t0.printT(t1 + t2); | ~~~^~~~ main.cpp:20:20: note: initializing argument 1 of â€˜void T::printT(T\u0026amp;)â€™ 20 | void printT(T \u0026amp;t){ | ~~~^ ","permalink":"https://874656645.github.io/rick/posts/60-%E4%B8%B4%E6%97%B6%E5%8F%98%E9%87%8F%E4%B8%8D%E8%83%BD%E4%BD%9C%E4%B8%BAno-const%E5%BC%95%E7%94%A8%E5%8F%82%E6%95%B0/","summary":"error: cannot bind non-const lvalue reference of type â€˜T\u0026amp;â€™ to an rvalue of type â€˜Tâ€™\nå¦‚æœä¸€ä¸ªå‚æ•°æ˜¯ä»¥é const å¼•ç”¨ä¼ å…¥ï¼Œc++ ç¼–è¯‘å™¨å°±æœ‰ç†ç”±è®¤ä¸ºç¨‹åºå‘˜ä¼šåœ¨å‡½æ•°ä¸­ä¿®æ”¹è¿™ä¸ªå€¼ï¼Œå¹¶ä¸”è¿™ä¸ªè¢«ä¿®æ”¹çš„å¼•ç”¨åœ¨å‡½æ•°è¿”å›åè¦å‘æŒ¥ä½œç”¨ã€‚\nä½†å¦‚æœä½  æŠŠä¸€ä¸ªä¸´æ—¶å˜é‡å½“ä½œé const å¼•ç”¨å‚æ•°ä¼ è¿›æ¥ï¼Œç”±äºä¸´æ—¶å˜é‡çš„ç‰¹æ®Šæ€§ï¼Œç¨‹åºå‘˜å¹¶ä¸èƒ½æ“ä½œä¸´æ—¶å˜é‡ï¼Œè€Œä¸”ä¸´æ—¶å˜é‡éšæ—¶å¯èƒ½è¢«é‡Šæ”¾æ‰ã€‚\næ‰€ä»¥ï¼Œä¿®æ”¹ä¸€ä¸ªä¸´æ—¶å˜é‡æ˜¯æ¯«æ— æ„ä¹‰çš„ã€‚æ®æ­¤ï¼Œc++ ç¼–è¯‘å™¨åŠ å…¥äº†ä¸´æ—¶å˜é‡ä¸èƒ½ä½œä¸ºé const å¼•ç”¨çš„è¿™ä¸ªè¯­ä¹‰é™åˆ¶ã€‚\nc++ ä¸­ä¸´æ—¶å˜é‡æ˜¯å³å€¼ç±»å‹ï¼Œä¸èƒ½ä½œä¸ºé const çš„å¼•ç”¨å‚æ•°\nstd::move() è¿”å›çš„ä¹Ÿæ˜¯ä¸€ä¸ªå³å€¼\nä¸€èˆ¬æ¥è¯´ï¼Œå³å€¼çš„åœ°å€ä¸èƒ½é€šè¿‡è§£å¼•ç”¨æ¥è·å¾—ï¼Œå› ä¸ºå®ƒä»¬æ˜¯å­—é¢é‡ï¼Œæˆ–è€…å› ä¸ºå®ƒä»¬æœ¬è´¨ä¸Šæ˜¯ä¸´æ—¶çš„(ä¾‹å¦‚ç”±å‡½æ•°æˆ–æ˜¾å¼æ„é€ å‡½æ•°è°ƒç”¨è¿”å›çš„å€¼)ã€‚é€šè¿‡å°†ä¸€ä¸ªå¯¹è±¡ä¼ é€’ç»™è¿™ä¸ªå‡½æ•°ï¼Œå¯ä»¥è·å¾—ä¸€ä¸ªå¼•ç”¨å®ƒçš„å³å€¼ã€‚\nclass T{ public: T(int v){ a = v; } T operator+(T \u0026amp;t){ T temp = this-\u0026gt;a + t.a; return temp; } void printT(T \u0026amp;t){ cout \u0026lt;\u0026lt; \u0026#34;a = \u0026#34; \u0026lt;\u0026lt; t.a \u0026lt;\u0026lt; endl; } private: int a; }; int main() { T t0(0), t1(1), t2(2); t0.","title":"ä¸´æ—¶å˜é‡ä¸èƒ½ç»‘å®š no-const å·¦å€¼å¼•ç”¨ç±»å‹"},{"content":"#include \u0026lt;iostream\u0026gt; using namespace std; class Complex{ // friend Complex complexAdd(Complex \u0026amp;c1, Complex \u0026amp;c2);  // friend Complex operator+(Complex \u0026amp;c1, Complex \u0026amp;c2);  // friend Complex\u0026amp; operator+= (Complex \u0026amp;c1, Complex \u0026amp;c2);  friend ostream\u0026amp; operator\u0026lt;\u0026lt;(ostream \u0026amp;os, Complex \u0026amp;c); friend istream\u0026amp; operator\u0026gt;\u0026gt;(istream \u0026amp;is, Complex \u0026amp;c); public: Complex(){ cout \u0026lt;\u0026lt; \u0026#34;Complex()...\u0026#34; \u0026lt;\u0026lt; endl; a = 0; b = 0; } Complex(int a, int b){ cout \u0026lt;\u0026lt; \u0026#34;Complex(int, int)...\u0026#34; \u0026lt;\u0026lt; endl; this-\u0026gt;a = a; this-\u0026gt;b = b; } ~Complex(){ cout \u0026lt;\u0026lt; \u0026#34;~Complex()...\u0026#34; \u0026lt;\u0026lt; endl; } void printComplex(){ cout \u0026lt;\u0026lt; \u0026#34;(\u0026#34; \u0026lt;\u0026lt; this-\u0026gt;a \u0026lt;\u0026lt; \u0026#34;, \u0026#34; \u0026lt;\u0026lt; this-\u0026gt;b \u0026lt;\u0026lt; \u0026#34;i)\u0026#34; \u0026lt;\u0026lt; endl; } // æ–¹å¼äºŒï¼šåœ¨ç±»å†…éƒ¨å®ç°ï¼ˆæ–¹å¼ä¸€å’ŒäºŒæ˜¯ä¸€æ ·çš„ï¼Œæ‰€ä»¥åªèƒ½ä¿ç•™ä¸€ç§ï¼‰  // c1 + c2 çš„å†™æ³•ä¼šåŒæ—¶åŒ¹é…è¿™ä¸¤ç§å®ç°æ–¹å¼ï¼Œå¦‚æœéƒ½æœ‰å®ç°å°±ä¼šäº§ç”ŸäºŒä¹‰æ€§  // ä¸èƒ½è¿”å›å¼•ç”¨ç±»å‹  // + æ“ä½œç¬¦é‡è½½  Complex operator+(Complex \u0026amp;c2){ Complex temp(this-\u0026gt;a + c2.a, this-\u0026gt;b + c2.b); return temp; } // += æ“ä½œç¬¦é‡è½½  Complex\u0026amp; operator+=(Complex \u0026amp;c2){ cout \u0026lt;\u0026lt; \u0026#34;operator+=()...\u0026#34; \u0026lt;\u0026lt; endl; this-\u0026gt;a += c2.a; this-\u0026gt;b += c2.b; return *this; } // å•ç›®è¿ç®—ç¬¦ å‰++ï¼Œå› ä¸ºå¯ä»¥è¿›è¡Œè¿ç»­å‰++æ“ä½œï¼Œæ‰€ä»¥è¿”å›å¼•ç”¨ç±»å‹  Complex\u0026amp; operator++(){ this-\u0026gt;a++; this-\u0026gt;b++; return *this; } // å•ç›®è¿ç®—ç¬¦ å++ï¼Œä¸èƒ½è¿›è¡Œè¿ç»­ å++ æ“ä½œï¼Œè¿”å›ç±»å‹åŠ const  // ä¸ºäº†ä¸ å‰++ è¿›è¡ŒåŒºåˆ†ï¼Œä½¿ç”¨äºšå…ƒå½¢å‚  const Complex operator++(int){ Complex temp(this-\u0026gt;a, this-\u0026gt;b); this-\u0026gt;a++; this-\u0026gt;b++; return temp; } // = æ“ä½œç¬¦é‡è½½  Complex\u0026amp; operator=(Complex \u0026amp;c){ // 1ã€æ˜¯å¦ä¸è‡ªèº«ç›¸åŒ  if(this == \u0026amp;c) return *this; // 2ã€å¦‚æœè‡ªèº«æœ‰å¼€è¾Ÿå†…å­˜ï¼Œå°±æ¸…ç†è‡ªå·±çš„åƒåœ¾  // 3ã€æ·±æ‹·è´  this-\u0026gt;a = c.a; this-\u0026gt;b = c.b; return *this; } // [] æ“ä½œç¬¦é‡è½½  int\u0026amp; operator[](int index){ if(index == 1){ return this-\u0026gt;a; } if(index == 2){ return this-\u0026gt;b; } throw \u0026#34;error index\u0026#34;; } // == æ“ä½œç¬¦é‡è½½  bool operator==(Complex \u0026amp;c){ return (this-\u0026gt;a == c.a \u0026amp;\u0026amp; this-\u0026gt;b == c.b); } // != æ“ä½œç¬¦é‡è½½  bool operator!=(Complex \u0026amp;c){ return !(*this == c); } // () æ“ä½œç¬¦é‡è½½ï¼Œä»¿å‡½æ•°  bool operator()(){ return (this-\u0026gt;a != 0 \u0026amp;\u0026amp; this-\u0026gt;b != 0); } // new æ“ä½œç¬¦é‡è½½ï¼Œä¼šä¼ å…¥æ‰€åˆ›å¯¹è±¡çš„å¤§å°ï¼ˆsizeof(Complex)ï¼‰  // è¿”å›çš„æ˜¯ void* çš„æŒ‡é’ˆ  // p-\u0026gt;operator new(sizeof(Complex))  void* operator new(size_t n){ void* p = malloc(n); cout \u0026lt;\u0026lt; \u0026#34;é‡è½½äº† new... ç©ºé—´å¤§å°æ˜¯ï¼š\u0026#34; \u0026lt;\u0026lt; n \u0026lt;\u0026lt; \u0026#34;\\tæŒ‡é’ˆåœ°å€æ˜¯ï¼š\u0026#34; \u0026lt;\u0026lt; p \u0026lt;\u0026lt; endl; return p; } // new[] æ“ä½œç¬¦é‡è½½ï¼Œè¿™ä¸ª n å¤šäº†ä¸€ä¸ªæŒ‡é’ˆçš„å¤§å°ï¼Œä¸çŸ¥é“ä¸ºä»€ä¹ˆï¼Ÿ  void* operator new[](size_t n){ void* p = malloc(n); cout \u0026lt;\u0026lt; \u0026#34;é‡è½½äº† new[]... ç©ºé—´å¤§å°æ˜¯ï¼š\u0026#34; \u0026lt;\u0026lt; n \u0026lt;\u0026lt; \u0026#34;\\tæŒ‡é’ˆåœ°å€æ˜¯ï¼š\u0026#34; \u0026lt;\u0026lt; p \u0026lt;\u0026lt; endl; return p; } // delete æ“ä½œç¬¦é‡è½½ï¼Œä¼šä¼ å…¥æ‰€è¦åˆ é™¤çš„æŒ‡é’ˆï¼Œç±»å‹æ˜¯ void*  void operator delete(void *p){ cout \u0026lt;\u0026lt; \u0026#34;é‡è½½äº† delete... æŒ‡é’ˆåœ°å€æ˜¯ï¼š\u0026#34; \u0026lt;\u0026lt; p \u0026lt;\u0026lt; endl; if(p != NULL){ free(p); p = NULL; } } // delete[] æ“ä½œç¬¦é‡è½½ï¼Œä¼šä¼ å…¥æ‰€è¦åˆ é™¤çš„æŒ‡é’ˆï¼Œç±»å‹æ˜¯ void*  void operator delete(void *p){ cout \u0026lt;\u0026lt; \u0026#34;é‡è½½äº† delete[]... æŒ‡é’ˆåœ°å€æ˜¯ï¼š\u0026#34; \u0026lt;\u0026lt; p \u0026lt;\u0026lt; endl; if(p != NULL){ free(p); p = NULL; } } // \u0026amp;\u0026amp; æ“ä½œç¬¦é‡è½½ï¼ˆä¸å»ºè®®é‡è½½ï¼Œå› ä¸ºä¸ä¼šå‘ç”ŸçŸ­è·¯ç°è±¡ï¼‰  bool operator\u0026amp;\u0026amp;(Complex \u0026amp;c){ return ((*this)()) \u0026amp;\u0026amp; c(); } // || æ“ä½œç¬¦é‡è½½ï¼ˆä¸å»ºè®®é‡è½½ï¼Œå› ä¸ºä¸ä¼šå‘ç”ŸçŸ­è·¯ç°è±¡ï¼‰  bool operator||(Complex \u0026amp;c){ return (*this)() || c(); } private: int a; // å®éƒ¨  int b; // è™šéƒ¨ }; #if 0Complex complexAdd(Complex \u0026amp;c1, Complex \u0026amp;c2){ Complex temp(c1.a + c2.a, c1.b + c2.b); return temp; } // æ–¹å¼ä¸€ï¼šç”¨å…¨å±€å‡½æ•°é‡è½½(å‹å…ƒé‡è½½) Complex operator+(Complex \u0026amp;c1, Complex \u0026amp;c2){ Complex temp(c1.a + c2.a, c1.b + c2.b); return temp; } Complex\u0026amp; operator+= (Complex \u0026amp;c1, Complex \u0026amp;c2){ c1.a += c2.a; c1.b += c2.b; return c1; } #endif // å·¦ç§» // åªèƒ½ç”¨å…¨å±€å‡½æ•°å®ç°é‡è½½ï¼Œå¦‚æœåœ¨ç±»å†…éƒ¨å®ç°ï¼Œè°ƒç”¨å½¢å¼å°±æˆäº† c.operator\u0026lt;\u0026lt;(cout) // å› ä¸ºå¯ä»¥è¿ç»­è°ƒç”¨ï¼Œæ‰€ä»¥è¿”å› ostream å¯¹è±¡å¼•ç”¨ ostream\u0026amp; operator\u0026lt;\u0026lt;(ostream \u0026amp;os, Complex \u0026amp;c){ os \u0026lt;\u0026lt; \u0026#34;(\u0026#34; \u0026lt;\u0026lt; c.a \u0026lt;\u0026lt; \u0026#34;, \u0026#34; \u0026lt;\u0026lt; c.b \u0026lt;\u0026lt; \u0026#34;i)\u0026#34; \u0026lt;\u0026lt; endl; return os; } // å³ç§»åŒç† istream\u0026amp; operator\u0026gt;\u0026gt;(istream \u0026amp;is, Complex \u0026amp;c){ cout \u0026lt;\u0026lt; \u0026#34;a: \u0026#34;; is \u0026gt;\u0026gt; c.a; cout \u0026lt;\u0026lt; \u0026#34;b: \u0026#34;; is \u0026gt;\u0026gt; c.b; return is; } int main( ) { Complex c1(1, 2), c2(3, 4); c1.printComplex(); c2.printComplex(); // Complex c3 = complexAdd(c1, c2);  Complex c3 = c1 + c2 + c1; // æ–¹å¼ä¸€ç­‰åŒäº operator+(c1, c2);  // æ–¹å¼äºŒç­‰åŒäº c1.operator+(c2);  c3.printComplex(); cin \u0026gt;\u0026gt; c1; // operator\u0026gt;\u0026gt;(cin, c1)  cout \u0026lt;\u0026lt; c1 \u0026lt;\u0026lt; endl; // operator\u0026lt;\u0026lt;(cout, c1)  cout \u0026lt;\u0026lt; c1[1] \u0026lt;\u0026lt; endl; c1[1] = 5; cout \u0026lt;\u0026lt; c1; try{ c1[0] = 0; } catch(char const *e){ cout \u0026lt;\u0026lt; e \u0026lt;\u0026lt; endl; } if(c1()){ cout \u0026lt;\u0026lt; \u0026#34;c1 is valid\u0026#34; \u0026lt;\u0026lt; endl; } else{ cout \u0026lt;\u0026lt; \u0026#34;c1 is not valid\u0026#34; \u0026lt;\u0026lt; endl; } // æµ‹è¯•æ•°ç»„  cout \u0026lt;\u0026lt; \u0026#34;é™æ€æ•°ç»„å¤§å°æ˜¯ï¼š\u0026#34; \u0026lt;\u0026lt; sizeof(Complex[2]) \u0026lt;\u0026lt; endl; Complex *cArray = new Complex[2]; // è¿™é‡Œçš„åœ°å€æ¯” delete[] çš„åœ°å€é«˜äº†ä¸€ä¸ªå­—èŠ‚ï¼Œä¸çŸ¥é“ä¸ºä»€ä¹ˆï¼Ÿ  cout \u0026lt;\u0026lt; \u0026#34;é¦–åœ°å€æ˜¯ï¼š\u0026#34; \u0026lt;\u0026lt; (cArray - sizeof(char)) \u0026lt;\u0026lt; endl; delete[] cArray; // æµ‹è¯• \u0026amp;\u0026amp; || æ˜¯å¦å‘ç”ŸçŸ­è·¯  c1[1] = c1[2] = 0; if(c1 \u0026amp;\u0026amp; (c1 += c2)){ // c1.operator\u0026amp;\u0026amp;(c1 += c2)  cout \u0026lt;\u0026lt; \u0026#34;çœŸ\u0026#34; \u0026lt;\u0026lt; endl; } else{ cout \u0026lt;\u0026lt; \u0026#34;å‡\u0026#34; \u0026lt;\u0026lt; endl; } cout \u0026lt;\u0026lt; \u0026#34;============\u0026#34; \u0026lt;\u0026lt; endl; c1[1] = -3; c2[2] = -4; if(c1 || (c1 += c2)){ // c1.operator||(c1 += c2)  cout \u0026lt;\u0026lt; \u0026#34;çœŸ\u0026#34; \u0026lt;\u0026lt; endl; } else{ cout \u0026lt;\u0026lt; \u0026#34;å‡\u0026#34; \u0026lt;\u0026lt; endl; } return 0; } è¾“å‡ºï¼š\n(1, 2i) (3, 4i) (5, 8i) a: 10 b: 20 (10, 20i) 1 (5, 2i) error index c1 is valid é‡è½½äº† new... ç©ºé—´å¤§å°æ˜¯ï¼š8 Complex(int, int)... å¯¹è±¡ c1 çš„åœ°å€æ˜¯ï¼š0x5641c235a2c0 ~Complex()... é‡è½½äº† delete... æŒ‡é’ˆåœ°å€æ˜¯ï¼š0x5641c235a2c0 é™æ€æ•°ç»„å¤§å°æ˜¯ï¼š16 é‡è½½äº† new[]... ç©ºé—´å¤§å°æ˜¯ï¼š24 æŒ‡é’ˆåœ°å€æ˜¯ï¼š0x5640c52efeb0 Complex()... Complex()... é¦–åœ°å€æ˜¯ï¼š0x5640c52efeb8 ~Complex()... ~Complex()... é‡è½½äº† delete[]... æŒ‡é’ˆåœ°å€æ˜¯ï¼š0x5640c52efeb0 operator+=()... çœŸ ============ operator+=()... å‡ ","permalink":"https://874656645.github.io/rick/posts/59-%E6%93%8D%E4%BD%9C%E7%AC%A6%E9%87%8D%E8%BD%BD/","summary":"#include \u0026lt;iostream\u0026gt; using namespace std; class Complex{ // friend Complex complexAdd(Complex \u0026amp;c1, Complex \u0026amp;c2);  // friend Complex operator+(Complex \u0026amp;c1, Complex \u0026amp;c2);  // friend Complex\u0026amp; operator+= (Complex \u0026amp;c1, Complex \u0026amp;c2);  friend ostream\u0026amp; operator\u0026lt;\u0026lt;(ostream \u0026amp;os, Complex \u0026amp;c); friend istream\u0026amp; operator\u0026gt;\u0026gt;(istream \u0026amp;is, Complex \u0026amp;c); public: Complex(){ cout \u0026lt;\u0026lt; \u0026#34;Complex()...\u0026#34; \u0026lt;\u0026lt; endl; a = 0; b = 0; } Complex(int a, int b){ cout \u0026lt;\u0026lt; \u0026#34;Complex(int, int)...\u0026#34; \u0026lt;\u0026lt; endl; this-\u0026gt;a = a; this-\u0026gt;b = b; } ~Complex(){ cout \u0026lt;\u0026lt; \u0026#34;~Complex().","title":"æ“ä½œç¬¦é‡è½½"},{"content":"ä¹°å–è´§ç‰©é—®é¢˜ï¼š\n#include \u0026lt;iostream\u0026gt; using namespace std; class Goods{ public: Goods(){ m_pNext = nullptr; m_weight = 0; cout \u0026lt;\u0026lt; \u0026#34;ä¹°å…¥äº†è´§ç‰©ï¼Œé‡é‡æ˜¯ï¼š\u0026#34; \u0026lt;\u0026lt; m_weight \u0026lt;\u0026lt; endl; } Goods(int weight){ m_pNext = nullptr; m_weight = weight; total_weight += m_weight; cout \u0026lt;\u0026lt; \u0026#34;ä¹°å…¥äº†è´§ç‰©ï¼Œé‡é‡æ˜¯ï¼š\u0026#34; \u0026lt;\u0026lt; m_weight \u0026lt;\u0026lt; endl; } ~Goods(){ total_weight -= m_weight; // m_pNext ä¸æ˜¯åœ¨æœ¬ç±»ä¸­ new çš„ï¼Œæ‰€ä»¥ä¹Ÿä¸ç”¨ delete  this-\u0026gt;m_pNext = nullptr; cout \u0026lt;\u0026lt; \u0026#34;å–å‡ºäº†è´§ç‰©ï¼Œé‡é‡æ˜¯ï¼š\u0026#34; \u0026lt;\u0026lt; m_weight \u0026lt;\u0026lt; endl; } static int getTotalWeight(){ return total_weight; } Goods *m_pNext; private: int m_weight; static int total_weight; }; int Goods::total_weight = 0; void buy(Goods *\u0026amp;head, int weight){ Goods *pNewGoods = new Goods(weight); if(head == nullptr){ head = pNewGoods; } else{ pNewGoods-\u0026gt;m_pNext = head; head = pNewGoods; } } void sale(Goods *\u0026amp;head){ if(head == nullptr){ cout \u0026lt;\u0026lt; \u0026#34;æ²¡æœ‰è´§ç‰©äº†\u0026#34; \u0026lt;\u0026lt; endl; return; } Goods *temp = head; head = head-\u0026gt;m_pNext; delete temp; temp = nullptr; } int main( ) { Goods *head = nullptr; int choice; do{ // æä¾›èœå•  cout \u0026lt;\u0026lt; \u0026#34;è¾“å…¥ 1 è¿›è´§\u0026#34; \u0026lt;\u0026lt; endl; cout \u0026lt;\u0026lt; \u0026#34;è¾“å…¥ 2 å‡ºè´§\u0026#34; \u0026lt;\u0026lt; endl; cout \u0026lt;\u0026lt; \u0026#34;è¾“å…¥ 0 é€€å‡º\u0026#34; \u0026lt;\u0026lt; endl; cin \u0026gt;\u0026gt; choice; switch(choice){ case 0: // é€€å‡º  return 0; case 1: { // è¿›è´§  int w = 0; cout \u0026lt;\u0026lt; \u0026#34;è¾“å…¥è´§ç‰©é‡é‡ï¼š\u0026#34; \u0026lt;\u0026lt; endl; cin \u0026gt;\u0026gt; w; buy(head, w); break; } case 2: // å‡ºè´§  sale(head); break; } cout \u0026lt;\u0026lt; \u0026#34;ç›®å‰è´§ç‰©çš„æ€»é‡é‡æ˜¯ï¼š\u0026#34; \u0026lt;\u0026lt; Goods::getTotalWeight() \u0026lt;\u0026lt; endl; }while(1); return 0; } è¾“å‡ºï¼š\nè¾“å…¥ 1 è¿›è´§ è¾“å…¥ 2 å‡ºè´§ è¾“å…¥ 0 é€€å‡º 1 è¾“å…¥è´§ç‰©é‡é‡ï¼š 10 ä¹°å…¥äº†è´§ç‰©ï¼Œé‡é‡æ˜¯ï¼š10 ç›®å‰è´§ç‰©çš„æ€»é‡é‡æ˜¯ï¼š10 è¾“å…¥ 1 è¿›è´§ è¾“å…¥ 2 å‡ºè´§ è¾“å…¥ 0 é€€å‡º 1 è¾“å…¥è´§ç‰©é‡é‡ï¼š 20 ä¹°å…¥äº†è´§ç‰©ï¼Œé‡é‡æ˜¯ï¼š20 ç›®å‰è´§ç‰©çš„æ€»é‡é‡æ˜¯ï¼š30 è¾“å…¥ 1 è¿›è´§ è¾“å…¥ 2 å‡ºè´§ è¾“å…¥ 0 é€€å‡º 1 è¾“å…¥è´§ç‰©é‡é‡ï¼š 30 ä¹°å…¥äº†è´§ç‰©ï¼Œé‡é‡æ˜¯ï¼š30 ç›®å‰è´§ç‰©çš„æ€»é‡é‡æ˜¯ï¼š60 è¾“å…¥ 1 è¿›è´§ è¾“å…¥ 2 å‡ºè´§ è¾“å…¥ 0 é€€å‡º 2 å–å‡ºäº†è´§ç‰©ï¼Œé‡é‡æ˜¯ï¼š30 ç›®å‰è´§ç‰©çš„æ€»é‡é‡æ˜¯ï¼š30 è¾“å…¥ 1 è¿›è´§ è¾“å…¥ 2 å‡ºè´§ è¾“å…¥ 0 é€€å‡º 2 å–å‡ºäº†è´§ç‰©ï¼Œé‡é‡æ˜¯ï¼š20 ç›®å‰è´§ç‰©çš„æ€»é‡é‡æ˜¯ï¼š10 è¾“å…¥ 1 è¿›è´§ è¾“å…¥ 2 å‡ºè´§ è¾“å…¥ 0 é€€å‡º 2 å–å‡ºäº†è´§ç‰©ï¼Œé‡é‡æ˜¯ï¼š10 ç›®å‰è´§ç‰©çš„æ€»é‡é‡æ˜¯ï¼š0 è¾“å…¥ 1 è¿›è´§ è¾“å…¥ 2 å‡ºè´§ è¾“å…¥ 0 é€€å‡º 2 æ²¡æœ‰è´§ç‰©äº† ç›®å‰è´§ç‰©çš„æ€»é‡é‡æ˜¯ï¼š0 è¾“å…¥ 1 è¿›è´§ è¾“å…¥ 2 å‡ºè´§ è¾“å…¥ 0 é€€å‡º 0 ","permalink":"https://874656645.github.io/rick/posts/58-%E5%85%B7%E6%9C%89%E9%93%BE%E8%A1%A8%E7%89%B9%E6%80%A7%E7%9A%84%E7%B1%BB/","summary":"ä¹°å–è´§ç‰©é—®é¢˜ï¼š\n#include \u0026lt;iostream\u0026gt; using namespace std; class Goods{ public: Goods(){ m_pNext = nullptr; m_weight = 0; cout \u0026lt;\u0026lt; \u0026#34;ä¹°å…¥äº†è´§ç‰©ï¼Œé‡é‡æ˜¯ï¼š\u0026#34; \u0026lt;\u0026lt; m_weight \u0026lt;\u0026lt; endl; } Goods(int weight){ m_pNext = nullptr; m_weight = weight; total_weight += m_weight; cout \u0026lt;\u0026lt; \u0026#34;ä¹°å…¥äº†è´§ç‰©ï¼Œé‡é‡æ˜¯ï¼š\u0026#34; \u0026lt;\u0026lt; m_weight \u0026lt;\u0026lt; endl; } ~Goods(){ total_weight -= m_weight; // m_pNext ä¸æ˜¯åœ¨æœ¬ç±»ä¸­ new çš„ï¼Œæ‰€ä»¥ä¹Ÿä¸ç”¨ delete  this-\u0026gt;m_pNext = nullptr; cout \u0026lt;\u0026lt; \u0026#34;å–å‡ºäº†è´§ç‰©ï¼Œé‡é‡æ˜¯ï¼š\u0026#34; \u0026lt;\u0026lt; m_weight \u0026lt;\u0026lt; endl; } static int getTotalWeight(){ return total_weight; } Goods *m_pNext; private: int m_weight; static int total_weight; }; int Goods::total_weight = 0; void buy(Goods *\u0026amp;head, int weight){ Goods *pNewGoods = new Goods(weight); if(head == nullptr){ head = pNewGoods; } else{ pNewGoods-\u0026gt;m_pNext = head; head = pNewGoods; } } void sale(Goods *\u0026amp;head){ if(head == nullptr){ cout \u0026lt;\u0026lt; \u0026#34;æ²¡æœ‰è´§ç‰©äº†\u0026#34; \u0026lt;\u0026lt; endl; return; } Goods *temp = head; head = head-\u0026gt;m_pNext; delete temp; temp = nullptr; } int main( ) { Goods *head = nullptr; int choice; do{ // æä¾›èœå•  cout \u0026lt;\u0026lt; \u0026#34;è¾“å…¥ 1 è¿›è´§\u0026#34; \u0026lt;\u0026lt; endl; cout \u0026lt;\u0026lt; \u0026#34;è¾“å…¥ 2 å‡ºè´§\u0026#34; \u0026lt;\u0026lt; endl; cout \u0026lt;\u0026lt; \u0026#34;è¾“å…¥ 0 é€€å‡º\u0026#34; \u0026lt;\u0026lt; endl; cin \u0026gt;\u0026gt; choice; switch(choice){ case 0: // é€€å‡º  return 0; case 1: { // è¿›è´§  int w = 0; cout \u0026lt;\u0026lt; \u0026#34;è¾“å…¥è´§ç‰©é‡é‡ï¼š\u0026#34; \u0026lt;\u0026lt; endl; cin \u0026gt;\u0026gt; w; buy(head, w); break; } case 2: // å‡ºè´§  sale(head); break; } cout \u0026lt;\u0026lt; \u0026#34;ç›®å‰è´§ç‰©çš„æ€»é‡é‡æ˜¯ï¼š\u0026#34; \u0026lt;\u0026lt; Goods::getTotalWeight() \u0026lt;\u0026lt; endl; }while(1); return 0; } è¾“å‡ºï¼š","title":"å…·æœ‰é“¾è¡¨ç‰¹æ€§çš„ç±»"},{"content":"ä¸€ã€tryã€catchã€throw å¯ä»¥ä½¿ç”¨ throw è¯­å¥åœ¨ä»£ç å—ä¸­çš„ä»»ä½•åœ°æ–¹æŠ›å‡ºå¼‚å¸¸ã€‚throw è¯­å¥çš„æ“ä½œæ•°å¯ä»¥æ˜¯ä»»æ„çš„è¡¨è¾¾å¼ï¼Œè¡¨è¾¾å¼çš„ç»“æœçš„ç±»å‹å†³å®šäº†æŠ›å‡ºçš„å¼‚å¸¸çš„ç±»å‹\nint main( ) { try{ throw \u0026#34;exception\u0026#34;; }catch(const char * e){ cout \u0026lt;\u0026lt; e \u0026lt;\u0026lt; endl; }catch(...){ // æ•è·æ‰€æœ‰å¼‚å¸¸  cout \u0026lt;\u0026lt; \u0026#34;...\u0026#34; \u0026lt;\u0026lt; endl; } { cout \u0026lt;\u0026lt; \u0026#34;finally\u0026#34; \u0026lt;\u0026lt; endl; } return 0; } è¾“å‡ºï¼š\nStart exception finally 0 Finish äºŒã€std::exception class exception { public: exception() throw(); exception(const exception\u0026amp; rhs) throw(); exception\u0026amp; operator=(const exception\u0026amp; rhs) throw(); virtual ~exception() throw(); virtual const char *what() const throw(); }; æ´¾ç”Ÿäº†ä¸¤ä¸ªå¼‚å¸¸ç±»ï¼š\n   ç±»å æè¿°     logic_erro æŠ¥å‘Šç¨‹åºçš„é€»è¾‘é”™è¯¯ï¼Œå¯åœ¨ç¨‹åºæ‰§è¡Œå‰è¢«æ£€æµ‹åˆ°   runtime_erro æŠ¥å‘Šç¨‹åºè¿è¡Œæ—¶çš„é”™è¯¯ï¼Œåªæœ‰åœ¨è¿è¡Œçš„æ—¶å€™æ‰èƒ½æ£€æµ‹åˆ°    ç”±logic_erroæ´¾ç”Ÿçš„å¼‚å¸¸ç±»ï¼š\n   ç±»å æè¿°     domain_error æŠ¥å‘Šè¿åäº†å‰ç½®æ¡ä»¶   invalid_argument æŒ‡å‡ºå‡½æ•°çš„ä¸€ä¸ªæ— æ•ˆå‚æ•°   length_error æŒ‡å‡ºæœ‰ä¸€ä¸ªäº§ç”Ÿè¶…è¿‡NPOSé•¿åº¦çš„å¯¹è±¡çš„ä¼å›¾ï¼ˆNPOSä¸ºsize_tçš„æœ€å¤§å¯è¡¨ç°å€¼   out_of_range æŠ¥å‘Šå‚æ•°è¶Šç•Œ   bad_cast åœ¨è¿è¡Œæ—¶ç±»å‹è¯†åˆ«ä¸­æœ‰ä¸€ä¸ªæ— æ•ˆçš„dynamic_castè¡¨è¾¾å¼   bad_typeid æŠ¥å‘Šåœ¨è¡¨è¾¾å¼typeid(*p)ä¸­æœ‰ä¸€ä¸ªç©ºæŒ‡é’ˆP    ç”±runtime_erroræ´¾ç”Ÿçš„å¼‚å¸¸ï¼š\n   ç±»å æè¿°     range_error æŠ¥å‘Šè¿åäº†åç½®æ¡ä»¶   overflow_error æŠ¥å‘Šä¸€ä¸ªç®—æœ¯æº¢å‡º   bad_alloc æŠ¥å‘Šä¸€ä¸ªå­˜å‚¨åˆ†é…é”™è¯¯    ä¸‰ã€è‡ªå®šä¹‰å¼‚å¸¸ å¯ä»¥é€šè¿‡ç»§æ‰¿å’Œé‡è½½ exception ç±»æ¥å®šä¹‰æ–°çš„å¼‚å¸¸\nstruct MyException : public exception { const char * what () const throw () // è¡¨æ˜æ²¡æœ‰ä»»ä½•å¼‚å¸¸æŠ›å‡º  { return \u0026#34;C++ Exception\u0026#34;; } }; int main() { try { throw MyException(); } catch(MyException\u0026amp; e) { cout \u0026lt;\u0026lt; \u0026#34;MyException caught\u0026#34; \u0026lt;\u0026lt; endl; cout \u0026lt;\u0026lt; e.what() \u0026lt;\u0026lt; endl; } catch(std::exception\u0026amp; e) { //å…¶ä»–çš„é”™è¯¯  } catch(...) { cout \u0026lt;\u0026lt; \u0026#34;...\u0026#34; \u0026lt;\u0026lt; endl; } { cout \u0026lt;\u0026lt; \u0026#34;finally\u0026#34; \u0026lt;\u0026lt; endl; } return 0; } Start MyException caught C++ Exception finally 0 Finish ","permalink":"https://874656645.github.io/rick/posts/57-%E5%BC%82%E5%B8%B8/","summary":"ä¸€ã€tryã€catchã€throw å¯ä»¥ä½¿ç”¨ throw è¯­å¥åœ¨ä»£ç å—ä¸­çš„ä»»ä½•åœ°æ–¹æŠ›å‡ºå¼‚å¸¸ã€‚throw è¯­å¥çš„æ“ä½œæ•°å¯ä»¥æ˜¯ä»»æ„çš„è¡¨è¾¾å¼ï¼Œè¡¨è¾¾å¼çš„ç»“æœçš„ç±»å‹å†³å®šäº†æŠ›å‡ºçš„å¼‚å¸¸çš„ç±»å‹\nint main( ) { try{ throw \u0026#34;exception\u0026#34;; }catch(const char * e){ cout \u0026lt;\u0026lt; e \u0026lt;\u0026lt; endl; }catch(...){ // æ•è·æ‰€æœ‰å¼‚å¸¸  cout \u0026lt;\u0026lt; \u0026#34;...\u0026#34; \u0026lt;\u0026lt; endl; } { cout \u0026lt;\u0026lt; \u0026#34;finally\u0026#34; \u0026lt;\u0026lt; endl; } return 0; } è¾“å‡ºï¼š\nStart exception finally 0 Finish äºŒã€std::exception class exception { public: exception() throw(); exception(const exception\u0026amp; rhs) throw(); exception\u0026amp; operator=(const exception\u0026amp; rhs) throw(); virtual ~exception() throw(); virtual const char *what() const throw(); }; æ´¾ç”Ÿäº†ä¸¤ä¸ªå¼‚å¸¸ç±»ï¼š","title":"å¼‚å¸¸"},{"content":"1ã€å…­å¤§ç»„ä»¶ä»‹ç»  å®¹å™¨ï¼šæ•°æ®ç»“æ„ï¼Œç”¨æ¥å­˜æ”¾æ•°æ® ç®—æ³•ï¼šå¸¸ç”¨ç®—æ³• è¿­ä»£å™¨ï¼šå®¹å™¨å’Œç®—æ³•ä¹‹é—´çš„èƒ¶åˆå‰‚ï¼Œâ€œèŒƒå‹æŒ‡é’ˆâ€ ä»¿å‡½æ•°ï¼šä¸€ç§é‡è½½äº†operator()çš„ç±»ï¼Œä½¿å¾—è¿™ä¸ªç±»çš„ä½¿ç”¨çœ‹ä¸Šå»åƒä¸€ä¸ªå‡½æ•° é…ç½®å™¨ï¼šä¸ºå®¹å™¨åˆ†é…å¹¶ç®¡ç†å†…å­˜ é€‚é…å™¨ï¼šä¿®æ”¹å…¶ä»–ç»„ä»¶æ¥å£  2ã€STL å¸¸ç”¨çš„å®¹å™¨æœ‰å“ªäº›ä»¥åŠå„è‡ªçš„ç‰¹ç‚¹æ˜¯ä»€ä¹ˆ?    åç§° ç‰¹ç‚¹     vector åº•å±‚æ•°æ®ç»“æ„ä¸ºæ•°ç»„ï¼Œæ”¯æŒå¿«é€Ÿéšæœºè®¿é—®   list åº•å±‚æ•°æ®ç»“æ„ä¸ºåŒå‘é“¾è¡¨ï¼Œæ”¯æŒå¿«é€Ÿå¢åˆ    deque åº•å±‚æ•°æ®ç»“æ„ä¸ºä¸€ä¸ªä¸­å¤®æ§åˆ¶å™¨å’Œå¤šä¸ªç¼“å†²åŒºï¼Œæ”¯æŒé¦–å°¾ï¼ˆä¸­é—´ä¸èƒ½ï¼‰å¿«é€Ÿå¢åˆ ï¼Œä¹Ÿæ”¯æŒéšæœºè®¿é—®   stack åº•å±‚ä¸€èˆ¬ç”¨deque/listå®ç°ï¼Œå°é—­å¤´éƒ¨å³å¯ï¼Œä¸ç”¨vectorçš„åŸå› åº”è¯¥æ˜¯å®¹é‡å¤§å°æœ‰é™åˆ¶ï¼Œæ‰©å®¹è€—æ—¶   queue åº•å±‚ä¸€èˆ¬ç”¨deque/listå®ç°ï¼Œå°é—­å¤´éƒ¨å³å¯ï¼Œä¸ç”¨vectorçš„åŸå› åº”è¯¥æ˜¯å®¹é‡å¤§å°æœ‰é™åˆ¶ï¼Œæ‰©å®¹è€—æ—¶   priority_queue åº•å±‚æ•°æ®ç»“æ„ä¸€èˆ¬ä¸ºvectorä¸ºåº•å±‚å®¹å™¨ï¼Œå †heapä¸ºå¤„ç†è§„åˆ™æ¥ç®¡ç†åº•å±‚å®¹å™¨å®ç°   set åº•å±‚æ•°æ®ç»“æ„ä¸ºçº¢é»‘æ ‘ï¼Œæœ‰åºï¼Œä¸é‡å¤   multiset åº•å±‚æ•°æ®ç»“æ„ä¸ºçº¢é»‘æ ‘ï¼Œæœ‰åºï¼Œå¯é‡å¤   map åº•å±‚æ•°æ®ç»“æ„ä¸ºçº¢é»‘æ ‘ï¼Œæœ‰åºï¼Œä¸é‡å¤   multimap åº•å±‚æ•°æ®ç»“æ„ä¸ºçº¢é»‘æ ‘ï¼Œæœ‰åºï¼Œå¯é‡å¤   unordered_set åº•å±‚æ•°æ®ç»“æ„ä¸ºhashè¡¨ï¼Œæ— åºï¼Œä¸é‡å¤   unordered_multiset åº•å±‚æ•°æ®ç»“æ„ä¸ºhashè¡¨ï¼Œæ— åºï¼Œå¯é‡å¤   unordered_map åº•å±‚æ•°æ®ç»“æ„ä¸ºhashè¡¨ï¼Œæ— åºï¼Œä¸é‡å¤   unordered_multimap åº•å±‚æ•°æ®ç»“æ„ä¸ºhashè¡¨ï¼Œæ— åºï¼Œå¯é‡å¤    3ã€vector å’Œ list çš„åŒºåˆ«  vectoråº•å±‚å®ç°æ˜¯æ•°ç»„ï¼Œæ‰€ä»¥åœ¨å†…å­˜ä¸­æ˜¯è¿ç»­å­˜æ”¾çš„ï¼Œéšæœºè¯»å–æ•ˆç‡é«˜ï¼Œä½†æ’å…¥ã€åˆ é™¤æ•ˆç‡ä½ï¼›liståº•å±‚å®ç°æ˜¯åŒå‘é“¾è¡¨ï¼Œæ‰€ä»¥åœ¨å†…å­˜ä¸­æ˜¯ä»»æ„å­˜æ”¾çš„ï¼Œæ’å…¥ã€åˆ é™¤æ•ˆç‡é«˜ï¼Œä½†è®¿é—®å…ƒç´ æ•ˆç‡ä½ vectoråœ¨ä¸­é—´èŠ‚ç‚¹è¿›è¡Œæ’å…¥ã€åˆ é™¤ä¼šå¯¼è‡´å†…å­˜æ‹·è´ï¼Œè€Œlistä¸ä¼š vectorä¸€æ¬¡æ€§åˆ†é…å¥½å†…å­˜ï¼Œä¸å¤Ÿæ—¶æ‰è¿›è¡Œ2å€æ‰©å®¹ï¼›listæ¯æ¬¡æ’å…¥æ–°èŠ‚ç‚¹éƒ½ä¼šè¿›è¡Œå†…å­˜ç”³è¯·  4ã€vector æ‰©å®¹åŸç† ä»¥åŸå†…å­˜ç©ºé—´å¤§å°çš„ä¸¤å€é…ç½®ä¸€ä»½æ–°çš„å†…å­˜ç©ºé—´ï¼Œå¹¶å°†åŸç©ºé—´æ•°æ®æ‹·è´è¿‡æ¥è¿›è¡Œåˆå§‹åŒ–\n5ã€map å’Œ set æœ‰ä»€ä¹ˆåŒºåˆ«  mapä¸­çš„å…ƒç´ æ˜¯é”®å€¼å¯¹ï¼›Setä»…æ˜¯å…³é”®å­—çš„ç®€å•é›†åˆ setçš„è¿­ä»£å™¨æ˜¯constçš„ï¼Œä¸å…è®¸ä¿®æ”¹å…ƒç´ çš„å€¼ï¼›mapå…è®¸ä¿®æ”¹valueï¼Œä½†ä¸å…è®¸ä¿®æ”¹key mapæ”¯æŒç”¨å…³é”®å­—ä½œä¸‹æ ‡æ“ä½œï¼Œsetä¸æ”¯æŒä¸‹æ ‡æ“ä½œ  6ã€map å’Œ unordered_map çš„åŒºåˆ«  mapå†…éƒ¨å®ç°äº†ä¸€ä¸ªçº¢é»‘æ ‘ï¼Œçº¢é»‘æ ‘çš„æ¯ä¸€ä¸ªèŠ‚ç‚¹éƒ½ä»£è¡¨ç€mapçš„ä¸€ä¸ªå…ƒç´ ï¼Œå› æ­¤æ‰€æœ‰å…ƒç´ éƒ½æ˜¯æœ‰åºçš„ï¼Œå¯¹å…¶è¿›è¡ŒæŸ¥æ‰¾ã€æ’å…¥ã€åˆ é™¤å¾—æ•ˆç‡éƒ½æ˜¯O(log n)ï¼›ä½†æ˜¯ï¼Œå› ä¸ºæ¯ä¸ªç»“ç‚¹éƒ½éœ€è¦é¢å¤–ä¿å­˜æ•°æ®ï¼Œæ‰€ä»¥ç©ºé—´å ç”¨ç‡æ¯”è¾ƒé«˜ unordered_mapå†…éƒ¨å®ç°äº†ä¸€ä¸ªå“ˆå¸Œè¡¨ï¼Œå› æ­¤å†…éƒ¨å…ƒç´ æ˜¯æ— åºçš„ï¼Œå¯¹å…¶è¿›è¡ŒæŸ¥æ‰¾ã€æ’å…¥ã€åˆ é™¤å¾—æ•ˆç‡éƒ½æ˜¯O(1)ï¼›ä½†æ˜¯å»ºç«‹å“ˆå¸Œè¡¨æ¯”è¾ƒè´¹æ—¶  7ã€STL ä¸­è¿­ä»£å™¨çš„ä½œç”¨ï¼Œæœ‰æŒ‡é’ˆä¸ºä½•è¿˜è¦è¿­ä»£å™¨  Iteratorï¼ˆè¿­ä»£å™¨ï¼‰æ¨¡å¼åˆç§°Cursorï¼ˆæ¸¸æ ‡ï¼‰æ¨¡å¼ï¼Œç”¨äºæä¾›ä¸€ç§æ–¹æ³•é¡ºåºè®¿é—®ä¸€ä¸ªèšåˆå¯¹è±¡ä¸­å„ä¸ªå…ƒç´ , è€Œåˆä¸éœ€æš´éœ²è¯¥å¯¹è±¡çš„å†…éƒ¨è¡¨ç¤º è¿­ä»£å™¨ä¸æ˜¯æŒ‡é’ˆï¼Œæ˜¯ç±»æ¨¡æ¿ï¼Œè¡¨ç°çš„åƒæŒ‡é’ˆã€‚ä»–åªæ˜¯æ¨¡æ‹Ÿäº†æŒ‡é’ˆçš„ä¸€äº›åŠŸèƒ½ï¼Œé€šè¿‡é‡è½½äº†æŒ‡é’ˆçš„ä¸€äº›æ“ä½œç¬¦ï¼Œ-\u0026gt;ã€*ã€++ã€\u0026ndash;ç­‰ï¼Œç›¸å½“äºä¸€ç§æ™ºèƒ½æŒ‡é’ˆ è¿­ä»£å™¨äº§ç”ŸåŸå› ï¼šIteratoré‡‡ç”¨çš„æ˜¯é¢å‘å¯¹è±¡çš„æ€æƒ³ï¼ŒæŠŠä¸åŒé›†åˆç±»çš„è®¿é—®é€»è¾‘æŠ½è±¡å‡ºæ¥ï¼Œä½¿å¾—ä¸ç”¨æš´éœ²é›†åˆå†…éƒ¨çš„ç»“æ„è€Œè¾¾åˆ°å¾ªç¯éå†é›†åˆçš„æ•ˆæœ  ","permalink":"https://874656645.github.io/rick/posts/56-stl-%E6%80%BB%E7%BB%93/","summary":"1ã€å…­å¤§ç»„ä»¶ä»‹ç»  å®¹å™¨ï¼šæ•°æ®ç»“æ„ï¼Œç”¨æ¥å­˜æ”¾æ•°æ® ç®—æ³•ï¼šå¸¸ç”¨ç®—æ³• è¿­ä»£å™¨ï¼šå®¹å™¨å’Œç®—æ³•ä¹‹é—´çš„èƒ¶åˆå‰‚ï¼Œâ€œèŒƒå‹æŒ‡é’ˆâ€ ä»¿å‡½æ•°ï¼šä¸€ç§é‡è½½äº†operator()çš„ç±»ï¼Œä½¿å¾—è¿™ä¸ªç±»çš„ä½¿ç”¨çœ‹ä¸Šå»åƒä¸€ä¸ªå‡½æ•° é…ç½®å™¨ï¼šä¸ºå®¹å™¨åˆ†é…å¹¶ç®¡ç†å†…å­˜ é€‚é…å™¨ï¼šä¿®æ”¹å…¶ä»–ç»„ä»¶æ¥å£  2ã€STL å¸¸ç”¨çš„å®¹å™¨æœ‰å“ªäº›ä»¥åŠå„è‡ªçš„ç‰¹ç‚¹æ˜¯ä»€ä¹ˆ?    åç§° ç‰¹ç‚¹     vector åº•å±‚æ•°æ®ç»“æ„ä¸ºæ•°ç»„ï¼Œæ”¯æŒå¿«é€Ÿéšæœºè®¿é—®   list åº•å±‚æ•°æ®ç»“æ„ä¸ºåŒå‘é“¾è¡¨ï¼Œæ”¯æŒå¿«é€Ÿå¢åˆ    deque åº•å±‚æ•°æ®ç»“æ„ä¸ºä¸€ä¸ªä¸­å¤®æ§åˆ¶å™¨å’Œå¤šä¸ªç¼“å†²åŒºï¼Œæ”¯æŒé¦–å°¾ï¼ˆä¸­é—´ä¸èƒ½ï¼‰å¿«é€Ÿå¢åˆ ï¼Œä¹Ÿæ”¯æŒéšæœºè®¿é—®   stack åº•å±‚ä¸€èˆ¬ç”¨deque/listå®ç°ï¼Œå°é—­å¤´éƒ¨å³å¯ï¼Œä¸ç”¨vectorçš„åŸå› åº”è¯¥æ˜¯å®¹é‡å¤§å°æœ‰é™åˆ¶ï¼Œæ‰©å®¹è€—æ—¶   queue åº•å±‚ä¸€èˆ¬ç”¨deque/listå®ç°ï¼Œå°é—­å¤´éƒ¨å³å¯ï¼Œä¸ç”¨vectorçš„åŸå› åº”è¯¥æ˜¯å®¹é‡å¤§å°æœ‰é™åˆ¶ï¼Œæ‰©å®¹è€—æ—¶   priority_queue åº•å±‚æ•°æ®ç»“æ„ä¸€èˆ¬ä¸ºvectorä¸ºåº•å±‚å®¹å™¨ï¼Œå †heapä¸ºå¤„ç†è§„åˆ™æ¥ç®¡ç†åº•å±‚å®¹å™¨å®ç°   set åº•å±‚æ•°æ®ç»“æ„ä¸ºçº¢é»‘æ ‘ï¼Œæœ‰åºï¼Œä¸é‡å¤   multiset åº•å±‚æ•°æ®ç»“æ„ä¸ºçº¢é»‘æ ‘ï¼Œæœ‰åºï¼Œå¯é‡å¤   map åº•å±‚æ•°æ®ç»“æ„ä¸ºçº¢é»‘æ ‘ï¼Œæœ‰åºï¼Œä¸é‡å¤   multimap åº•å±‚æ•°æ®ç»“æ„ä¸ºçº¢é»‘æ ‘ï¼Œæœ‰åºï¼Œå¯é‡å¤   unordered_set åº•å±‚æ•°æ®ç»“æ„ä¸ºhashè¡¨ï¼Œæ— åºï¼Œä¸é‡å¤   unordered_multiset åº•å±‚æ•°æ®ç»“æ„ä¸ºhashè¡¨ï¼Œæ— åºï¼Œå¯é‡å¤   unordered_map åº•å±‚æ•°æ®ç»“æ„ä¸ºhashè¡¨ï¼Œæ— åºï¼Œä¸é‡å¤   unordered_multimap åº•å±‚æ•°æ®ç»“æ„ä¸ºhashè¡¨ï¼Œæ— åºï¼Œå¯é‡å¤    3ã€vector å’Œ list çš„åŒºåˆ«  vectoråº•å±‚å®ç°æ˜¯æ•°ç»„ï¼Œæ‰€ä»¥åœ¨å†…å­˜ä¸­æ˜¯è¿ç»­å­˜æ”¾çš„ï¼Œéšæœºè¯»å–æ•ˆç‡é«˜ï¼Œä½†æ’å…¥ã€åˆ é™¤æ•ˆç‡ä½ï¼›liståº•å±‚å®ç°æ˜¯åŒå‘é“¾è¡¨ï¼Œæ‰€ä»¥åœ¨å†…å­˜ä¸­æ˜¯ä»»æ„å­˜æ”¾çš„ï¼Œæ’å…¥ã€åˆ é™¤æ•ˆç‡é«˜ï¼Œä½†è®¿é—®å…ƒç´ æ•ˆç‡ä½ vectoråœ¨ä¸­é—´èŠ‚ç‚¹è¿›è¡Œæ’å…¥ã€åˆ é™¤ä¼šå¯¼è‡´å†…å­˜æ‹·è´ï¼Œè€Œlistä¸ä¼š vectorä¸€æ¬¡æ€§åˆ†é…å¥½å†…å­˜ï¼Œä¸å¤Ÿæ—¶æ‰è¿›è¡Œ2å€æ‰©å®¹ï¼›listæ¯æ¬¡æ’å…¥æ–°èŠ‚ç‚¹éƒ½ä¼šè¿›è¡Œå†…å­˜ç”³è¯·  4ã€vector æ‰©å®¹åŸç† ä»¥åŸå†…å­˜ç©ºé—´å¤§å°çš„ä¸¤å€é…ç½®ä¸€ä»½æ–°çš„å†…å­˜ç©ºé—´ï¼Œå¹¶å°†åŸç©ºé—´æ•°æ®æ‹·è´è¿‡æ¥è¿›è¡Œåˆå§‹åŒ–","title":"STL æ€»ç»“"},{"content":"vector å¸¸ç”¨æ“ä½œ #include \u0026lt;iostream\u0026gt;#include \u0026lt;vector\u0026gt; int main() { //1.å®šä¹‰å’Œåˆå§‹åŒ–  vector\u0026lt;int\u0026gt; vec1; //é»˜è®¤åˆå§‹åŒ–ï¼Œvec1ä¸ºç©º  vector\u0026lt;int\u0026gt; vec2(vec1); //ä½¿ç”¨vec1åˆå§‹åŒ–vec2  vector\u0026lt;int\u0026gt; vec3(vec1.begin(),vec1.end());//ä½¿ç”¨vec1åˆå§‹åŒ–vec2  vector\u0026lt;int\u0026gt; vec4(10); //10ä¸ªå€¼ä¸º0çš„å…ƒç´   vector\u0026lt;int\u0026gt; vec5(10,4); //10ä¸ªå€¼ä¸º4çš„å…ƒç´   //2.å¸¸ç”¨æ“ä½œæ–¹æ³•  //2.1 æ·»åŠ å‡½æ•°  vec1.push_back(100); //å°¾éƒ¨æ·»åŠ å…ƒç´   vec1.insert(vec1.end(),5,3); //ä»vec1.backä½ç½®æ’å…¥5ä¸ªå€¼ä¸º3çš„å…ƒç´   //2.2 åˆ é™¤å‡½æ•°  vec1.pop_back(); //åˆ é™¤æœ«å°¾å…ƒç´   vec1.erase(vec1.begin(),vec1.begin()+2); //åˆ é™¤vec1[0]-vec1[2]ä¹‹é—´çš„å…ƒç´ ï¼Œä¸åŒ…æ‹¬vec1[2]å…¶ä»–å…ƒç´ å‰ç§»  vec1.clear(); //æ¸…ç©ºå…ƒç´ ï¼Œå…ƒç´ åœ¨å†…å­˜ä¸­å¹¶æœªæ¶ˆå¤±ï¼Œé€šå¸¸ä½¿ç”¨swap()æ¥æ¸…ç©º  vector\u0026lt;int\u0026gt;().swap(V); //åˆ©ç”¨swapå‡½æ•°å’Œä¸´æ—¶å¯¹è±¡äº¤æ¢å†…å­˜ï¼Œäº¤æ¢ä»¥åï¼Œä¸´æ—¶å¯¹è±¡æ¶ˆå¤±ï¼Œé‡Šæ”¾å†…å­˜ã€‚  // å¿…é¡»æ˜¯åŒç±»å‹çš„ vector  //2.3 éå†å‡½æ•°  vec1[0]; //å–å¾—ç¬¬ä¸€ä¸ªå…ƒç´   vec1.at(int pos); //è¿”å›posä½ç½®å…ƒç´ çš„å¼•ç”¨  vec1.front(); //è¿”å›é¦–å…ƒç´ çš„å¼•ç”¨  vec1.back(); //è¿”å›å°¾å…ƒç´ çš„å¼•ç”¨  vector\u0026lt;int\u0026gt;::iterator begin= vec1.begin(); //è¿”å›å‘é‡å¤´æŒ‡é’ˆï¼ŒæŒ‡å‘ç¬¬ä¸€ä¸ªå…ƒç´   vector\u0026lt;int\u0026gt;::iterator end= vec1.end(); //è¿”å›å‘é‡å°¾æŒ‡é’ˆï¼ŒæŒ‡å‘å‘é‡æœ€åä¸€ä¸ªå…ƒç´ çš„ä¸‹ä¸€ä¸ªä½ç½®  vector\u0026lt;int\u0026gt;::iterator rbegin= vec1.rbegin(); //åå‘è¿­ä»£å™¨ï¼ŒæŒ‡å‘æœ€åä¸€ä¸ªå…ƒç´   vector\u0026lt;int\u0026gt;::iterator rend= vec1.rend(); //åå‘è¿­ä»£å™¨ï¼ŒæŒ‡å‘ç¬¬ä¸€ä¸ªå…ƒç´ ä¹‹å‰çš„ä½ç½®  //2.4 åˆ¤æ–­å‡½æ•°  bool isEmpty = vec1.empty(); //åˆ¤æ–­æ˜¯å¦ä¸ºç©º  //2.5 å¤§å°å‡½æ•°  int size = vec1.size(); //å…ƒç´ ä¸ªæ•°  vec1.capacity(); //è¿”å›å®¹å™¨å½“å‰èƒ½å¤Ÿå®¹çº³çš„å…ƒç´ ä¸ªæ•°  vec1.max_size(); //è¿”å›å®¹å™¨æœ€å¤§çš„å¯èƒ½å­˜å‚¨çš„å…ƒç´ ä¸ªæ•°  //2.6 æ”¹åŠ¨å‡½æ•°  vec1.assign(int n,const T\u0026amp; x); //èµ‹nä¸ªå€¼ä¸ºxçš„å…ƒç´ åˆ°vec1ä¸­ï¼Œè¿™ä¼šæ¸…é™¤æ‰vec1ä¸­ä»¥å‰çš„å†…å®¹ã€‚  vec1.assign(const_iterator first,const_iterator last); //å½“å‰å‘é‡ä¸­[first,last)ä¸­å…ƒç´ è®¾ç½®æˆè¿­ä»£å™¨æ‰€æŒ‡å‘é‡çš„å…ƒç´ ï¼Œè¿™ä¼šæ¸…é™¤æ‰vec1ä¸­ä»¥å‰çš„å†…å®¹ã€‚ } ","permalink":"https://874656645.github.io/rick/posts/55-vector/","summary":"vector å¸¸ç”¨æ“ä½œ #include \u0026lt;iostream\u0026gt;#include \u0026lt;vector\u0026gt; int main() { //1.å®šä¹‰å’Œåˆå§‹åŒ–  vector\u0026lt;int\u0026gt; vec1; //é»˜è®¤åˆå§‹åŒ–ï¼Œvec1ä¸ºç©º  vector\u0026lt;int\u0026gt; vec2(vec1); //ä½¿ç”¨vec1åˆå§‹åŒ–vec2  vector\u0026lt;int\u0026gt; vec3(vec1.begin(),vec1.end());//ä½¿ç”¨vec1åˆå§‹åŒ–vec2  vector\u0026lt;int\u0026gt; vec4(10); //10ä¸ªå€¼ä¸º0çš„å…ƒç´   vector\u0026lt;int\u0026gt; vec5(10,4); //10ä¸ªå€¼ä¸º4çš„å…ƒç´   //2.å¸¸ç”¨æ“ä½œæ–¹æ³•  //2.1 æ·»åŠ å‡½æ•°  vec1.push_back(100); //å°¾éƒ¨æ·»åŠ å…ƒç´   vec1.insert(vec1.end(),5,3); //ä»vec1.backä½ç½®æ’å…¥5ä¸ªå€¼ä¸º3çš„å…ƒç´   //2.2 åˆ é™¤å‡½æ•°  vec1.pop_back(); //åˆ é™¤æœ«å°¾å…ƒç´   vec1.erase(vec1.begin(),vec1.begin()+2); //åˆ é™¤vec1[0]-vec1[2]ä¹‹é—´çš„å…ƒç´ ï¼Œä¸åŒ…æ‹¬vec1[2]å…¶ä»–å…ƒç´ å‰ç§»  vec1.clear(); //æ¸…ç©ºå…ƒç´ ï¼Œå…ƒç´ åœ¨å†…å­˜ä¸­å¹¶æœªæ¶ˆå¤±ï¼Œé€šå¸¸ä½¿ç”¨swap()æ¥æ¸…ç©º  vector\u0026lt;int\u0026gt;().swap(V); //åˆ©ç”¨swapå‡½æ•°å’Œä¸´æ—¶å¯¹è±¡äº¤æ¢å†…å­˜ï¼Œäº¤æ¢ä»¥åï¼Œä¸´æ—¶å¯¹è±¡æ¶ˆå¤±ï¼Œé‡Šæ”¾å†…å­˜ã€‚  // å¿…é¡»æ˜¯åŒç±»å‹çš„ vector  //2.3 éå†å‡½æ•°  vec1[0]; //å–å¾—ç¬¬ä¸€ä¸ªå…ƒç´   vec1.at(int pos); //è¿”å›posä½ç½®å…ƒç´ çš„å¼•ç”¨  vec1.front(); //è¿”å›é¦–å…ƒç´ çš„å¼•ç”¨  vec1.","title":"vector"},{"content":"STLå…­å¤§ç»„ä»¶\nSTLï¼ˆStandard Template Libraryï¼‰ï¼Œå³æ ‡å‡†æ¨¡æ¿åº“ï¼Œæ˜¯ä¸€ä¸ªå…·æœ‰å·¥ä¸šå¼ºåº¦çš„ï¼Œé«˜æ•ˆçš„C++ç¨‹åºåº“ã€‚STLä¸­åŒ…æ‹¬å…­å¤§ç»„ä»¶ï¼šå®¹å™¨ã€ç®—æ³•ã€è¿­ä»£å™¨ã€é€‚é…å™¨ã€ä»¿å‡½æ•°ã€ç©ºé—´é…ç½®å™¨\né€‚é…å™¨ï¼šé€‚é…å™¨æ˜¯ä¸€ç§è®¾è®¡æ¨¡å¼(è®¾è®¡æ¨¡å¼æ˜¯ä¸€å¥—è¢«åå¤ä½¿ç”¨çš„ã€å¤šæ•°äººçŸ¥æ™“çš„ã€ç»è¿‡åˆ†ç±»ç¼–ç›®çš„ã€ä»£ç è®¾è®¡ç»éªŒçš„æ€»ç»“)ï¼Œè¯¥ä¸­æ¨¡å¼æ˜¯å°†ä¸€ä¸ªç±»çš„æ¥å£è½¬æ¢æˆå®¢æˆ·å¸Œæœ›çš„å¦å¤–ä¸€ä¸ªæ¥å£ã€‚\nä¸€ã€å®¹å™¨ åºåˆ—å¼å®¹å™¨ï¼ˆvectorã€dequeã€listï¼‰ã€å…³è”å¼å®¹å™¨ï¼ˆmapã€setï¼‰ã€å®¹å™¨é€‚é…å™¨ï¼ˆstackã€queueã€priority_queueï¼‰\n1. vector æ˜¯ä¸€ç§åŠ¨æ€æ•°ç»„ï¼Œåœ¨å†…å­˜ä¸­å…·æœ‰è¿ç»­çš„å­˜å‚¨ç©ºé—´ï¼Œæ”¯æŒå¿«é€Ÿéšæœºè®¿é—®ã€‚ç”±äºå…·æœ‰è¿ç»­çš„å­˜å‚¨ç©ºé—´ï¼Œæ‰€ä»¥åœ¨æ’å…¥å’Œåˆ é™¤æ“ä½œæ–¹é¢ï¼Œæ•ˆç‡æ¯”è¾ƒæ…¢\n2. deque dequeæ˜¯ double ended queue çš„ç¼©å†™ï¼ŒåŒå‘é˜Ÿåˆ—ä¸è®ºåœ¨å°¾éƒ¨æˆ–å¤´éƒ¨æ’å…¥å…ƒç´ ï¼Œéƒ½ååˆ†è¿…é€Ÿã€‚è€Œåœ¨ä¸­é—´æ’å…¥å…ƒç´ åˆ™ä¼šæ¯”è¾ƒè´¹æ—¶ï¼Œå› ä¸ºå¿…é¡»ç§»åŠ¨ä¸­é—´å…¶ä»–çš„å…ƒç´ ã€‚ä¸ vector ä¸åŒï¼Œdeque ä¸èƒ½ä¿è¯å°†æ‰€æœ‰å…ƒç´ å­˜å‚¨åœ¨è¿ç»­çš„å­˜å‚¨ç©ºé—´ä¸Š\n3. list listæ˜¯STLå®ç°çš„åŒå‘é“¾è¡¨ï¼Œä¸vectorç›¸æ¯”, å®ƒå…è®¸å¿«é€Ÿçš„æ’å…¥å’Œåˆ é™¤ï¼Œä½†æ˜¯éšæœºè®¿é—®å´æ¯”è¾ƒæ…¢\n4. mapã€multimapã€unordered_mapã€unordered_multimap  map æ˜¯STLçš„ä¸€ä¸ªå…³è”å®¹å™¨ï¼Œå®ƒæ˜¯ä¸€ç§é”®å€¼å¯¹å®¹å™¨ï¼Œé‡Œé¢çš„æ•°æ®éƒ½æ˜¯æˆå¯¹å‡ºç°çš„ï¼Œä¸”é”®å€¼æ˜¯å”¯ä¸€çš„ï¼Œå¯åœ¨æˆ‘ä»¬å¤„ç†ä¸€å¯¹ä¸€æ•°æ®çš„æ—¶å€™ï¼Œåœ¨ç¼–ç¨‹ä¸Šæä¾›å¿«é€Ÿé€šé“ã€‚mapå†…éƒ¨è‡ªå»ºä¸€é¢—çº¢é»‘æ ‘(ä¸€ç§éä¸¥æ ¼æ„ä¹‰ä¸Šçš„å¹³è¡¡äºŒå‰æ ‘)ï¼Œè¿™é¢—æ ‘å…·æœ‰å¯¹æ•°æ®è‡ªåŠ¨æ’åºçš„åŠŸèƒ½ï¼Œæ‰€ä»¥åœ¨mapå†…éƒ¨æ‰€æœ‰çš„æ•°æ®éƒ½æ˜¯æœ‰åºçš„ã€‚ multimap ä¸­çš„å…ƒç´ ä¹Ÿæ˜¯æœ‰åºçš„ï¼Œä½†å…è®¸å­˜åœ¨ç›¸åŒé”®å€¼çš„ unordered_map ä¸­çš„å…ƒç´ æ˜¯å”¯ä¸€çš„ï¼Œä½†æ— åºï¼ˆä¹Ÿä¸æ˜¯æ’å…¥é¡ºåºï¼‰ï¼Œè€Œæ˜¯æ ¹æ®å®ƒä»¬çš„æ•£åˆ—å€¼ï¼ˆhash valuesï¼‰ç»„ç»‡æˆæ¡¶ï¼ˆbucketsï¼‰ï¼Œä»è€Œå…è®¸é€šè¿‡é”®å€¼ç›´æ¥å¿«é€Ÿè®¿é—®å•ä¸ªå…ƒç´ ï¼ˆé€Ÿåº¦ä¸€èˆ¬æ¯” map æ›´å¿«ï¼‰ unordered_multimap æ— åºä¸”ä¸å”¯ä¸€  5. setã€multisetã€unordered_setã€unordered_multiset  set çš„å«ä¹‰æ˜¯é›†åˆï¼Œå®ƒæ˜¯ä¸€ä¸ªæœ‰åºçš„å®¹å™¨ï¼Œé‡Œé¢çš„å…ƒç´ éƒ½æ˜¯å”¯ä¸€ä¸”æ’åºå¥½çš„ï¼Œæ”¯æŒæ’å…¥ã€åˆ é™¤ã€æŸ¥æ‰¾ç­‰æ“ä½œï¼Œå°±åƒä¸€ä¸ªé›†åˆä¸€æ ·ï¼Œæ‰€æœ‰çš„æ“ä½œéƒ½æ˜¯ä¸¥æ ¼åœ¨ lognæ—¶é—´å†…å®Œæˆï¼Œæ•ˆç‡éå¸¸é«˜ï¼Œä½¿ç”¨æ–¹æ³•ç±»ä¼¼list multiset ä¹Ÿæ˜¯æ’åºå¥½çš„ï¼Œä½†æ˜¯å¯ä»¥å­˜æœ‰ç›¸åŒçš„å…ƒç´  unordered_set æ— åºä½†å…ƒç´ æ˜¯ä¸å¯é‡å¤çš„ unordered_multiset æ— åºï¼Œå…ƒç´ ä¹Ÿä¸å”¯ä¸€  äºŒã€å®¹å™¨é€‚é…å™¨ è™½ç„¶stackã€queueã€priority_queueä¸­ä¹Ÿå¯ä»¥å­˜æ”¾å…ƒç´ ï¼Œä½†åœ¨STLä¸­å¹¶æ²¡æœ‰å°†å…¶åˆ’åˆ†åœ¨å®¹å™¨çš„è¡Œåˆ—ï¼Œè€Œæ˜¯å°†å…¶ç§°ä¸ºå®¹å™¨é€‚é…å™¨ï¼Œè¿™æ˜¯å› ä¸ºæ¯ä¸ªå®¹å™¨åœ¨åº•å±‚éƒ½æœ‰è‡ªå·±çš„å®ç°æ–¹å¼ï¼Œè€Œstackã€queueã€priority_queueåªæ˜¯åœ¨åº•å±‚å°†å…¶ä»–å®¹å™¨è¿›è¡Œäº†å°è£…\nstd::stack template\u0026lt;class T, class Container = deque\u0026lt;T\u0026gt;\u0026gt; class stack; std::queue template\u0026lt;class T, class Container = deque\u0026lt;T\u0026gt;\u0026gt; class queue; std::priority_queue template\u0026lt;class T, class Container = vector\u0026lt;T\u0026gt;, class Compare = less\u0026lt;typename Container::value_type\u0026gt;\u0026gt; class priority_queue; ä¸ºä»€ä¹ˆé€‰æ‹©dequeä½œä¸ºstackå’Œqueueçš„åº•å±‚é»˜è®¤å®¹å™¨ï¼Ÿ\nstackæ˜¯åè¿›å…ˆå‡ºçš„ç‰¹æ®Šçº¿æ€§æ•°æ®ç»“æ„ï¼Œåªè¦å…·æœ‰push_back()å’Œpop_back()æ“ä½œçš„çº¿æ€§ç»“æ„ï¼Œéƒ½å¯ä»¥ä½œä¸ºstackçš„åº•å±‚å®¹å™¨ï¼Œæ¯”å¦‚vectorå’Œlistéƒ½å¯ä»¥ï¼›\nqueueæ˜¯å…ˆè¿›å…ˆå‡ºçš„ç‰¹æ®Šçº¿æ€§æ•°æ®ç»“æ„ï¼Œåªè¦å…·æœ‰push_back()å’Œpop_front()æ“ä½œçš„çº¿æ€§ç»“æ„ï¼Œéƒ½å¯ä»¥ä½œä¸ºqueueçš„åº•å±‚å®¹å™¨ï¼Œæ¯”å¦‚listã€‚\nä½†æ˜¯STLä¸­å¯¹stackå’Œqueueé»˜è®¤é€‰æ‹©dequeä½œä¸ºå…¶åº•å±‚å®¹å™¨ï¼Œä¸»è¦æ˜¯å› ä¸ºï¼š\n stackå’Œqueueä¸éœ€è¦éå†(å› æ­¤stackå’Œqueueæ²¡æœ‰è¿­ä»£å™¨)ï¼Œåªéœ€è¦åœ¨å›ºå®šçš„ä¸€ç«¯æˆ–è€…ä¸¤ç«¯è¿›è¡Œæ“ä½œã€‚ åœ¨stackä¸­å…ƒç´ å¢é•¿æ—¶ï¼Œdequeæ¯”vectorçš„æ•ˆç‡é«˜ã€‚ åœ¨queueä¸­çš„å…ƒç´ å¢é•¿æ—¶ï¼Œdequeä¸ä»…æ•ˆç‡é«˜ï¼Œè€Œä¸”å†…å­˜ä½¿ç”¨ç‡é«˜  ","permalink":"https://874656645.github.io/rick/posts/54-c++-stl/","summary":"STLå…­å¤§ç»„ä»¶\nSTLï¼ˆStandard Template Libraryï¼‰ï¼Œå³æ ‡å‡†æ¨¡æ¿åº“ï¼Œæ˜¯ä¸€ä¸ªå…·æœ‰å·¥ä¸šå¼ºåº¦çš„ï¼Œé«˜æ•ˆçš„C++ç¨‹åºåº“ã€‚STLä¸­åŒ…æ‹¬å…­å¤§ç»„ä»¶ï¼šå®¹å™¨ã€ç®—æ³•ã€è¿­ä»£å™¨ã€é€‚é…å™¨ã€ä»¿å‡½æ•°ã€ç©ºé—´é…ç½®å™¨\né€‚é…å™¨ï¼šé€‚é…å™¨æ˜¯ä¸€ç§è®¾è®¡æ¨¡å¼(è®¾è®¡æ¨¡å¼æ˜¯ä¸€å¥—è¢«åå¤ä½¿ç”¨çš„ã€å¤šæ•°äººçŸ¥æ™“çš„ã€ç»è¿‡åˆ†ç±»ç¼–ç›®çš„ã€ä»£ç è®¾è®¡ç»éªŒçš„æ€»ç»“)ï¼Œè¯¥ä¸­æ¨¡å¼æ˜¯å°†ä¸€ä¸ªç±»çš„æ¥å£è½¬æ¢æˆå®¢æˆ·å¸Œæœ›çš„å¦å¤–ä¸€ä¸ªæ¥å£ã€‚\nä¸€ã€å®¹å™¨ åºåˆ—å¼å®¹å™¨ï¼ˆvectorã€dequeã€listï¼‰ã€å…³è”å¼å®¹å™¨ï¼ˆmapã€setï¼‰ã€å®¹å™¨é€‚é…å™¨ï¼ˆstackã€queueã€priority_queueï¼‰\n1. vector æ˜¯ä¸€ç§åŠ¨æ€æ•°ç»„ï¼Œåœ¨å†…å­˜ä¸­å…·æœ‰è¿ç»­çš„å­˜å‚¨ç©ºé—´ï¼Œæ”¯æŒå¿«é€Ÿéšæœºè®¿é—®ã€‚ç”±äºå…·æœ‰è¿ç»­çš„å­˜å‚¨ç©ºé—´ï¼Œæ‰€ä»¥åœ¨æ’å…¥å’Œåˆ é™¤æ“ä½œæ–¹é¢ï¼Œæ•ˆç‡æ¯”è¾ƒæ…¢\n2. deque dequeæ˜¯ double ended queue çš„ç¼©å†™ï¼ŒåŒå‘é˜Ÿåˆ—ä¸è®ºåœ¨å°¾éƒ¨æˆ–å¤´éƒ¨æ’å…¥å…ƒç´ ï¼Œéƒ½ååˆ†è¿…é€Ÿã€‚è€Œåœ¨ä¸­é—´æ’å…¥å…ƒç´ åˆ™ä¼šæ¯”è¾ƒè´¹æ—¶ï¼Œå› ä¸ºå¿…é¡»ç§»åŠ¨ä¸­é—´å…¶ä»–çš„å…ƒç´ ã€‚ä¸ vector ä¸åŒï¼Œdeque ä¸èƒ½ä¿è¯å°†æ‰€æœ‰å…ƒç´ å­˜å‚¨åœ¨è¿ç»­çš„å­˜å‚¨ç©ºé—´ä¸Š\n3. list listæ˜¯STLå®ç°çš„åŒå‘é“¾è¡¨ï¼Œä¸vectorç›¸æ¯”, å®ƒå…è®¸å¿«é€Ÿçš„æ’å…¥å’Œåˆ é™¤ï¼Œä½†æ˜¯éšæœºè®¿é—®å´æ¯”è¾ƒæ…¢\n4. mapã€multimapã€unordered_mapã€unordered_multimap  map æ˜¯STLçš„ä¸€ä¸ªå…³è”å®¹å™¨ï¼Œå®ƒæ˜¯ä¸€ç§é”®å€¼å¯¹å®¹å™¨ï¼Œé‡Œé¢çš„æ•°æ®éƒ½æ˜¯æˆå¯¹å‡ºç°çš„ï¼Œä¸”é”®å€¼æ˜¯å”¯ä¸€çš„ï¼Œå¯åœ¨æˆ‘ä»¬å¤„ç†ä¸€å¯¹ä¸€æ•°æ®çš„æ—¶å€™ï¼Œåœ¨ç¼–ç¨‹ä¸Šæä¾›å¿«é€Ÿé€šé“ã€‚mapå†…éƒ¨è‡ªå»ºä¸€é¢—çº¢é»‘æ ‘(ä¸€ç§éä¸¥æ ¼æ„ä¹‰ä¸Šçš„å¹³è¡¡äºŒå‰æ ‘)ï¼Œè¿™é¢—æ ‘å…·æœ‰å¯¹æ•°æ®è‡ªåŠ¨æ’åºçš„åŠŸèƒ½ï¼Œæ‰€ä»¥åœ¨mapå†…éƒ¨æ‰€æœ‰çš„æ•°æ®éƒ½æ˜¯æœ‰åºçš„ã€‚ multimap ä¸­çš„å…ƒç´ ä¹Ÿæ˜¯æœ‰åºçš„ï¼Œä½†å…è®¸å­˜åœ¨ç›¸åŒé”®å€¼çš„ unordered_map ä¸­çš„å…ƒç´ æ˜¯å”¯ä¸€çš„ï¼Œä½†æ— åºï¼ˆä¹Ÿä¸æ˜¯æ’å…¥é¡ºåºï¼‰ï¼Œè€Œæ˜¯æ ¹æ®å®ƒä»¬çš„æ•£åˆ—å€¼ï¼ˆhash valuesï¼‰ç»„ç»‡æˆæ¡¶ï¼ˆbucketsï¼‰ï¼Œä»è€Œå…è®¸é€šè¿‡é”®å€¼ç›´æ¥å¿«é€Ÿè®¿é—®å•ä¸ªå…ƒç´ ï¼ˆé€Ÿåº¦ä¸€èˆ¬æ¯” map æ›´å¿«ï¼‰ unordered_multimap æ— åºä¸”ä¸å”¯ä¸€  5. setã€multisetã€unordered_setã€unordered_multiset  set çš„å«ä¹‰æ˜¯é›†åˆï¼Œå®ƒæ˜¯ä¸€ä¸ªæœ‰åºçš„å®¹å™¨ï¼Œé‡Œé¢çš„å…ƒç´ éƒ½æ˜¯å”¯ä¸€ä¸”æ’åºå¥½çš„ï¼Œæ”¯æŒæ’å…¥ã€åˆ é™¤ã€æŸ¥æ‰¾ç­‰æ“ä½œï¼Œå°±åƒä¸€ä¸ªé›†åˆä¸€æ ·ï¼Œæ‰€æœ‰çš„æ“ä½œéƒ½æ˜¯ä¸¥æ ¼åœ¨ lognæ—¶é—´å†…å®Œæˆï¼Œæ•ˆç‡éå¸¸é«˜ï¼Œä½¿ç”¨æ–¹æ³•ç±»ä¼¼list multiset ä¹Ÿæ˜¯æ’åºå¥½çš„ï¼Œä½†æ˜¯å¯ä»¥å­˜æœ‰ç›¸åŒçš„å…ƒç´  unordered_set æ— åºä½†å…ƒç´ æ˜¯ä¸å¯é‡å¤çš„ unordered_multiset æ— åºï¼Œå…ƒç´ ä¹Ÿä¸å”¯ä¸€  äºŒã€å®¹å™¨é€‚é…å™¨ è™½ç„¶stackã€queueã€priority_queueä¸­ä¹Ÿå¯ä»¥å­˜æ”¾å…ƒç´ ï¼Œä½†åœ¨STLä¸­å¹¶æ²¡æœ‰å°†å…¶åˆ’åˆ†åœ¨å®¹å™¨çš„è¡Œåˆ—ï¼Œè€Œæ˜¯å°†å…¶ç§°ä¸ºå®¹å™¨é€‚é…å™¨ï¼Œè¿™æ˜¯å› ä¸ºæ¯ä¸ªå®¹å™¨åœ¨åº•å±‚éƒ½æœ‰è‡ªå·±çš„å®ç°æ–¹å¼ï¼Œè€Œstackã€queueã€priority_queueåªæ˜¯åœ¨åº•å±‚å°†å…¶ä»–å®¹å™¨è¿›è¡Œäº†å°è£…\nstd::stack template\u0026lt;class T, class Container = deque\u0026lt;T\u0026gt;\u0026gt; class stack; std::queue template\u0026lt;class T, class Container = deque\u0026lt;T\u0026gt;\u0026gt; class queue; std::priority_queue template\u0026lt;class T, class Container = vector\u0026lt;T\u0026gt;, class Compare = less\u0026lt;typename Container::value_type\u0026gt;\u0026gt; class priority_queue; ä¸ºä»€ä¹ˆé€‰æ‹©dequeä½œä¸ºstackå’Œqueueçš„åº•å±‚é»˜è®¤å®¹å™¨ï¼Ÿ","title":"C++ STL"},{"content":"1ã€new / delete å…·ä½“æ­¥éª¤ new\n ç¬¬ä¸€æ­¥ï¼šè°ƒç”¨ operator new å‡½æ•°åˆ†é…ä¸€å—è¶³å¤Ÿå¤§çš„ï¼ŒåŸå§‹çš„ï¼Œæœªå‘½åçš„å†…å­˜ç©ºé—´ä»¥ä¾¿å­˜å‚¨ç‰¹å®šç±»å‹çš„å¯¹è±¡ ç¬¬äºŒæ­¥ï¼šç¼–è¯‘å™¨è¿è¡Œç›¸åº”çš„æ„é€ å‡½æ•°ä»¥æ„é€ å¯¹è±¡ï¼Œå¹¶ä¸ºå…¶ä¼ å…¥åˆå€¼ ç¬¬ä¸‰éƒ¨ï¼šå¯¹è±¡æ„é€ å®Œæˆåï¼Œè¿”å›ä¸€ä¸ªæŒ‡å‘è¯¥å¯¹è±¡çš„æŒ‡é’ˆ  delete\n ç¬¬ä¸€æ­¥ï¼šè°ƒç”¨å¯¹è±¡çš„ææ„å‡½æ•° ç¬¬äºŒæ­¥ï¼šç¼–è¯‘å™¨è°ƒç”¨ operator delete å‡½æ•°é‡Šæ”¾å†…å­˜ç©ºé—´  2ã€new/delete ä¸ malloc/free çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ  malloc/free æ˜¯ C è¯­è¨€çš„æ ‡å‡†åº“å‡½æ•°ï¼Œ new/delete æ˜¯ C++ çš„è¿ç®—ç¬¦ã€‚å®ƒä»¬éƒ½å¯ç”¨äºç”³è¯·åŠ¨æ€å†…å­˜å’Œé‡Šæ”¾å†…å­˜ malloc/free ä¸ä¼šå»è‡ªåŠ¨è°ƒç”¨æ„é€ å’Œææ„å‡½æ•°ï¼Œå¯¹äºåŸºæœ¬æ•°æ®ç±»å‹çš„å¯¹è±¡è€Œè¨€ï¼Œå…‰ç”¨ malloc/free æ— æ³•æ»¡è¶³åŠ¨æ€å¯¹è±¡çš„è¦æ±‚ malloc/free éœ€è¦æŒ‡å®šåˆ†é…å†…å­˜çš„å¤§å°ï¼Œè€Œ new/delete ä¼šè‡ªåŠ¨è®¡ç®—æ‰€éœ€å†…å­˜å¤§å° new è¿”å›çš„æ˜¯æŒ‡å®šå¯¹è±¡çš„æŒ‡é’ˆï¼Œè€Œ malloc è¿”å›çš„æ˜¯ void*ï¼Œå› æ­¤ malloc çš„è¿”å›å€¼ä¸€èˆ¬éƒ½éœ€è¦è¿›è¡Œå¼ºåˆ¶ç±»å‹è½¬æ¢  3ã€C++å†…å­˜ç®¡ç† åœ¨ C++ ä¸­ï¼Œè™šæ‹Ÿå†…å­˜åˆ†ä¸ºä»£ç æ®µã€æ•°æ®æ®µã€BSSæ®µã€å †åŒºã€æ ˆåŒºä»¥åŠæ–‡ä»¶æ˜ å°„åŒºå…­éƒ¨åˆ†\n ä»£ç æ®µï¼šåŒ…æ‹¬åªè¯»å­˜å‚¨åŒºå’Œæ–‡æœ¬åŒºï¼Œå…¶ä¸­åªè¯»å­˜å‚¨åŒºå­˜å‚¨å­—ç¬¦ä¸²å¸¸é‡ï¼Œæ–‡æœ¬åŒºå­˜å‚¨ç¨‹åºçš„æœºå™¨ä»£ç  æ•°æ®æ®µï¼šå­˜å‚¨ç¨‹åºä¸­å·²åˆå§‹åŒ–çš„å…¨å±€å˜é‡å’Œé™æ€å˜é‡ BSSæ®µï¼šå­˜å‚¨æœªåˆå§‹åŒ–çš„å…¨å±€å˜é‡å’Œé™æ€å˜é‡ï¼ˆå±€éƒ¨+å…¨å±€ï¼‰ï¼Œä»¥åŠæ‰€æœ‰è¢«åˆå§‹åŒ–ä¸º0çš„å…¨å±€å˜é‡å’Œé™æ€å˜é‡ï¼ˆè¿™ä¸ªæ®µçš„æ•°æ®å…¨éƒ½æ˜¯0ï¼‰ å †åŒºï¼šè°ƒç”¨new/mallocå‡½æ•°æ—¶åœ¨å †åŒºåŠ¨æ€åˆ†é…å†…å­˜ï¼ŒåŒæ—¶éœ€è¦è°ƒç”¨delete/freeæ¥æ‰‹åŠ¨é‡Šæ”¾ç”³è¯·çš„å†…å­˜ æ˜ å°„åŒºï¼šå­˜å‚¨åŠ¨æ€é“¾æ¥åº“ä»¥åŠè°ƒç”¨mmapå‡½æ•°è¿›è¡Œçš„æ–‡ä»¶æ˜ å°„ æ ˆåŒºï¼šä½¿ç”¨æ ˆç©ºé—´å­˜å‚¨å‡½æ•°çš„è¿”å›åœ°å€ã€å‚æ•°ã€å±€éƒ¨å˜é‡ã€è¿”å›å€¼ï¼ˆæœ€é è¿‘CPUçš„åŒºï¼‰  4ã€å†…å­˜çš„åˆ†é…æ–¹å¼ï¼ˆä¸‰ç§ï¼‰   é™æ€å­˜å‚¨åŒºåˆ†é…ï¼šæ˜¯åœ¨ç¨‹åºç¼–è¯‘æ—¶å°±å·²ç»åˆ†é…å¥½çš„ï¼Œåœ¨æ•´ä¸ªè¿è¡ŒæœŸé—´éƒ½å­˜åœ¨ï¼Œå¦‚å…¨å±€å˜é‡ã€å¸¸é‡ã€é™æ€å˜é‡\n  æ ˆä¸Šåˆ†é…ï¼šå‡½æ•°å†…çš„å±€éƒ¨å˜é‡å°±æ˜¯ä»è¿™åˆ†é…çš„ï¼Œä½†åˆ†é…çš„å†…å­˜å®¹æ˜“æœ‰é™\n  å †ä¸Šåˆ†é…ï¼šä¹Ÿç§°åŠ¨æ€åˆ†é…ï¼Œå¦‚æˆ‘ä»¬ç”¨ new,malloc åˆ†é…å†…å­˜ï¼Œç”¨ delete,free æ¥é‡Šæ”¾çš„å†…å­˜ã€‚å †å†…å­˜ç©ºé—´å¯ç”±ç”¨æˆ·æ‰‹åŠ¨åˆ†é…å’Œé‡Šæ”¾ï¼Œæ‰€ä»¥å…¶ç”Ÿå­˜å‘¨æœŸç”±ç”¨æˆ·æŒ‡å®šï¼Œè¾ƒä¸ºçµæ´»ã€‚ä½†é¢‘ç¹çš„åˆ†é…ã€é‡Šæ”¾å¤§å°ä¸åŒçš„å †ç©ºé—´ä¼šäº§ç”Ÿå†…å­˜ç¢ç‰‡\n  5ã€å†…å­˜æ±  å†…å­˜æ± æ˜¯ä¸€ç§å†…å­˜åˆ†é…æ–¹å¼ã€‚é€šå¸¸æˆ‘ä»¬ä¹ æƒ¯ç›´æ¥ä½¿ç”¨newã€mallocç”³è¯·å†…å­˜ï¼Œè¿™æ ·åšçš„ç¼ºç‚¹åœ¨äºæ‰€ç”³è¯·å†…å­˜å—çš„å¤§å°ä¸å®šï¼Œå½“é¢‘ç¹ä½¿ç”¨æ—¶ä¼šé€ æˆå¤§é‡çš„å†…å­˜ç¢ç‰‡å¹¶è¿›è€Œé™ä½æ€§èƒ½ã€‚å†…å­˜æ± åˆ™æ˜¯åœ¨çœŸæ­£ä½¿ç”¨å†…å­˜ä¹‹å‰ï¼Œé¢„å…ˆç”³è¯·åˆ†é…ä¸€å®šæ•°é‡ã€å¤§å°ç›¸ç­‰ï¼ˆä¸€èˆ¬æƒ…å†µä¸‹ï¼‰çš„å†…å­˜å—ç•™ä½œå¤‡ç”¨ã€‚å½“æœ‰æ–°çš„å†…å­˜éœ€æ±‚æ—¶ï¼Œå°±ä»å†…å­˜æ± ä¸­åˆ†å‡ºä¸€éƒ¨åˆ†å†…å­˜å—ï¼Œè‹¥å†…å­˜å—ä¸å¤Ÿå†ç»§ç»­ç”³è¯·æ–°çš„å†…å­˜ã€‚è¿™æ ·åšçš„ä¸€ä¸ªæ˜¾è‘—ä¼˜ç‚¹æ˜¯ï¼Œä½¿å¾—å†…å­˜åˆ†é…æ•ˆç‡å¾—åˆ°æå‡\n6ã€å†…å­˜æ³„æ¼ å†…å­˜æ³„æ¼ä¸€èˆ¬æ˜¯æŒ‡å †å†…å­˜çš„æ³„æ¼ï¼Œä¹Ÿå°±æ˜¯ç¨‹åºåœ¨è¿è¡Œè¿‡ç¨‹ä¸­åŠ¨æ€ç”³è¯·çš„å†…å­˜ç©ºé—´ä¸å†ä½¿ç”¨åæ²¡æœ‰åŠæ—¶é‡Šæ”¾ï¼Œå¯¼è‡´é‚£å—å†…å­˜ä¸èƒ½è¢«å†æ¬¡ä½¿ç”¨\n7ã€C++ä¸­çš„ä¸å®‰å…¨æ˜¯ä»€ä¹ˆæ¦‚å¿µï¼Ÿ C++ä¸­çš„ä¸å®‰å…¨åŒ…æ‹¬ä¸¤ç§ï¼šä¸€æ˜¯ç¨‹åºå¾—ä¸åˆ°æ­£ç¡®çš„ç»“æœï¼ŒäºŒæ˜¯å‘ç”Ÿä¸å¯é¢„çŸ¥çš„é”™è¯¯ï¼ˆå ç”¨äº†ä¸è¯¥ç”¨çš„å†…å­˜ç©ºé—´ï¼‰ã€‚å¯èƒ½ä¼šå‘ç”Ÿå¦‚ä¸‹é—®é¢˜ï¼š\n æœ€ä¸¥é‡çš„ï¼šå†…å­˜æ³„æ¼ï¼Œç¨‹åºå´©æºƒï¼› ä¸€èˆ¬ä¸¥é‡çš„ï¼šå‘ç”Ÿä¸€äº›é€»è¾‘é”™è¯¯ï¼Œä¸”ä¸ä¾¿äºè°ƒè¯•ï¼› è¾ƒè½»çš„ï¼šä¸¢å¤±éƒ¨åˆ†æ•°æ®ï¼Œå°±åƒå¼ºåˆ¶è½¬æ¢ä¸€æ ·  8ã€å†…å­˜ä¸­çš„å †ä¸æ ˆæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ  ç”³è¯·æ–¹å¼ï¼šæ ˆç”±ç³»ç»Ÿè‡ªåŠ¨åˆ†é…å’Œç®¡ç†ï¼Œå †ç”±ç¨‹åºå‘˜æ‰‹åŠ¨åˆ†é…å’Œç®¡ç† æ•ˆç‡ï¼šæ ˆç”±ç³»ç»Ÿåˆ†é…ï¼Œè®¡ç®—æœºåº•å±‚å¯¹æ ˆæä¾›äº†ä¸€ç³»åˆ—æ”¯æŒï¼šåˆ†é…ä¸“é—¨çš„å¯„å­˜å™¨å­˜å‚¨æ ˆçš„åœ°å€ï¼Œå‹æ ˆå’Œå…¥æ ˆæœ‰ä¸“é—¨çš„æŒ‡ä»¤æ‰§è¡Œï¼Œå› æ­¤ï¼Œå…¶é€Ÿåº¦å¿«ï¼Œä¸ä¼šæœ‰å†…å­˜ç¢ç‰‡ï¼›å †ç”±ç¨‹åºå‘˜åˆ†é…ï¼Œå †æ˜¯ç”±C/C++å‡½æ•°åº“æä¾›çš„ï¼Œæœºåˆ¶å¤æ‚ï¼Œéœ€è¦ä¸€äº›åˆ—åˆ†é…å†…å­˜ã€åˆå¹¶å†…å­˜å’Œé‡Šæ”¾å†…å­˜çš„ç®—æ³•ï¼Œå› æ­¤æ•ˆç‡è¾ƒä½ï¼Œå¯èƒ½ç”±äºæ“ä½œä¸å½“äº§ç”Ÿå†…å­˜ç¢ç‰‡ æ‰©å±•æ–¹å‘ï¼šæ ˆä»é«˜åœ°å€å‘ä½åœ°å€è¿›è¡Œæ‰©å±•ï¼Œå †ç”±ä½åœ°å€å‘é«˜åœ°å€è¿›è¡Œæ‰©å±• ç¨‹åºå±€éƒ¨å˜é‡æ˜¯ä½¿ç”¨çš„æ ˆç©ºé—´ï¼Œnew/mallocåŠ¨æ€ç”³è¯·çš„å†…å­˜æ˜¯å †ç©ºé—´ï¼›åŒæ—¶ï¼Œå‡½æ•°è°ƒç”¨æ—¶ä¼šè¿›è¡Œå½¢å‚å’Œè¿”å›å€¼çš„å‹æ ˆå‡ºæ ˆï¼Œä¹Ÿæ˜¯ç”¨çš„æ ˆç©ºé—´  ","permalink":"https://874656645.github.io/rick/posts/53-new-delete-%E4%B8%8E%E5%86%85%E5%AD%98/","summary":"1ã€new / delete å…·ä½“æ­¥éª¤ new\n ç¬¬ä¸€æ­¥ï¼šè°ƒç”¨ operator new å‡½æ•°åˆ†é…ä¸€å—è¶³å¤Ÿå¤§çš„ï¼ŒåŸå§‹çš„ï¼Œæœªå‘½åçš„å†…å­˜ç©ºé—´ä»¥ä¾¿å­˜å‚¨ç‰¹å®šç±»å‹çš„å¯¹è±¡ ç¬¬äºŒæ­¥ï¼šç¼–è¯‘å™¨è¿è¡Œç›¸åº”çš„æ„é€ å‡½æ•°ä»¥æ„é€ å¯¹è±¡ï¼Œå¹¶ä¸ºå…¶ä¼ å…¥åˆå€¼ ç¬¬ä¸‰éƒ¨ï¼šå¯¹è±¡æ„é€ å®Œæˆåï¼Œè¿”å›ä¸€ä¸ªæŒ‡å‘è¯¥å¯¹è±¡çš„æŒ‡é’ˆ  delete\n ç¬¬ä¸€æ­¥ï¼šè°ƒç”¨å¯¹è±¡çš„ææ„å‡½æ•° ç¬¬äºŒæ­¥ï¼šç¼–è¯‘å™¨è°ƒç”¨ operator delete å‡½æ•°é‡Šæ”¾å†…å­˜ç©ºé—´  2ã€new/delete ä¸ malloc/free çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ  malloc/free æ˜¯ C è¯­è¨€çš„æ ‡å‡†åº“å‡½æ•°ï¼Œ new/delete æ˜¯ C++ çš„è¿ç®—ç¬¦ã€‚å®ƒä»¬éƒ½å¯ç”¨äºç”³è¯·åŠ¨æ€å†…å­˜å’Œé‡Šæ”¾å†…å­˜ malloc/free ä¸ä¼šå»è‡ªåŠ¨è°ƒç”¨æ„é€ å’Œææ„å‡½æ•°ï¼Œå¯¹äºåŸºæœ¬æ•°æ®ç±»å‹çš„å¯¹è±¡è€Œè¨€ï¼Œå…‰ç”¨ malloc/free æ— æ³•æ»¡è¶³åŠ¨æ€å¯¹è±¡çš„è¦æ±‚ malloc/free éœ€è¦æŒ‡å®šåˆ†é…å†…å­˜çš„å¤§å°ï¼Œè€Œ new/delete ä¼šè‡ªåŠ¨è®¡ç®—æ‰€éœ€å†…å­˜å¤§å° new è¿”å›çš„æ˜¯æŒ‡å®šå¯¹è±¡çš„æŒ‡é’ˆï¼Œè€Œ malloc è¿”å›çš„æ˜¯ void*ï¼Œå› æ­¤ malloc çš„è¿”å›å€¼ä¸€èˆ¬éƒ½éœ€è¦è¿›è¡Œå¼ºåˆ¶ç±»å‹è½¬æ¢  3ã€C++å†…å­˜ç®¡ç† åœ¨ C++ ä¸­ï¼Œè™šæ‹Ÿå†…å­˜åˆ†ä¸ºä»£ç æ®µã€æ•°æ®æ®µã€BSSæ®µã€å †åŒºã€æ ˆåŒºä»¥åŠæ–‡ä»¶æ˜ å°„åŒºå…­éƒ¨åˆ†\n ä»£ç æ®µï¼šåŒ…æ‹¬åªè¯»å­˜å‚¨åŒºå’Œæ–‡æœ¬åŒºï¼Œå…¶ä¸­åªè¯»å­˜å‚¨åŒºå­˜å‚¨å­—ç¬¦ä¸²å¸¸é‡ï¼Œæ–‡æœ¬åŒºå­˜å‚¨ç¨‹åºçš„æœºå™¨ä»£ç  æ•°æ®æ®µï¼šå­˜å‚¨ç¨‹åºä¸­å·²åˆå§‹åŒ–çš„å…¨å±€å˜é‡å’Œé™æ€å˜é‡ BSSæ®µï¼šå­˜å‚¨æœªåˆå§‹åŒ–çš„å…¨å±€å˜é‡å’Œé™æ€å˜é‡ï¼ˆå±€éƒ¨+å…¨å±€ï¼‰ï¼Œä»¥åŠæ‰€æœ‰è¢«åˆå§‹åŒ–ä¸º0çš„å…¨å±€å˜é‡å’Œé™æ€å˜é‡ï¼ˆè¿™ä¸ªæ®µçš„æ•°æ®å…¨éƒ½æ˜¯0ï¼‰ å †åŒºï¼šè°ƒç”¨new/mallocå‡½æ•°æ—¶åœ¨å †åŒºåŠ¨æ€åˆ†é…å†…å­˜ï¼ŒåŒæ—¶éœ€è¦è°ƒç”¨delete/freeæ¥æ‰‹åŠ¨é‡Šæ”¾ç”³è¯·çš„å†…å­˜ æ˜ å°„åŒºï¼šå­˜å‚¨åŠ¨æ€é“¾æ¥åº“ä»¥åŠè°ƒç”¨mmapå‡½æ•°è¿›è¡Œçš„æ–‡ä»¶æ˜ å°„ æ ˆåŒºï¼šä½¿ç”¨æ ˆç©ºé—´å­˜å‚¨å‡½æ•°çš„è¿”å›åœ°å€ã€å‚æ•°ã€å±€éƒ¨å˜é‡ã€è¿”å›å€¼ï¼ˆæœ€é è¿‘CPUçš„åŒºï¼‰  4ã€å†…å­˜çš„åˆ†é…æ–¹å¼ï¼ˆä¸‰ç§ï¼‰   é™æ€å­˜å‚¨åŒºåˆ†é…ï¼šæ˜¯åœ¨ç¨‹åºç¼–è¯‘æ—¶å°±å·²ç»åˆ†é…å¥½çš„ï¼Œåœ¨æ•´ä¸ªè¿è¡ŒæœŸé—´éƒ½å­˜åœ¨ï¼Œå¦‚å…¨å±€å˜é‡ã€å¸¸é‡ã€é™æ€å˜é‡\n  æ ˆä¸Šåˆ†é…ï¼šå‡½æ•°å†…çš„å±€éƒ¨å˜é‡å°±æ˜¯ä»è¿™åˆ†é…çš„ï¼Œä½†åˆ†é…çš„å†…å­˜å®¹æ˜“æœ‰é™\n  å †ä¸Šåˆ†é…ï¼šä¹Ÿç§°åŠ¨æ€åˆ†é…ï¼Œå¦‚æˆ‘ä»¬ç”¨ new,malloc åˆ†é…å†…å­˜ï¼Œç”¨ delete,free æ¥é‡Šæ”¾çš„å†…å­˜ã€‚å †å†…å­˜ç©ºé—´å¯ç”±ç”¨æˆ·æ‰‹åŠ¨åˆ†é…å’Œé‡Šæ”¾ï¼Œæ‰€ä»¥å…¶ç”Ÿå­˜å‘¨æœŸç”±ç”¨æˆ·æŒ‡å®šï¼Œè¾ƒä¸ºçµæ´»ã€‚ä½†é¢‘ç¹çš„åˆ†é…ã€é‡Šæ”¾å¤§å°ä¸åŒçš„å †ç©ºé—´ä¼šäº§ç”Ÿå†…å­˜ç¢ç‰‡","title":"new delete ä¸å†…å­˜"},{"content":"åœ¨å †ä¸Šå£°æ˜ä¸€ä¸ªæ•°ç»„ int main( ) { int ** pArr = NULL; pArr = new int*[4]; for(int i = 0; i \u0026lt; 4; i++){ pArr[i] = new int[8]; } for(int i = 0; i \u0026lt; 4; ++i){ for(int j = 0; j \u0026lt; 8; ++j){ pArr[i][j] = i * j; } } for(int i = 0; i \u0026lt; 4; ++i){ for(int j = 0; j \u0026lt; 8; ++j){ if(j == 0) cout \u0026lt;\u0026lt; endl; cout \u0026lt;\u0026lt; pArr[i][j] \u0026lt;\u0026lt; \u0026#39;\\t\u0026#39;; } } // åˆ é™¤  for(int i = 0; i \u0026lt; 4; ++i){ delete [] pArr[i]; } delete [] pArr; return 0; } è¾“å‡ºï¼š\nStart 0\t0\t0\t0\t0\t0\t0\t0\t0\t1\t2\t3\t4\t5\t6\t7\t0\t2\t4\t6\t8\t10\t12\t14\t0\t3\t6\t9\t12\t15\t18\t21\t0 Finish åœ¨æ ˆä¸Šå£°æ˜ä¸€ä¸ªæ•°ç»„ int main( ) { int a[3]; // å…¨éƒ¨åˆå§‹åŒ–ä¸º 0  int b[3]{4}; // ç¬¬ä¸€ä¸ªå€¼æ˜¯ 4ï¼Œå…¶ä½™åˆå§‹åŒ–ä¸º 0  int c[3] = {4}; // åŒä¸Š  // ä¸ vector ä¸åŒ  vector\u0026lt;int\u0026gt; v(3, 4);// 3 ä¸ªå€¼éƒ½æ˜¯ 4  return 0; } ","permalink":"https://874656645.github.io/rick/posts/52-new-%E4%BA%8C%E7%BB%B4%E6%95%B0%E7%BB%84/","summary":"åœ¨å †ä¸Šå£°æ˜ä¸€ä¸ªæ•°ç»„ int main( ) { int ** pArr = NULL; pArr = new int*[4]; for(int i = 0; i \u0026lt; 4; i++){ pArr[i] = new int[8]; } for(int i = 0; i \u0026lt; 4; ++i){ for(int j = 0; j \u0026lt; 8; ++j){ pArr[i][j] = i * j; } } for(int i = 0; i \u0026lt; 4; ++i){ for(int j = 0; j \u0026lt; 8; ++j){ if(j == 0) cout \u0026lt;\u0026lt; endl; cout \u0026lt;\u0026lt; pArr[i][j] \u0026lt;\u0026lt; \u0026#39;\\t\u0026#39;; } } // åˆ é™¤  for(int i = 0; i \u0026lt; 4; ++i){ delete [] pArr[i]; } delete [] pArr; return 0; } è¾“å‡ºï¼š","title":"new äºŒç»´æ•°ç»„"},{"content":"1. thisæŒ‡é’ˆ this æŒ‡é’ˆæ˜¯ä¸€ä¸ªéšå«äºæ¯ä¸€ä¸ªéé™æ€æˆå‘˜å‡½æ•°ä¸­çš„ç‰¹æ®ŠæŒ‡é’ˆï¼Œå®ƒæŒ‡å‘è°ƒç”¨è¯¥æˆå‘˜å‡½æ•°çš„å¯¹è±¡çš„é¦–åœ°å€\n å½“å¯¹ä¸€ä¸ªå¯¹è±¡è°ƒç”¨æˆå‘˜å‡½æ•°æ—¶ï¼Œç¼–è¯‘ç¨‹åºå…ˆå°†å¯¹è±¡çš„åœ°å€èµ‹ç»™ this æŒ‡é’ˆï¼Œç„¶åè°ƒç”¨æˆå‘˜å‡½æ•°ï¼Œæ¯æ¬¡æˆå‘˜å‡½æ•°å­˜å–æ•°æ®æˆå‘˜æ—¶ï¼Œéƒ½éšå¼ä½¿ç”¨ this æŒ‡é’ˆ this æŒ‡é’ˆè¢«éšå«åœ°å£°æ˜ä¸º: ClassName *const thisï¼Œè¿™æ„å‘³ç€ä¸èƒ½ç»™ this æŒ‡é’ˆèµ‹å€¼ this æ˜¯ä¸ªå³å€¼ï¼Œæ‰€ä»¥ä¸èƒ½å– this çš„åœ°å€  2. delete this  ç±»çš„æˆå‘˜å‡½æ•°ä¸­å¯ä»¥è°ƒç”¨ delete thisï¼Œä½†æ˜¯åœ¨é‡Šæ”¾åï¼Œå¯¹è±¡åç»­è°ƒç”¨çš„æ–¹æ³•ä¸èƒ½å†ç”¨åˆ° this æŒ‡é’ˆ delete this é‡Šæ”¾äº†ç±»å¯¹è±¡çš„å†…å­˜ç©ºé—´ï¼Œä½†æ˜¯å†…å­˜ç©ºé—´å´å¹¶ä¸æ˜¯é©¬ä¸Šè¢«å›æ”¶åˆ°ç³»ç»Ÿä¸­ï¼Œæ­¤æ—¶å…¶ä¸­çš„å€¼æ˜¯ä¸ç¡®å®šçš„ delete çš„æœ¬è´¨æ˜¯ä¸ºå°†è¢«é‡Šæ”¾çš„å†…å­˜è°ƒç”¨ä¸€ä¸ªæˆ–å¤šä¸ªææ„å‡½æ•°ï¼Œå¦‚æœåœ¨ç±»çš„ææ„å‡½æ•°ä¸­è°ƒç”¨ delete thisï¼Œä¼šé™·å…¥æ— é™é€’å½’ï¼Œé€ æˆæ ˆæº¢å‡º  3. ä¸€ä¸ªç©ºç±»classä¸­æœ‰ä»€ä¹ˆï¼Ÿ æ„é€ å‡½æ•°ã€æ‹·è´æ„é€ å‡½æ•°ã€ææ„å‡½æ•°ã€èµ‹å€¼è¿ç®—ç¬¦é‡è½½ã€å–åœ°å€æ“ä½œç¬¦é‡è½½ã€è¢« const ä¿®é¥°çš„å–åœ°å€æ“ä½œç¬¦é‡è½½\n4. C++ è®¡ç®—ä¸€ä¸ªç±»çš„ sizeof  ä¸€ä¸ªç©ºçš„ç±» sizeof è¿”å› 1ï¼Œå› ä¸ºä¸€ä¸ªç©ºç±»ä¹Ÿè¦å®ä¾‹åŒ–ï¼Œæ‰€è°“ç±»çš„å®ä¾‹åŒ–å°±æ˜¯åœ¨å†…å­˜ä¸­åˆ†é…ä¸€å—åœ°å€ ç±»å†…çš„æ™®é€šæˆå‘˜å‡½æ•°ä¸å‚ä¸ sizeof çš„ç»Ÿè®¡ï¼Œå› ä¸º sizeof æ˜¯é’ˆå¯¹å®ä¾‹çš„ï¼Œè€Œæ™®é€šæˆå‘˜å‡½æ•°ï¼Œæ˜¯é’ˆå¯¹ç±»ä½“çš„ ä¸€ä¸ªç±»å¦‚æœå«æœ‰è™šå‡½æ•°ï¼Œåˆ™è¿™ä¸ªç±»ä¸­æœ‰ä¸€ä¸ªæŒ‡å‘è™šå‡½æ•°è¡¨çš„æŒ‡é’ˆï¼ˆè™šå‡½æ•°æŒ‡é’ˆï¼‰ï¼Œ32ä½ç¨‹åºå 4ä¸ªå­—èŠ‚ï¼Œ64ä½ç¨‹åºå 8ä¸ªå­—èŠ‚ é™æ€æˆå‘˜ä¸å½±å“ç±»çš„å¤§å°ï¼Œè¢«ç¼–è¯‘å™¨æ”¾åœ¨ç¨‹åºçš„æ•°æ®æ®µä¸­ æ™®é€šç»§æ‰¿çš„ç±»sizeofï¼Œä¼šå¾—åˆ°åŸºç±»çš„å¤§å°åŠ ä¸Šæ´¾ç”Ÿç±»è‡ªèº«æˆå‘˜çš„å¤§å° å½“å­˜åœ¨è™šæ‹Ÿç»§æ‰¿æ—¶ï¼Œæ´¾ç”Ÿç±»ä¸­ä¼šæœ‰ä¸€ä¸ªæŒ‡å‘è™šåŸºç±»è¡¨çš„æŒ‡é’ˆã€‚æ‰€ä»¥å…¶å¤§å°åº”ä¸ºæ™®é€šç»§æ‰¿çš„å¤§å°ï¼Œå†åŠ ä¸Šè™šåŸºç±»è¡¨çš„æŒ‡é’ˆå¤§å°  5. æ„é€ å‡½æ•°å’Œææ„å‡½æ•°èƒ½è¢«ç»§æ‰¿å—? ä¸èƒ½ã€‚æ„é€ å‡½æ•°å’Œææ„å‡½æ•°æ˜¯ç”¨æ¥å¤„ç†å¯¹è±¡çš„åˆ›å»ºå’Œææ„çš„ï¼Œå®ƒä»¬åªçŸ¥é“å¯¹åœ¨å®ƒä»¬çš„ç‰¹æ®Šå±‚æ¬¡çš„å¯¹è±¡åšä»€ä¹ˆ\n6. æ„é€ å‡½æ•°èƒ½ä¸èƒ½æ˜¯è™šå‡½æ•°ï¼Ÿ ä¸èƒ½ã€‚è™šå‡½æ•°å¯¹åº”ä¸€ä¸ªè™šå‡½æ•°è¡¨ï¼Œå¯æ˜¯è¿™ä¸ªè™šå‡½æ•°è¡¨å­˜å‚¨åœ¨å¯¹è±¡çš„å†…å­˜ç©ºé—´çš„ã€‚é—®é¢˜å°±åœ¨äºï¼Œå¦‚æœæ„é€ å‡½æ•°æ˜¯è™šçš„ï¼Œå°±éœ€è¦é€šè¿‡ è™šå‡½æ•°è¡¨æ¥è°ƒç”¨ï¼Œå¯æ˜¯å¯¹è±¡è¿˜æ²¡æœ‰å®ä¾‹åŒ–ï¼Œä¹Ÿå°±æ˜¯å†…å­˜ç©ºé—´è¿˜æ²¡æœ‰ï¼Œå°±ä¸ä¼šæœ‰è™šå‡½æ•°è¡¨\n7. æ„é€ å‡½æ•°å’Œææ„å‡½æ•°èƒ½ä¸èƒ½è¢«é‡è½½ï¼Ÿ æ„é€ å‡½æ•°å¯ä»¥è¢«é‡è½½ï¼Œææ„å‡½æ•°ä¸å¯ä»¥è¢«é‡è½½ã€‚å› ä¸ºæ„é€ å‡½æ•°å¯ä»¥æœ‰å¤šä¸ªä¸”å¯ä»¥å¸¦å‚æ•°ï¼Œ è€Œææ„å‡½æ•°åªèƒ½æœ‰ä¸€ä¸ªï¼Œä¸”ä¸èƒ½å¸¦å‚æ•°ã€‚\n8. æ„é€ å‡½æ•°è°ƒç”¨é¡ºåºï¼Œææ„å‡½æ•°è°ƒç”¨é¡ºåºï¼Ÿ åŸºç±»çš„æ„é€ å‡½æ•°â€”â€”\u0026gt;æˆå‘˜ç±»å¯¹è±¡çš„æ„é€ å‡½æ•°â€”â€”\u0026gt;æ´¾ç”Ÿç±»çš„æ„é€ å‡½æ•°ï¼›\nææ„å‡½æ•°ç›¸åï¼šæ´¾ç”Ÿç±»ææ„â€”â€”\u0026gt;æˆå‘˜ç±»å¯¹è±¡ææ„â€”â€”\u0026gt;åŸºç±»ææ„\n9. æ„é€ å‡½æ•°å’Œææ„å‡½æ•°è°ƒç”¨æ—¶æœº  å…¨å±€èŒƒå›´ä¸­çš„å¯¹è±¡ï¼šæ„é€ å‡½æ•°åœ¨æ‰€æœ‰å‡½æ•°è°ƒç”¨ä¹‹å‰æ‰§è¡Œï¼Œåœ¨ä¸»å‡½æ•°æ‰§è¡Œå®Œè°ƒç”¨ææ„å‡½æ•° å±€éƒ¨è‡ªåŠ¨å¯¹è±¡ï¼šå»ºç«‹å¯¹è±¡æ—¶è°ƒç”¨æ„é€ å‡½æ•°ï¼Œå‡½æ•°ç»“æŸæ—¶è°ƒç”¨ææ„å‡½æ•° åŠ¨æ€åˆ†é…çš„å¯¹è±¡ï¼šå»ºç«‹å¯¹è±¡æ—¶è°ƒç”¨æ„é€ å‡½æ•°ï¼Œè°ƒç”¨é‡Šæ”¾æ—¶è°ƒç”¨ææ„å‡½æ•° é™æ€å±€éƒ¨å˜é‡å¯¹è±¡ï¼šå»ºç«‹å¯¹è±¡æ—¶è°ƒç”¨æ„é€ å‡½æ•°ï¼Œåœ¨ä¸»å‡½æ•°ç»“æŸæ—¶è°ƒç”¨ææ„å‡½æ•°  10. æ‹·è´æ„é€ å‡½æ•°ä¸­æ·±æ‹·è´å’Œæµ…æ‹·è´åŒºåˆ«  æ·±æ‹·è´ä¼šå…ˆç”³è¯·ä¸€å—å’Œæ‹·è´æ•°æ®ä¸€æ ·å¤§çš„å†…å­˜ç©ºé—´ï¼Œç„¶åå°†æ•°æ®é€å­—èŠ‚æ‹·è´è¿‡å»ï¼Œæ‹·è´åä¸¤ä¸ªæŒ‡é’ˆæŒ‡å‘ä¸åŒçš„ä¸¤ä¸ªå†…å­˜ç©ºé—´ æµ…æ‹·è´ä»…æ˜¯æ‹·è´æŒ‡é’ˆåœ°å€ï¼Œæ‹·è´åä¸¤ä¸ªæŒ‡é’ˆæŒ‡å‘åŒä¸€ä¸ªå†…å­˜ç©ºé—´\nå½“æµ…æ‹·è´æ—¶ï¼Œå¦‚æœåŸæ¥çš„å¯¹è±¡è°ƒç”¨ææ„å‡½æ•°é‡Šæ”¾æ‰æŒ‡é’ˆæ‰€æŒ‡å‘çš„æ•°æ®ï¼Œåˆ™ä¼šäº§ç”Ÿç©ºæ‚¬æŒ‡é’ˆï¼Œå› ä¸ºæ‰€æŒ‡å‘çš„å†…å­˜ç©ºé—´å·²ç»è¢«é‡Šæ”¾äº†  11. ä»€ä¹ˆæ—¶å€™å¿…é¡»é‡å†™æ‹·è´æ„é€ å‡½æ•°ï¼Ÿ å½“æ„é€ å‡½æ•°æ¶‰åŠåˆ°åŠ¨æ€å†…å­˜åˆ†é…æ—¶ï¼Œè¦è‡ªå·±å†™æ‹·è´æ„é€ å‡½æ•°ï¼Œå¹¶ä¸”è¦æ·±æ‹·è´\n12. é¢å‘è¿‡ç¨‹ç¼–ç¨‹å’Œé¢å‘å¯¹è±¡ç¼–ç¨‹çš„åŒºåˆ«  é¢å‘è¿‡ç¨‹ï¼šå°±æ˜¯åˆ†æå‡ºè§£å†³é—®é¢˜æ‰€éœ€è¦çš„æ­¥éª¤ï¼Œç„¶åç”¨å‡½æ•°æŠŠè¿™äº›æ­¥éª¤ä¸€æ­¥ä¸€æ­¥å®ç°ï¼ˆå‡½æ•°é©±åŠ¨ï¼‰ é¢å‘å¯¹è±¡ï¼šé¢å‘å¯¹è±¡æ˜¯ä¸€ç§å¯¹ç°å®ä¸–ç•Œç†è§£å’ŒæŠ½è±¡çš„æ–¹æ³•ï¼Œå¼ºè°ƒçš„æ˜¯é€šè¿‡å°†éœ€æ±‚è¦ç´ è½¬åŒ–ä¸ºå¯¹è±¡è¿›è¡Œé—®é¢˜å¤„ç†çš„ä¸€ç§æ€æƒ³ï¼ˆå¯¹è±¡é©±åŠ¨ï¼‰  13. ä¸ºä»€ä¹ˆå†…è”å‡½æ•°ï¼Œæ„é€ å‡½æ•°ï¼Œé™æ€æˆå‘˜å‡½æ•°ä¸èƒ½ä¸ºvirtualå‡½æ•°ï¼Ÿ  å†…è”å‡½æ•°ï¼šå†…è”å‡½æ•°æ˜¯åœ¨ç¼–è¯‘æ—¶æœŸå±•å¼€ï¼Œè€Œè™šå‡½æ•°çš„ç‰¹æ€§æ˜¯è¿è¡Œæ—¶æ‰åŠ¨æ€è”ç¼–ï¼Œæ‰€ä»¥ä¸¤è€…çŸ›ç›¾ï¼Œä¸èƒ½å®šä¹‰å†…è”å‡½æ•°ä¸ºè™šå‡½æ•° æ„é€ å‡½æ•°ï¼šæ„é€ å‡½æ•°ç”¨æ¥åˆ›å»ºä¸€ä¸ªæ–°çš„å¯¹è±¡ï¼Œè€Œè™šå‡½æ•°çš„è¿è¡Œæ˜¯å»ºç«‹åœ¨å¯¹è±¡çš„åŸºç¡€ä¸Šï¼Œåœ¨æ„é€ å‡½æ•°æ‰§è¡Œæ—¶ï¼Œå¯¹è±¡å°šæœªå½¢æˆï¼Œæ‰€ä»¥ä¸èƒ½å°†æ„é€ å‡½æ•°å®šä¹‰ä¸ºè™šå‡½æ•° é™æ€æˆå‘˜å‡½æ•°ï¼šé™æ€æˆå‘˜å‡½æ•°å±äºä¸€ä¸ªç±»è€ŒéæŸä¸€å¯¹è±¡ï¼Œæ²¡æœ‰thisæŒ‡é’ˆï¼Œå®ƒæ— æ³•è¿›è¡Œå¯¹è±¡çš„åˆ¤åˆ« å‹å…ƒå‡½æ•°ï¼šC++ä¸æ”¯æŒå‹å…ƒå‡½æ•°çš„ç»§æ‰¿ï¼Œå¯¹äºæ²¡æœ‰ç»§æ‰¿æ€§çš„å‡½æ•°æ²¡æœ‰è™šå‡½æ•°  ","permalink":"https://874656645.github.io/rick/posts/51-%E7%B1%BB%E5%85%B6%E5%AE%83%E6%80%BB%E7%BB%93/","summary":"1. thisæŒ‡é’ˆ this æŒ‡é’ˆæ˜¯ä¸€ä¸ªéšå«äºæ¯ä¸€ä¸ªéé™æ€æˆå‘˜å‡½æ•°ä¸­çš„ç‰¹æ®ŠæŒ‡é’ˆï¼Œå®ƒæŒ‡å‘è°ƒç”¨è¯¥æˆå‘˜å‡½æ•°çš„å¯¹è±¡çš„é¦–åœ°å€\n å½“å¯¹ä¸€ä¸ªå¯¹è±¡è°ƒç”¨æˆå‘˜å‡½æ•°æ—¶ï¼Œç¼–è¯‘ç¨‹åºå…ˆå°†å¯¹è±¡çš„åœ°å€èµ‹ç»™ this æŒ‡é’ˆï¼Œç„¶åè°ƒç”¨æˆå‘˜å‡½æ•°ï¼Œæ¯æ¬¡æˆå‘˜å‡½æ•°å­˜å–æ•°æ®æˆå‘˜æ—¶ï¼Œéƒ½éšå¼ä½¿ç”¨ this æŒ‡é’ˆ this æŒ‡é’ˆè¢«éšå«åœ°å£°æ˜ä¸º: ClassName *const thisï¼Œè¿™æ„å‘³ç€ä¸èƒ½ç»™ this æŒ‡é’ˆèµ‹å€¼ this æ˜¯ä¸ªå³å€¼ï¼Œæ‰€ä»¥ä¸èƒ½å– this çš„åœ°å€  2. delete this  ç±»çš„æˆå‘˜å‡½æ•°ä¸­å¯ä»¥è°ƒç”¨ delete thisï¼Œä½†æ˜¯åœ¨é‡Šæ”¾åï¼Œå¯¹è±¡åç»­è°ƒç”¨çš„æ–¹æ³•ä¸èƒ½å†ç”¨åˆ° this æŒ‡é’ˆ delete this é‡Šæ”¾äº†ç±»å¯¹è±¡çš„å†…å­˜ç©ºé—´ï¼Œä½†æ˜¯å†…å­˜ç©ºé—´å´å¹¶ä¸æ˜¯é©¬ä¸Šè¢«å›æ”¶åˆ°ç³»ç»Ÿä¸­ï¼Œæ­¤æ—¶å…¶ä¸­çš„å€¼æ˜¯ä¸ç¡®å®šçš„ delete çš„æœ¬è´¨æ˜¯ä¸ºå°†è¢«é‡Šæ”¾çš„å†…å­˜è°ƒç”¨ä¸€ä¸ªæˆ–å¤šä¸ªææ„å‡½æ•°ï¼Œå¦‚æœåœ¨ç±»çš„ææ„å‡½æ•°ä¸­è°ƒç”¨ delete thisï¼Œä¼šé™·å…¥æ— é™é€’å½’ï¼Œé€ æˆæ ˆæº¢å‡º  3. ä¸€ä¸ªç©ºç±»classä¸­æœ‰ä»€ä¹ˆï¼Ÿ æ„é€ å‡½æ•°ã€æ‹·è´æ„é€ å‡½æ•°ã€ææ„å‡½æ•°ã€èµ‹å€¼è¿ç®—ç¬¦é‡è½½ã€å–åœ°å€æ“ä½œç¬¦é‡è½½ã€è¢« const ä¿®é¥°çš„å–åœ°å€æ“ä½œç¬¦é‡è½½\n4. C++ è®¡ç®—ä¸€ä¸ªç±»çš„ sizeof  ä¸€ä¸ªç©ºçš„ç±» sizeof è¿”å› 1ï¼Œå› ä¸ºä¸€ä¸ªç©ºç±»ä¹Ÿè¦å®ä¾‹åŒ–ï¼Œæ‰€è°“ç±»çš„å®ä¾‹åŒ–å°±æ˜¯åœ¨å†…å­˜ä¸­åˆ†é…ä¸€å—åœ°å€ ç±»å†…çš„æ™®é€šæˆå‘˜å‡½æ•°ä¸å‚ä¸ sizeof çš„ç»Ÿè®¡ï¼Œå› ä¸º sizeof æ˜¯é’ˆå¯¹å®ä¾‹çš„ï¼Œè€Œæ™®é€šæˆå‘˜å‡½æ•°ï¼Œæ˜¯é’ˆå¯¹ç±»ä½“çš„ ä¸€ä¸ªç±»å¦‚æœå«æœ‰è™šå‡½æ•°ï¼Œåˆ™è¿™ä¸ªç±»ä¸­æœ‰ä¸€ä¸ªæŒ‡å‘è™šå‡½æ•°è¡¨çš„æŒ‡é’ˆï¼ˆè™šå‡½æ•°æŒ‡é’ˆï¼‰ï¼Œ32ä½ç¨‹åºå 4ä¸ªå­—èŠ‚ï¼Œ64ä½ç¨‹åºå 8ä¸ªå­—èŠ‚ é™æ€æˆå‘˜ä¸å½±å“ç±»çš„å¤§å°ï¼Œè¢«ç¼–è¯‘å™¨æ”¾åœ¨ç¨‹åºçš„æ•°æ®æ®µä¸­ æ™®é€šç»§æ‰¿çš„ç±»sizeofï¼Œä¼šå¾—åˆ°åŸºç±»çš„å¤§å°åŠ ä¸Šæ´¾ç”Ÿç±»è‡ªèº«æˆå‘˜çš„å¤§å° å½“å­˜åœ¨è™šæ‹Ÿç»§æ‰¿æ—¶ï¼Œæ´¾ç”Ÿç±»ä¸­ä¼šæœ‰ä¸€ä¸ªæŒ‡å‘è™šåŸºç±»è¡¨çš„æŒ‡é’ˆã€‚æ‰€ä»¥å…¶å¤§å°åº”ä¸ºæ™®é€šç»§æ‰¿çš„å¤§å°ï¼Œå†åŠ ä¸Šè™šåŸºç±»è¡¨çš„æŒ‡é’ˆå¤§å°  5. æ„é€ å‡½æ•°å’Œææ„å‡½æ•°èƒ½è¢«ç»§æ‰¿å—? ä¸èƒ½ã€‚æ„é€ å‡½æ•°å’Œææ„å‡½æ•°æ˜¯ç”¨æ¥å¤„ç†å¯¹è±¡çš„åˆ›å»ºå’Œææ„çš„ï¼Œå®ƒä»¬åªçŸ¥é“å¯¹åœ¨å®ƒä»¬çš„ç‰¹æ®Šå±‚æ¬¡çš„å¯¹è±¡åšä»€ä¹ˆ\n6. æ„é€ å‡½æ•°èƒ½ä¸èƒ½æ˜¯è™šå‡½æ•°ï¼Ÿ ä¸èƒ½ã€‚è™šå‡½æ•°å¯¹åº”ä¸€ä¸ªè™šå‡½æ•°è¡¨ï¼Œå¯æ˜¯è¿™ä¸ªè™šå‡½æ•°è¡¨å­˜å‚¨åœ¨å¯¹è±¡çš„å†…å­˜ç©ºé—´çš„ã€‚é—®é¢˜å°±åœ¨äºï¼Œå¦‚æœæ„é€ å‡½æ•°æ˜¯è™šçš„ï¼Œå°±éœ€è¦é€šè¿‡ è™šå‡½æ•°è¡¨æ¥è°ƒç”¨ï¼Œå¯æ˜¯å¯¹è±¡è¿˜æ²¡æœ‰å®ä¾‹åŒ–ï¼Œä¹Ÿå°±æ˜¯å†…å­˜ç©ºé—´è¿˜æ²¡æœ‰ï¼Œå°±ä¸ä¼šæœ‰è™šå‡½æ•°è¡¨","title":"ç±»å…¶å®ƒæ€»ç»“"},{"content":" æ„é€ å‡½æ•°å¯ä»¥äº’è°ƒï¼Œä½†ä¸èƒ½åœ¨å‡½æ•°ä½“å†…ï¼Œåªèƒ½é€šè¿‡åˆå§‹åŒ–åˆ—è¡¨çš„å½¢å¼ æ„é€ å‡½æ•°ä¸­ä¸è¦å†™ä¸šåŠ¡é€»è¾‘ ææ„å‡½æ•°ä¸­ä¸è¦ delete this ï¼Œè¿™ä¼šå¯¼è‡´ææ„é€’å½’ï¼Œæœ€ç»ˆå¯¼è‡´æ ˆæº¢å‡º  class Test{ public: Test(int a, int b, int c){ _a = a; _b = b; _c = c; } // æ­£ç¡®  Test(int a, int b):Test(a, b, 100){ } /* // é”™è¯¯ Test(int a, int b){ _a = a; _b = b; Test(a, b, 100); // æ­¤å¤„åªæ˜¯äº§ç”Ÿä¸€ä¸ªä¸´æ—¶å¯¹è±¡ï¼Œé©¬ä¸Šåˆè¢«é‡Šæ”¾æ‰äº†ï¼Œæ²¡æœ‰ä»»ä½•æ„ä¹‰ } */ int getA(){ return _a; } int getB(){ return _b; } int getC(){ return _c; } private: int _a; int _b; int _c; }; int main( ) { Test t1(10, 20); cout \u0026lt;\u0026lt; t1.getA() \u0026lt;\u0026lt; endl; cout \u0026lt;\u0026lt; t1.getB() \u0026lt;\u0026lt; endl; cout \u0026lt;\u0026lt; t1.getC() \u0026lt;\u0026lt; endl; return 0; } è¾“å‡ºï¼š\nStart 10 20 100 0 Finish ","permalink":"https://874656645.github.io/rick/posts/50-%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0%E9%87%8D%E8%BD%BD%E4%B8%8E%E4%BA%92%E8%B0%83/","summary":"æ„é€ å‡½æ•°å¯ä»¥äº’è°ƒï¼Œä½†ä¸èƒ½åœ¨å‡½æ•°ä½“å†…ï¼Œåªèƒ½é€šè¿‡åˆå§‹åŒ–åˆ—è¡¨çš„å½¢å¼ æ„é€ å‡½æ•°ä¸­ä¸è¦å†™ä¸šåŠ¡é€»è¾‘ ææ„å‡½æ•°ä¸­ä¸è¦ delete this ï¼Œè¿™ä¼šå¯¼è‡´ææ„é€’å½’ï¼Œæœ€ç»ˆå¯¼è‡´æ ˆæº¢å‡º  class Test{ public: Test(int a, int b, int c){ _a = a; _b = b; _c = c; } // æ­£ç¡®  Test(int a, int b):Test(a, b, 100){ } /* // é”™è¯¯ Test(int a, int b){ _a = a; _b = b; Test(a, b, 100); // æ­¤å¤„åªæ˜¯äº§ç”Ÿä¸€ä¸ªä¸´æ—¶å¯¹è±¡ï¼Œé©¬ä¸Šåˆè¢«é‡Šæ”¾æ‰äº†ï¼Œæ²¡æœ‰ä»»ä½•æ„ä¹‰ } */ int getA(){ return _a; } int getB(){ return _b; } int getC(){ return _c; } private: int _a; int _b; int _c; }; int main( ) { Test t1(10, 20); cout \u0026lt;\u0026lt; t1.","title":"æ„é€ å‡½æ•°é‡è½½ä¸äº’è°ƒ"},{"content":"æ€è·¯æ˜¯å€ŸåŠ©ç±»çš„é™æ€æˆå‘˜å‡½æ•°\næ–¹å¼ä¸€ï¼š\nclass A{ public: A(int a){ m_a = a; } void print(){ cout \u0026lt;\u0026lt; \u0026#34;m_a = \u0026#34; \u0026lt;\u0026lt; m_a \u0026lt;\u0026lt; endl; } void setCur(){ s_curA = this; } static void callback(){ s_curA-\u0026gt;print(); } private: static A* s_curA; int m_a; }; A* A::s_curA = nullptr; typedef void (*FUN_S)(); void Handle(FUN_S call){ call(); } int main( ) { A a(10), b(20); a.setCur(); Handle(A::callback); b.setCur(); Handle(A::callback); return 0; } æ–¹å¼äºŒï¼š\nclass A{ public: A(int a){ m_a = a; } void print(){ cout \u0026lt;\u0026lt; \u0026#34;m_a = \u0026#34; \u0026lt;\u0026lt; m_a \u0026lt;\u0026lt; endl; } static void callback(void *a){ ((A*)a)-\u0026gt;print(); } private: int m_a; }; typedef void (*FUN)(void *); void Handle(void *a, FUN call){ call(a); } int main( ) { A a(10), b(20); Handle(\u0026amp;a, A::callback); Handle(\u0026amp;b, A::callback); return 0; } è¾“å‡ºï¼š\nStart m_a = 10 m_a = 20 0 Finish è¿˜å¯ä»¥è¿›ä¸€æ­¥å°è£…ï¼š\ntypedef void (*FUN_S)(); void Handle(FUN_S call){ cout \u0026lt;\u0026lt; \u0026#34;Handle(FUN_S) begin...\u0026#34; \u0026lt;\u0026lt; endl; call(); cout \u0026lt;\u0026lt; \u0026#34;Handle(FUN_S) end...\u0026#34; \u0026lt;\u0026lt; endl; } typedef void (*FUN)(void *); void Handle(void *a, FUN call){ cout \u0026lt;\u0026lt; \u0026#34;Handle(void *, FUN) begin...\u0026#34; \u0026lt;\u0026lt; endl; call(a); cout \u0026lt;\u0026lt; \u0026#34;Handle(void *, FUN) end...\u0026#34; \u0026lt;\u0026lt; endl; } class A{ public: A(int a){ m_a = a; } void print(){ cout \u0026lt;\u0026lt; \u0026#34;m_a = \u0026#34; \u0026lt;\u0026lt; m_a \u0026lt;\u0026lt; endl; } void setCur(){ s_curA = this; } void startup(){ setCur(); Handle(A::callback); } void startup(int){ Handle(this, A::callback); } static void callback(){ s_curA-\u0026gt;print(); } static void callback(void *a){ ((A*)a)-\u0026gt;print(); } private: static A* s_curA; int m_a; }; A* A::s_curA = nullptr; int main( ) { A a(10), b(20); a.startup(); b.startup(); cout \u0026lt;\u0026lt; \u0026#34;======================================\u0026#34; \u0026lt;\u0026lt; endl; a.startup(1); b.startup(1); return 0; } è¾“å‡ºï¼š\nStart Handle(FUN_S) begin... m_a = 10 Handle(FUN_S) end... Handle(FUN_S) begin... m_a = 20 Handle(FUN_S) end... ====================================== Handle(void *, FUN) begin... m_a = 10 Handle(void *, FUN) end... Handle(void *, FUN) begin... m_a = 20 Handle(void *, FUN) end... 0 Finish ","permalink":"https://874656645.github.io/rick/posts/49-%E7%B1%BB%E7%9A%84%E6%88%90%E5%91%98%E5%87%BD%E6%95%B0%E4%BD%9C%E4%B8%BA%E5%9B%9E%E8%B0%83%E5%87%BD%E6%95%B0/","summary":"æ€è·¯æ˜¯å€ŸåŠ©ç±»çš„é™æ€æˆå‘˜å‡½æ•°\næ–¹å¼ä¸€ï¼š\nclass A{ public: A(int a){ m_a = a; } void print(){ cout \u0026lt;\u0026lt; \u0026#34;m_a = \u0026#34; \u0026lt;\u0026lt; m_a \u0026lt;\u0026lt; endl; } void setCur(){ s_curA = this; } static void callback(){ s_curA-\u0026gt;print(); } private: static A* s_curA; int m_a; }; A* A::s_curA = nullptr; typedef void (*FUN_S)(); void Handle(FUN_S call){ call(); } int main( ) { A a(10), b(20); a.setCur(); Handle(A::callback); b.setCur(); Handle(A::callback); return 0; } æ–¹å¼äºŒï¼š\nclass A{ public: A(int a){ m_a = a; } void print(){ cout \u0026lt;\u0026lt; \u0026#34;m_a = \u0026#34; \u0026lt;\u0026lt; m_a \u0026lt;\u0026lt; endl; } static void callback(void *a){ ((A*)a)-\u0026gt;print(); } private: int m_a; }; typedef void (*FUN)(void *); void Handle(void *a, FUN call){ call(a); } int main( ) { A a(10), b(20); Handle(\u0026amp;a, A::callback); Handle(\u0026amp;b, A::callback); return 0; } è¾“å‡ºï¼š","title":"ç±»çš„æˆå‘˜å‡½æ•°ä½œä¸ºå›è°ƒå‡½æ•°"},{"content":" çˆ¶ç±»æŒ‡é’ˆå¯ä»¥newå­ç±»å¯¹è±¡ï¼Œå­ç±»æŒ‡é’ˆä¸å¯ä»¥newçˆ¶ç±»å¯¹è±¡ï¼Œä½†æ˜¯å¯ä»¥æ¥æ”¶å¼ºè½¬çš„å·²ç»å­˜åœ¨çš„çˆ¶ç±»æŒ‡é’ˆ çˆ¶ç±»æŒ‡é’ˆæŒ‡å‘æœ¬ç±»å¯¹è±¡ï¼Œè°ƒç”¨çš„è™šå‡½æ•°å’Œæ™®é€šå‡½æ•°éƒ½æ˜¯è‡ªå·±çš„ å°†å­ç±»æŒ‡é’ˆæŒ‡å‘çˆ¶ç±»å¯¹è±¡ï¼Œè™šå‡½æ•°æ‰§è¡Œçš„æ˜¯çˆ¶ç±»çš„ï¼Œä¹Ÿå¯ä»¥è°ƒç”¨å­ç±»å‡½æ•°ï¼ˆè¿™ç§æ“ä½œæ˜¯é”™è¯¯çš„ï¼Œç¼–è¯‘ä¼šæŠ¥é”™ï¼Œè™½ç„¶å¯é€šè¿‡æŒ‡é’ˆå¼ºè½¬ï¼Œä½†æ˜¯ä¸å»ºè®®è¿™æ ·åšï¼Œå¯èƒ½ä¼šå¯¼è‡´æœªçŸ¥é”™è¯¯ï¼‰ çˆ¶ç±»æŒ‡é’ˆæŒ‡å‘å­ç±»å¯¹è±¡ï¼Œè™šå‡½æ•°æ‰§è¡Œçš„æ˜¯å­ç±»çš„ï¼Œå¹¶ä¸”ä¸èƒ½è°ƒç”¨å­ç±»çš„å‡½æ•° çˆ¶ç±»æŒ‡é’ˆä¸å­ç±»æŒ‡é’ˆä¹‹é—´èµ‹å€¼å¯ä»¥ç†è§£ä¸ºæŒ‡é’ˆæ‰€æŒ‡å†…å®¹çš„ä¸€ç§æµ…æ‹·è´\nFather *f = (Father*)Child * å­ç±»çš„è™šå‡½æ•°æŒ‡é’ˆè¦†ç›–çˆ¶ç±»çš„ï¼Œå¹¶ä¸”å­ç±»ç‰¹æœ‰çš„å‡½æ•°æŒ‡é’ˆä¸ä¼šæ‹·è´è¿‡å»\nChild *c = (Child*)new Fatherçˆ¶ç±»çš„è™šå‡½æ•°æŒ‡é’ˆè¦†ç›–å­ç±»çš„ï¼ŒåŒæ—¶ä¹Ÿæœ‰å­ç±»ç‰¹æœ‰çš„å‡½æ•°æŒ‡é’ˆ  class A{ public: void printA(){ cout \u0026lt;\u0026lt; \u0026#34;printA()\u0026#34; \u0026lt;\u0026lt; endl; } virtual void print(){ cout \u0026lt;\u0026lt; \u0026#34;A::print()\u0026#34; \u0026lt;\u0026lt; endl; } }; class B:public A{ public: void printB(){ cout \u0026lt;\u0026lt; \u0026#34;printB()\u0026#34; \u0026lt;\u0026lt; endl; } virtual void print() override{ cout \u0026lt;\u0026lt; \u0026#34;B::print() b = \u0026#34; \u0026lt;\u0026lt; b \u0026lt;\u0026lt; endl; } private: int b; }; int main( ) { // 1ã€æŒ‡å‘è‡ªå·±çš„ç±»å¯¹è±¡ï¼ˆå°†çˆ¶ç±»å¯¹è±¡èµ‹å€¼ç»™çˆ¶ç±»æŒ‡é’ˆï¼‰  A *a = new A; // 1.1 è°ƒç”¨è‡ªå·±çš„å‡½æ•°  a-\u0026gt;printA(); // printA()  // 1.2 è°ƒç”¨è™šå‡½æ•°  a-\u0026gt;print(); // A::print()  // 2ã€å°†æŒ‡å‘çˆ¶ç±»çš„çˆ¶ç±»æŒ‡é’ˆå¼ºè½¬ä¸ºå­ç±»æŒ‡é’ˆï¼ˆå°†çˆ¶ç±»å¯¹è±¡èµ‹å€¼ç»™å­ç±»æŒ‡é’ˆï¼‰  // b = new A; // error: incompatible pointer types assigning to \u0026#39;B *\u0026#39; from \u0026#39;A *\u0026#39;  B *b = (B*)new A; // 2.1 è°ƒç”¨çˆ¶ç±»å‡½æ•°  b-\u0026gt;printA(); // printA()  // 2.2 è°ƒç”¨è™šå‡½æ•°ï¼ˆæ‰§è¡Œçˆ¶ç±»çš„ï¼‰  b-\u0026gt;print(); // A::print() è°ƒç”¨çˆ¶ç±»çš„  // 2.3 å¯ä»¥è°ƒç”¨å­ç±»å‡½æ•°  b-\u0026gt;printB(); // printB() b = 0  // 3ã€å°†å­ç±»å¯¹è±¡èµ‹å€¼ç»™çˆ¶ç±»æŒ‡é’ˆ  a = new B; // 3.1 è°ƒç”¨çˆ¶ç±»å‡½æ•°  a-\u0026gt;printA(); // printA()  // 3.2 è°ƒç”¨å­ç±»çš„å‡½æ•°  // a-\u0026gt;printB(); // error: no member named \u0026#39;printB\u0026#39; in \u0026#39;A\u0026#39;; did you mean \u0026#39;printA\u0026#39;?  // 3.3 è°ƒç”¨è™šå‡½æ•°ï¼ˆæ‰§è¡Œå­ç±»çš„ï¼‰  a-\u0026gt;print(); // B::print() b = 0  // 4ã€æŒ‡å‘å­ç±»å¯¹è±¡çš„å­ç±»æŒ‡é’ˆå¼ºè½¬ä¸ºçˆ¶ç±»æŒ‡é’ˆï¼ˆæ•ˆæœç­‰åŒæƒ…å†µ3ï¼‰  b = new B; a = (A*)b; a-\u0026gt;printA(); // printA()  //a-\u0026gt;printB(); // error: no member named \u0026#39;printB\u0026#39; in \u0026#39;A\u0026#39;  a-\u0026gt;print(); // B::print() b = 0  return 0; } ","permalink":"https://874656645.github.io/rick/posts/48-%E7%B1%BB%E7%9A%84%E5%85%BC%E5%AE%B9%E6%80%A7%E5%8E%9F%E5%88%99/","summary":"çˆ¶ç±»æŒ‡é’ˆå¯ä»¥newå­ç±»å¯¹è±¡ï¼Œå­ç±»æŒ‡é’ˆä¸å¯ä»¥newçˆ¶ç±»å¯¹è±¡ï¼Œä½†æ˜¯å¯ä»¥æ¥æ”¶å¼ºè½¬çš„å·²ç»å­˜åœ¨çš„çˆ¶ç±»æŒ‡é’ˆ çˆ¶ç±»æŒ‡é’ˆæŒ‡å‘æœ¬ç±»å¯¹è±¡ï¼Œè°ƒç”¨çš„è™šå‡½æ•°å’Œæ™®é€šå‡½æ•°éƒ½æ˜¯è‡ªå·±çš„ å°†å­ç±»æŒ‡é’ˆæŒ‡å‘çˆ¶ç±»å¯¹è±¡ï¼Œè™šå‡½æ•°æ‰§è¡Œçš„æ˜¯çˆ¶ç±»çš„ï¼Œä¹Ÿå¯ä»¥è°ƒç”¨å­ç±»å‡½æ•°ï¼ˆè¿™ç§æ“ä½œæ˜¯é”™è¯¯çš„ï¼Œç¼–è¯‘ä¼šæŠ¥é”™ï¼Œè™½ç„¶å¯é€šè¿‡æŒ‡é’ˆå¼ºè½¬ï¼Œä½†æ˜¯ä¸å»ºè®®è¿™æ ·åšï¼Œå¯èƒ½ä¼šå¯¼è‡´æœªçŸ¥é”™è¯¯ï¼‰ çˆ¶ç±»æŒ‡é’ˆæŒ‡å‘å­ç±»å¯¹è±¡ï¼Œè™šå‡½æ•°æ‰§è¡Œçš„æ˜¯å­ç±»çš„ï¼Œå¹¶ä¸”ä¸èƒ½è°ƒç”¨å­ç±»çš„å‡½æ•° çˆ¶ç±»æŒ‡é’ˆä¸å­ç±»æŒ‡é’ˆä¹‹é—´èµ‹å€¼å¯ä»¥ç†è§£ä¸ºæŒ‡é’ˆæ‰€æŒ‡å†…å®¹çš„ä¸€ç§æµ…æ‹·è´\nFather *f = (Father*)Child * å­ç±»çš„è™šå‡½æ•°æŒ‡é’ˆè¦†ç›–çˆ¶ç±»çš„ï¼Œå¹¶ä¸”å­ç±»ç‰¹æœ‰çš„å‡½æ•°æŒ‡é’ˆä¸ä¼šæ‹·è´è¿‡å»\nChild *c = (Child*)new Fatherçˆ¶ç±»çš„è™šå‡½æ•°æŒ‡é’ˆè¦†ç›–å­ç±»çš„ï¼ŒåŒæ—¶ä¹Ÿæœ‰å­ç±»ç‰¹æœ‰çš„å‡½æ•°æŒ‡é’ˆ  class A{ public: void printA(){ cout \u0026lt;\u0026lt; \u0026#34;printA()\u0026#34; \u0026lt;\u0026lt; endl; } virtual void print(){ cout \u0026lt;\u0026lt; \u0026#34;A::print()\u0026#34; \u0026lt;\u0026lt; endl; } }; class B:public A{ public: void printB(){ cout \u0026lt;\u0026lt; \u0026#34;printB()\u0026#34; \u0026lt;\u0026lt; endl; } virtual void print() override{ cout \u0026lt;\u0026lt; \u0026#34;B::print() b = \u0026#34; \u0026lt;\u0026lt; b \u0026lt;\u0026lt; endl; } private: int b; }; int main( ) { // 1ã€æŒ‡å‘è‡ªå·±çš„ç±»å¯¹è±¡ï¼ˆå°†çˆ¶ç±»å¯¹è±¡èµ‹å€¼ç»™çˆ¶ç±»æŒ‡é’ˆï¼‰  A *a = new A; // 1.","title":"ç±»çš„å…¼å®¹æ€§åŸåˆ™"},{"content":" å¦‚æœç±»çš„å†…éƒ¨æ²¡æœ‰ä¸“é—¨åˆ›å»ºå®ä¾‹çš„ä»£ç ï¼Œåˆ™æ˜¯æ— æ³•åˆ›å»ºä»»ä½•å®ä¾‹çš„ å¦‚æœçˆ¶ç±»æ„é€ å‡½æ•°è®¾ç½®æˆäº†ç§æœ‰çš„ï¼Œåˆ™å­ç±»æ— æ³•ç¼–è¯‘ï¼Œå› ä¸ºåœ¨åˆå§‹åŒ–å­ç±»æ—¶ä¼šå…ˆæ‰§è¡Œçˆ¶ç±»çš„æ„é€   class A{ public: private: A(int ){ } }; class B:public A{ public: int x; }; int main( ) { B b; b.x = 0; return 0; } è¾“å‡ºï¼š\nStart prog.cc:19:7: error: call to implicitly-deleted default constructor of \u0026#39;B\u0026#39; B b; ^ prog.cc:13:9: note: default constructor of \u0026#39;B\u0026#39; is implicitly deleted because base class \u0026#39;A\u0026#39; has an inaccessible default constructor class B:public A{ ^ 1 error generated. 1 Finish ","permalink":"https://874656645.github.io/rick/posts/47-%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0%E7%A7%81%E6%9C%89/","summary":" å¦‚æœç±»çš„å†…éƒ¨æ²¡æœ‰ä¸“é—¨åˆ›å»ºå®ä¾‹çš„ä»£ç ï¼Œåˆ™æ˜¯æ— æ³•åˆ›å»ºä»»ä½•å®ä¾‹çš„ å¦‚æœçˆ¶ç±»æ„é€ å‡½æ•°è®¾ç½®æˆäº†ç§æœ‰çš„ï¼Œåˆ™å­ç±»æ— æ³•ç¼–è¯‘ï¼Œå› ä¸ºåœ¨åˆå§‹åŒ–å­ç±»æ—¶ä¼šå…ˆæ‰§è¡Œçˆ¶ç±»çš„æ„é€   class A{ public: private: A(int ){ } }; class B:public A{ public: int x; }; int main( ) { B b; b.x = 0; return 0; } è¾“å‡ºï¼š\nStart prog.cc:19:7: error: call to implicitly-deleted default constructor of \u0026#39;B\u0026#39; B b; ^ prog.cc:13:9: note: default constructor of \u0026#39;B\u0026#39; is implicitly deleted because base class \u0026#39;A\u0026#39; has an inaccessible default constructor class B:public A{ ^ 1 error generated. 1 Finish ","title":"æ„é€ å‡½æ•°ç§æœ‰"},{"content":"ä¸€ã€åªèƒ½åœ¨å †ä¸Š æ–¹æ³•ï¼šå°†ææ„å‡½æ•°è®¾ç½®ä¸ºç§æœ‰\nåŸå› ï¼šC++ æ˜¯é™æ€ç»‘å®šè¯­è¨€ï¼Œç¼–è¯‘å™¨ç®¡ç†æ ˆä¸Šå¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸï¼Œç¼–è¯‘å™¨åœ¨ä¸ºç±»å¯¹è±¡åˆ†é…æ ˆç©ºé—´æ—¶ï¼Œä¼šå…ˆæ£€æŸ¥ç±»çš„ææ„å‡½æ•°çš„è®¿é—®æ€§ã€‚è‹¥ææ„å‡½æ•°ä¸å¯è®¿é—®ï¼Œåˆ™ä¸èƒ½åœ¨æ ˆä¸Šåˆ›å»ºå¯¹è±¡\nclass Test { public: void printT(){ cout \u0026lt;\u0026lt; \u0026#34;printT\u0026#34; \u0026lt;\u0026lt; endl; } void freeT(){ delete this; } private: ~Test(){ cout \u0026lt;\u0026lt; \u0026#34;~Test()\u0026#34; \u0026lt;\u0026lt; endl; } }; int main( ) { // ä¸èƒ½åœ¨æ ˆä¸Šåˆ›å»ºå¯¹è±¡  //Test t; // prog.cc:25:10: error: variable of type \u0026#39;Test\u0026#39; has private destructor  // åªèƒ½åœ¨å †ä¸Šåˆ›å»ºå¯¹è±¡  Test *t = new Test; t-\u0026gt;printT(); // é”€æ¯å¯¹è±¡  t-\u0026gt;freeT(); return 0; } è¾“å‡ºï¼š\nStart printT ~Test() 0 Finish äºŒã€åªèƒ½åœ¨æ ˆä¸Š æ–¹æ³•ï¼šå°† new å’Œ delete é‡è½½ä¸ºç§æœ‰\nåŸå› ï¼šåœ¨å †ä¸Šç”Ÿæˆå¯¹è±¡ï¼Œä½¿ç”¨ new å…³é”®è¯æ“ä½œï¼Œå…¶è¿‡ç¨‹åˆ†ä¸ºä¸¤é˜¶æ®µï¼šç¬¬ä¸€é˜¶æ®µï¼Œä½¿ç”¨ new åœ¨å †ä¸Šå¯»æ‰¾å¯ç”¨å†…å­˜ï¼Œåˆ†é…ç»™å¯¹è±¡ï¼›ç¬¬äºŒé˜¶æ®µï¼Œè°ƒç”¨æ„é€ å‡½æ•°ç”Ÿæˆå¯¹è±¡ã€‚å°† new æ“ä½œè®¾ç½®ä¸ºç§æœ‰ï¼Œé‚£ä¹ˆç¬¬ä¸€é˜¶æ®µå°±æ— æ³•å®Œæˆï¼Œå°±ä¸èƒ½å¤Ÿåœ¨å †ä¸Šç”Ÿæˆå¯¹è±¡\n","permalink":"https://874656645.github.io/rick/posts/46-%E5%AE%9A%E4%B9%89%E4%B8%80%E4%B8%AA%E5%8F%AA%E8%83%BD%E5%9C%A8%E5%A0%86%E4%B8%8A%E6%A0%88%E4%B8%8A%E7%94%9F%E6%88%90%E5%AF%B9%E8%B1%A1%E7%9A%84%E7%B1%BB/","summary":"ä¸€ã€åªèƒ½åœ¨å †ä¸Š æ–¹æ³•ï¼šå°†ææ„å‡½æ•°è®¾ç½®ä¸ºç§æœ‰\nåŸå› ï¼šC++ æ˜¯é™æ€ç»‘å®šè¯­è¨€ï¼Œç¼–è¯‘å™¨ç®¡ç†æ ˆä¸Šå¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸï¼Œç¼–è¯‘å™¨åœ¨ä¸ºç±»å¯¹è±¡åˆ†é…æ ˆç©ºé—´æ—¶ï¼Œä¼šå…ˆæ£€æŸ¥ç±»çš„ææ„å‡½æ•°çš„è®¿é—®æ€§ã€‚è‹¥ææ„å‡½æ•°ä¸å¯è®¿é—®ï¼Œåˆ™ä¸èƒ½åœ¨æ ˆä¸Šåˆ›å»ºå¯¹è±¡\nclass Test { public: void printT(){ cout \u0026lt;\u0026lt; \u0026#34;printT\u0026#34; \u0026lt;\u0026lt; endl; } void freeT(){ delete this; } private: ~Test(){ cout \u0026lt;\u0026lt; \u0026#34;~Test()\u0026#34; \u0026lt;\u0026lt; endl; } }; int main( ) { // ä¸èƒ½åœ¨æ ˆä¸Šåˆ›å»ºå¯¹è±¡  //Test t; // prog.cc:25:10: error: variable of type \u0026#39;Test\u0026#39; has private destructor  // åªèƒ½åœ¨å †ä¸Šåˆ›å»ºå¯¹è±¡  Test *t = new Test; t-\u0026gt;printT(); // é”€æ¯å¯¹è±¡  t-\u0026gt;freeT(); return 0; } è¾“å‡ºï¼š\nStart printT ~Test() 0 Finish äºŒã€åªèƒ½åœ¨æ ˆä¸Š æ–¹æ³•ï¼šå°† new å’Œ delete é‡è½½ä¸ºç§æœ‰","title":"å®šä¹‰ä¸€ä¸ªåªèƒ½åœ¨å †ä¸Šï¼ˆæ ˆä¸Šï¼‰ç”Ÿæˆå¯¹è±¡çš„ç±»"},{"content":" æŠ½è±¡ç±»ï¼šå«æœ‰çº¯è™šå‡½æ•°çš„ç±»ï¼Œä¸èƒ½å®ä¾‹åŒ–å¯¹è±¡ æ¥å£ç±»ï¼šä»…å«æœ‰çº¯è™šå‡½æ•°çš„æŠ½è±¡ç±» èšåˆç±»ï¼šç”¨æˆ·å¯ä»¥ç›´æ¥è®¿é—®å…¶æˆå‘˜ï¼Œå¹¶ä¸”å…·æœ‰ç‰¹æ®Šçš„åˆå§‹åŒ–è¯­æ³•å½¢å¼ã€‚æ»¡è¶³å¦‚ä¸‹ç‰¹ç‚¹ï¼š\n1ï¼‰æ‰€æœ‰æˆå‘˜éƒ½æ˜¯ publicï¼Œæ²¡æœ‰ç§æœ‰å’Œå—ä¿æŠ¤çš„éé™æ€æˆå‘˜ï¼›\n2ï¼‰æ²¡æœ‰å®šä¹‰ä»»ä½•æ„é€ å‡½æ•°ï¼›\n3ï¼‰æ²¡æœ‰ç±»å†…åˆå§‹åŒ–ï¼›\n4ï¼‰æ²¡æœ‰åŸºç±»ï¼Œä¹Ÿæ²¡æœ‰ virtual å‡½æ•°  // æ¥å£ç±» class A { virtual void printA() = 0; // çº¯è™šå‡½æ•° }; // æŠ½è±¡ç±» class AA:public A { public: // è¦†å†™æ¥å£ç±»çš„çº¯è™šå‡½æ•°  void printA() override { cout \u0026lt;\u0026lt; \u0026#34;class AA printA()\u0026#34; \u0026lt;\u0026lt; endl; } virtual void printAA() = 0; }; // å¯å®ä¾‹åŒ–çš„ç±» class B:public AA { public: // è¦†å†™çˆ¶ç±»ï¼ˆæŠ½è±¡ç±»ï¼‰çš„çº¯è™šå‡½æ•°  void printAA() override { cout \u0026lt;\u0026lt; \u0026#34;class B printAA()\u0026#34; \u0026lt;\u0026lt; endl; } void printB() { cout \u0026lt;\u0026lt; \u0026#34;printB()\u0026#34; \u0026lt;\u0026lt; endl; } }; // èšåˆç±» class C { public: int x; int y; void print(){ cc(); } private: void cc(){ cout \u0026lt;\u0026lt; \u0026#34;x = \u0026#34; \u0026lt;\u0026lt; x \u0026lt;\u0026lt; \u0026#34;, y = \u0026#34; \u0026lt;\u0026lt; y \u0026lt;\u0026lt; \u0026#34;, z = \u0026#34; \u0026lt;\u0026lt; z \u0026lt;\u0026lt; endl; } static int z; }; int C::z = 0; class D { public: int a; int b; C c; void print(){ cout \u0026lt;\u0026lt; \u0026#34;a = \u0026#34; \u0026lt;\u0026lt; a \u0026lt;\u0026lt; \u0026#34;, b = \u0026#34; \u0026lt;\u0026lt; b \u0026lt;\u0026lt; endl; c.print(); } }; int main( ) { B b; b.printA(); b.printB(); // åˆå§‹åŒ–èšåˆç±»  D d = {1, 2, {3, 4}}; d.print(); return 0; } è¾“å‡ºï¼š\nStart class AA printA() class B printAA() printB() a = 1, b = 2 x = 3, y = 4, z = 0 0 Finish ","permalink":"https://874656645.github.io/rick/posts/45-%E6%8A%BD%E8%B1%A1%E7%B1%BB%E6%8E%A5%E5%8F%A3%E7%B1%BB%E8%81%9A%E5%90%88%E7%B1%BB/","summary":"æŠ½è±¡ç±»ï¼šå«æœ‰çº¯è™šå‡½æ•°çš„ç±»ï¼Œä¸èƒ½å®ä¾‹åŒ–å¯¹è±¡ æ¥å£ç±»ï¼šä»…å«æœ‰çº¯è™šå‡½æ•°çš„æŠ½è±¡ç±» èšåˆç±»ï¼šç”¨æˆ·å¯ä»¥ç›´æ¥è®¿é—®å…¶æˆå‘˜ï¼Œå¹¶ä¸”å…·æœ‰ç‰¹æ®Šçš„åˆå§‹åŒ–è¯­æ³•å½¢å¼ã€‚æ»¡è¶³å¦‚ä¸‹ç‰¹ç‚¹ï¼š\n1ï¼‰æ‰€æœ‰æˆå‘˜éƒ½æ˜¯ publicï¼Œæ²¡æœ‰ç§æœ‰å’Œå—ä¿æŠ¤çš„éé™æ€æˆå‘˜ï¼›\n2ï¼‰æ²¡æœ‰å®šä¹‰ä»»ä½•æ„é€ å‡½æ•°ï¼›\n3ï¼‰æ²¡æœ‰ç±»å†…åˆå§‹åŒ–ï¼›\n4ï¼‰æ²¡æœ‰åŸºç±»ï¼Œä¹Ÿæ²¡æœ‰ virtual å‡½æ•°  // æ¥å£ç±» class A { virtual void printA() = 0; // çº¯è™šå‡½æ•° }; // æŠ½è±¡ç±» class AA:public A { public: // è¦†å†™æ¥å£ç±»çš„çº¯è™šå‡½æ•°  void printA() override { cout \u0026lt;\u0026lt; \u0026#34;class AA printA()\u0026#34; \u0026lt;\u0026lt; endl; } virtual void printAA() = 0; }; // å¯å®ä¾‹åŒ–çš„ç±» class B:public AA { public: // è¦†å†™çˆ¶ç±»ï¼ˆæŠ½è±¡ç±»ï¼‰çš„çº¯è™šå‡½æ•°  void printAA() override { cout \u0026lt;\u0026lt; \u0026#34;class B printAA()\u0026#34; \u0026lt;\u0026lt; endl; } void printB() { cout \u0026lt;\u0026lt; \u0026#34;printB()\u0026#34; \u0026lt;\u0026lt; endl; } }; // èšåˆç±» class C { public: int x; int y; void print(){ cc(); } private: void cc(){ cout \u0026lt;\u0026lt; \u0026#34;x = \u0026#34; \u0026lt;\u0026lt; x \u0026lt;\u0026lt; \u0026#34;, y = \u0026#34; \u0026lt;\u0026lt; y \u0026lt;\u0026lt; \u0026#34;, z = \u0026#34; \u0026lt;\u0026lt; z \u0026lt;\u0026lt; endl; } static int z; }; int C::z = 0; class D { public: int a; int b; C c; void print(){ cout \u0026lt;\u0026lt; \u0026#34;a = \u0026#34; \u0026lt;\u0026lt; a \u0026lt;\u0026lt; \u0026#34;, b = \u0026#34; \u0026lt;\u0026lt; b \u0026lt;\u0026lt; endl; c.","title":"æŠ½è±¡ç±»ã€æ¥å£ç±»ã€èšåˆç±»"},{"content":"è™šç»§æ‰¿å’Œè™šåŸºç±» å‚è€ƒ\n åœ¨C++ä¸­ï¼Œåœ¨å®šä¹‰å…¬å…±åŸºç±»Açš„æ´¾ç”Ÿç±»Bã€C\u0026hellip;çš„æ—¶å€™ï¼Œå¦‚æœåœ¨ç»§æ‰¿æ–¹å¼å‰ä½¿ç”¨å…³é”®å­—virtualå¯¹ç»§æ‰¿æ–¹å¼é™å®šï¼Œè¿™æ ·çš„ç»§æ‰¿æ–¹å¼å°±æ˜¯è™šæ‹Ÿç»§æ‰¿ï¼Œå…¬å…±åŸºç±»Aæˆä¸ºè™šåŸºç±»ã€‚è¿™æ ·ï¼Œåœ¨å…·æœ‰å…¬å…±åŸºç±»çš„ã€ä½¿ç”¨äº†è™šæ‹Ÿç»§æ‰¿æ–¹å¼çš„å¤šä¸ªæ´¾ç”Ÿç±»Bã€C\u0026hellip;çš„å…¬å…±æ´¾ç”Ÿç±»Dä¸­ï¼Œè¯¥åŸºç±»Açš„æˆå‘˜å°±åªæœ‰ä¸€ä»½æ‹·è´ ä¸€ä¸ªç±»æœ‰å¤šä¸ªåŸºç±»ï¼Œè¿™æ ·çš„ç»§æ‰¿å…³ç³»ç§°ä¸ºå¤šç»§æ‰¿ã€‚åœ¨å¤šç»§æ‰¿çš„æƒ…å†µä¸‹ï¼Œå¦‚æœä¸åŒåŸºç±»çš„æˆå‘˜åç§°ç›¸åŒï¼ŒåŒ¹é…åº¦ç›¸åŒ, åˆ™ä¼šé€ æˆäºŒä¹‰æ€§ã€‚ä¸ºäº†é¿å…å¤šç»§æ‰¿äº§ç”Ÿçš„äºŒä¹‰æ€§ï¼Œåœ¨è¿™ç§æœºåˆ¶ä¸‹ï¼Œä¸è®ºè™šåŸºç±»åœ¨ç»§æ‰¿ä½“ç³»ä¸­å‡ºç°äº†å¤šå°‘æ¬¡ï¼Œåœ¨æ´¾ç”Ÿç±»ä¸­éƒ½åªåŒ…å«ä¸€ä»½è™šåŸºç±»çš„æˆå‘˜ã€‚ ä¼šåœ¨è™šç»§æ‰¿çš„ç±»ä¸­ç”Ÿæˆä¸€ä¸ªæŒ‡å‘è™šåŸºç±»çš„æŒ‡é’ˆ {vbptr} ä¼šåœ¨å†…å­˜ä¸­ç”Ÿæˆä¸€ä¸ªè™šåŸºç±»è¡¨ D::$vbtable@B@  å¾®è½¯çš„Visual Studioæä¾›ç»™ç”¨æˆ·æ˜¾ç¤ºC++å¯¹è±¡åœ¨å†…å­˜ä¸­çš„å¸ƒå±€çš„é€‰é¡¹\ncl [filename].cpp /d1 reportSingleClassLayout[className]\nä¸€èˆ¬ç»§æ‰¿ï¼š\nclass A { public: int dataA; }; class B:public A { public: int dataB; }; class C:public A { public: int dataC; }; class D : public B, public C { public: int dataD; }; è¾“å‡ºï¼š\nclass D size(20): +--- 0 | +--- (base class B) 0 | | +--- (base class A) 0 | | | dataA | | +--- 4 | | dataB | +--- 8 | +--- (base class C) 8 | | +--- (base class A) 8 | | | dataA | | +--- 12 | | dataC | +--- 16 | dataD +--- è°ƒç”¨ï¼š\nint main( ) { D d; cout \u0026lt;\u0026lt; d.dataA \u0026lt;\u0026lt; endl; return 0; } è°ƒç”¨è¾“å‡ºï¼š\nStart prog.cc:29:15: error: non-static member \u0026#39;dataA\u0026#39; found in multiple base-class subobjects of type \u0026#39;A\u0026#39;: class D -\u0026gt; class B -\u0026gt; class A class D -\u0026gt; class C -\u0026gt; class A cout \u0026lt;\u0026lt; d.dataA \u0026lt;\u0026lt; endl; ^ prog.cc:9:9: note: member found by ambiguous name lookup int dataA; ^ 1 error generated. 1 Finish è™šç»§æ‰¿ï¼š\nclass A { public: int dataA; }; class B:virtual public A { public: int dataB; }; class C:virtual public A { public: int dataC; }; class D : public B, public C { public: int dataD; }; B ç±»è¾“å‡ºï¼š\nclass B size(12): +--- 0 | {vbptr} 4 | dataB +--- +--- (virtual base A) 8 | dataA +--- B::$vbtable@: 0 | 0 1 | 8 (Bd(B+0)A) vbi: class offset o.vbptr o.vbte fVtorDisp A 8 0 4 0 C ç±»è¾“å‡ºï¼š\nclass C size(12): +--- 0 | {vbptr} 4 | dataC +--- +--- (virtual base A) 8 | dataA +--- C::$vbtable@: 0 | 0 1 | 8 (Cd(C+0)A) vbi: class offset o.vbptr o.vbte fVtorDisp A 8 0 4 0 D ç±»è¾“å‡ºï¼š\nclass D size(24): +--- 0 | +--- (base class B) 0 | | {vbptr} 4 | | dataB | +--- 8 | +--- (base class C) 8 | | {vbptr} 12 | | dataC | +--- 16 | dataD +--- +--- (virtual base A) 20 | dataA +--- D::$vbtable@B@: 0 | 0 1 | 20 (Dd(B+0)A) D::$vbtable@C@: 0 | 0 1 | 12 (Dd(C+0)A) vbi: class offset o.vbptr o.vbte fVtorDisp A 20 0 4 0 ","permalink":"https://874656645.github.io/rick/posts/44-%E8%99%9A%E7%BB%A7%E6%89%BF%E5%92%8C%E8%99%9A%E5%9F%BA%E7%B1%BB/","summary":"è™šç»§æ‰¿å’Œè™šåŸºç±» å‚è€ƒ\n åœ¨C++ä¸­ï¼Œåœ¨å®šä¹‰å…¬å…±åŸºç±»Açš„æ´¾ç”Ÿç±»Bã€C\u0026hellip;çš„æ—¶å€™ï¼Œå¦‚æœåœ¨ç»§æ‰¿æ–¹å¼å‰ä½¿ç”¨å…³é”®å­—virtualå¯¹ç»§æ‰¿æ–¹å¼é™å®šï¼Œè¿™æ ·çš„ç»§æ‰¿æ–¹å¼å°±æ˜¯è™šæ‹Ÿç»§æ‰¿ï¼Œå…¬å…±åŸºç±»Aæˆä¸ºè™šåŸºç±»ã€‚è¿™æ ·ï¼Œåœ¨å…·æœ‰å…¬å…±åŸºç±»çš„ã€ä½¿ç”¨äº†è™šæ‹Ÿç»§æ‰¿æ–¹å¼çš„å¤šä¸ªæ´¾ç”Ÿç±»Bã€C\u0026hellip;çš„å…¬å…±æ´¾ç”Ÿç±»Dä¸­ï¼Œè¯¥åŸºç±»Açš„æˆå‘˜å°±åªæœ‰ä¸€ä»½æ‹·è´ ä¸€ä¸ªç±»æœ‰å¤šä¸ªåŸºç±»ï¼Œè¿™æ ·çš„ç»§æ‰¿å…³ç³»ç§°ä¸ºå¤šç»§æ‰¿ã€‚åœ¨å¤šç»§æ‰¿çš„æƒ…å†µä¸‹ï¼Œå¦‚æœä¸åŒåŸºç±»çš„æˆå‘˜åç§°ç›¸åŒï¼ŒåŒ¹é…åº¦ç›¸åŒ, åˆ™ä¼šé€ æˆäºŒä¹‰æ€§ã€‚ä¸ºäº†é¿å…å¤šç»§æ‰¿äº§ç”Ÿçš„äºŒä¹‰æ€§ï¼Œåœ¨è¿™ç§æœºåˆ¶ä¸‹ï¼Œä¸è®ºè™šåŸºç±»åœ¨ç»§æ‰¿ä½“ç³»ä¸­å‡ºç°äº†å¤šå°‘æ¬¡ï¼Œåœ¨æ´¾ç”Ÿç±»ä¸­éƒ½åªåŒ…å«ä¸€ä»½è™šåŸºç±»çš„æˆå‘˜ã€‚ ä¼šåœ¨è™šç»§æ‰¿çš„ç±»ä¸­ç”Ÿæˆä¸€ä¸ªæŒ‡å‘è™šåŸºç±»çš„æŒ‡é’ˆ {vbptr} ä¼šåœ¨å†…å­˜ä¸­ç”Ÿæˆä¸€ä¸ªè™šåŸºç±»è¡¨ D::$vbtable@B@  å¾®è½¯çš„Visual Studioæä¾›ç»™ç”¨æˆ·æ˜¾ç¤ºC++å¯¹è±¡åœ¨å†…å­˜ä¸­çš„å¸ƒå±€çš„é€‰é¡¹\ncl [filename].cpp /d1 reportSingleClassLayout[className]\nä¸€èˆ¬ç»§æ‰¿ï¼š\nclass A { public: int dataA; }; class B:public A { public: int dataB; }; class C:public A { public: int dataC; }; class D : public B, public C { public: int dataD; }; è¾“å‡ºï¼š\nclass D size(20): +--- 0 | +--- (base class B) 0 | | +--- (base class A) 0 | | | dataA | | +--- 4 | | dataB | +--- 8 | +--- (base class C) 8 | | +--- (base class A) 8 | | | dataA | | +--- 12 | | dataC | +--- 16 | dataD +--- è°ƒç”¨ï¼š","title":"è™šç»§æ‰¿å’Œè™šåŸºç±»"},{"content":"1. C++ å¤šæ€åˆ†ç±»åŠå®ç°  é‡è½½å¤šæ€ï¼ˆAd-hoc Polymorphismï¼Œç¼–è¯‘æœŸï¼‰ï¼šå‡½æ•°é‡è½½ã€è¿ç®—ç¬¦é‡è½½ï¼ˆé™æ€å¤šæ€ã€é™æ€ç¼–è¯‘ï¼‰ å­ç±»å¤šæ€ï¼ˆSubtype Polymorphismï¼Œè¿è¡ŒæœŸï¼‰ï¼šè™šå‡½æ•°ï¼ˆåŠ¨æ€å¤šæ€ã€åŠ¨æ€ç¼–è¯‘ï¼‰ å‚æ•°å¤šæ€ï¼ˆParametric Polymorphismï¼Œç¼–è¯‘æœŸï¼‰ï¼šç±»æ¨¡æ¿ï¼ˆæ³›å‹ï¼‰ã€å‡½æ•°æ¨¡æ¿ï¼ˆå‡½æ•°æŒ‡é’ˆï¼‰ å¼ºåˆ¶å¤šæ€ï¼ˆCoercion Polymorphismï¼Œç¼–è¯‘æœŸ/è¿è¡ŒæœŸï¼‰ï¼šåŸºæœ¬ç±»å‹è½¬æ¢ã€è‡ªå®šä¹‰ç±»å‹è½¬æ¢  2. è™šè¡¨æŒ‡é’ˆã€è™šå‡½æ•°æŒ‡é’ˆã€è™šå‡½æ•°è¡¨  è™šè¡¨æŒ‡é’ˆï¼šåœ¨å«æœ‰è™šå‡½æ•°çš„ç±»çš„å¯¹è±¡ä¸­ï¼ŒæŒ‡å‘è™šå‡½æ•°è¡¨çš„æŒ‡é’ˆï¼Œåœ¨è¿è¡Œæ—¶ç¡®å®š è™šå‡½æ•°æŒ‡é’ˆï¼šæŒ‡å‘è™šå‡½æ•°çš„åœ°å€çš„æŒ‡é’ˆ {vfptr} è™šå‡½æ•°è¡¨ï¼šåœ¨ç¨‹åºåªè¯»æ•°æ®æ®µï¼Œå­˜æ”¾è™šå‡½æ•°æŒ‡é’ˆï¼Œå¦‚æœæ´¾ç”Ÿç±»å®ç°äº†åŸºç±»çš„æŸä¸ªè™šå‡½æ•°ï¼Œåˆ™åœ¨è™šå‡½æ•°è¡¨ä¸­è¦†ç›–åŸæœ¬åŸºç±»çš„é‚£ä¸ªè™šå‡½æ•°æŒ‡é’ˆï¼Œåœ¨ç¼–è¯‘æ—¶æ ¹æ®ç±»çš„å£°æ˜åˆ›å»º Shape::$vftable@  class Shape { public: virtual ~Shape(){ cout \u0026lt;\u0026lt; \u0026#34;~Shape()\u0026#34; \u0026lt;\u0026lt; endl; } }; class Point { public: ~Point(){ cout \u0026lt;\u0026lt; \u0026#34;~Point()\u0026#34; \u0026lt;\u0026lt; endl; } private: int m_x{0}; int m_y{0}; char m_c; }; class Circle : public Shape { public: ~Circle(){ cout \u0026lt;\u0026lt; \u0026#34;~Circle()\u0026#34; \u0026lt;\u0026lt; endl; } private: Point m_p; }; int main( ) { // 8 ç±»ä¸­å­˜æœ‰æŒ‡å‘è™šå‡½æ•°è¡¨çš„æŒ‡é’ˆ  cout \u0026lt;\u0026lt; sizeof(Shape) \u0026lt;\u0026lt; endl; // 16 ç±»ä¸­å­˜æœ‰æŒ‡å‘è™šå‡½æ•°è¡¨çš„æŒ‡é’ˆ  // ä»¥åŠPointå¯¹è±¡çš„å¤§å°ï¼ˆæ­¤æ—¶Pointç±»ä¸­ä¸åŒ…å«ä»»ä½•å˜é‡ï¼‰ï¼Œè™½ç„¶çœŸå®å¤§å°æ˜¯ 8 + 1  // ä½†æ˜¯é¢å¤–å¤šçš„1ä¸ªå­—èŠ‚å¯¼è‡´å†…å­˜å¤§å°æ‰©å¢äº† 8(æ¯æ¬¡æ‰©å¢çš„æœ€å°æ•°å€¼æ˜¯8 \u0026lt;alignment member\u0026gt; (size=7))  cout \u0026lt;\u0026lt; sizeof(Circle) \u0026lt;\u0026lt; endl; // 8 ç±»ä¸­çš„intå 4ä¸ªå­—èŠ‚ï¼Œcharå 1ä¸ªå­—èŠ‚  // ä½†æ¯æ¬¡æ‰©å¢çš„æœ€å°æ•°å€¼æ˜¯4(\u0026lt;alignment member\u0026gt; (size=3))  cout \u0026lt;\u0026lt; sizeof(Point) \u0026lt;\u0026lt; endl; Circle c; return 0; } Start 8 24 12 ~Circle() ~Point() ~Shape() 0 Finish Shape ç±»\n// æ²¡æœ‰è™šå‡½æ•° class Shape size(1): +--- +--- // æœ‰è™šææ„å‡½æ•° class Shape size(8): +--- 0 | {vfptr} +--- Shape::$vftable@: | \u0026amp;Shape_meta | 0 0 | \u0026amp;Shape::{dtor} Shape::{dtor} this adjustor: 0 Shape::__delDtor this adjustor: 0 Shape::__vecDelDtor this adjustor: 0 Point ç±»\nclass Point size(8): +--- 0 | m_x 4 | m_y 8 | m_c | \u0026lt;alignment member\u0026gt; (size=3) +--- Circle ç±»\nclass Circle size(24): +--- 0 | +--- (base class Shape) 0 | | {vfptr} | +--- 8 | Point m_p | \u0026lt;alignment member\u0026gt; (size=4) +--- Circle::$vftable@: | \u0026amp;Circle_meta | 0 0 | \u0026amp;Circle::{dtor} Circle::{dtor} this adjustor: 0 Circle::__delDtor this adjustor: 0 Circle::__vecDelDtor this adjustor: 0 ","permalink":"https://874656645.github.io/rick/posts/43-%E5%A4%9A%E6%80%81%E6%80%BB%E7%BB%93/","summary":"1. C++ å¤šæ€åˆ†ç±»åŠå®ç°  é‡è½½å¤šæ€ï¼ˆAd-hoc Polymorphismï¼Œç¼–è¯‘æœŸï¼‰ï¼šå‡½æ•°é‡è½½ã€è¿ç®—ç¬¦é‡è½½ï¼ˆé™æ€å¤šæ€ã€é™æ€ç¼–è¯‘ï¼‰ å­ç±»å¤šæ€ï¼ˆSubtype Polymorphismï¼Œè¿è¡ŒæœŸï¼‰ï¼šè™šå‡½æ•°ï¼ˆåŠ¨æ€å¤šæ€ã€åŠ¨æ€ç¼–è¯‘ï¼‰ å‚æ•°å¤šæ€ï¼ˆParametric Polymorphismï¼Œç¼–è¯‘æœŸï¼‰ï¼šç±»æ¨¡æ¿ï¼ˆæ³›å‹ï¼‰ã€å‡½æ•°æ¨¡æ¿ï¼ˆå‡½æ•°æŒ‡é’ˆï¼‰ å¼ºåˆ¶å¤šæ€ï¼ˆCoercion Polymorphismï¼Œç¼–è¯‘æœŸ/è¿è¡ŒæœŸï¼‰ï¼šåŸºæœ¬ç±»å‹è½¬æ¢ã€è‡ªå®šä¹‰ç±»å‹è½¬æ¢  2. è™šè¡¨æŒ‡é’ˆã€è™šå‡½æ•°æŒ‡é’ˆã€è™šå‡½æ•°è¡¨  è™šè¡¨æŒ‡é’ˆï¼šåœ¨å«æœ‰è™šå‡½æ•°çš„ç±»çš„å¯¹è±¡ä¸­ï¼ŒæŒ‡å‘è™šå‡½æ•°è¡¨çš„æŒ‡é’ˆï¼Œåœ¨è¿è¡Œæ—¶ç¡®å®š è™šå‡½æ•°æŒ‡é’ˆï¼šæŒ‡å‘è™šå‡½æ•°çš„åœ°å€çš„æŒ‡é’ˆ {vfptr} è™šå‡½æ•°è¡¨ï¼šåœ¨ç¨‹åºåªè¯»æ•°æ®æ®µï¼Œå­˜æ”¾è™šå‡½æ•°æŒ‡é’ˆï¼Œå¦‚æœæ´¾ç”Ÿç±»å®ç°äº†åŸºç±»çš„æŸä¸ªè™šå‡½æ•°ï¼Œåˆ™åœ¨è™šå‡½æ•°è¡¨ä¸­è¦†ç›–åŸæœ¬åŸºç±»çš„é‚£ä¸ªè™šå‡½æ•°æŒ‡é’ˆï¼Œåœ¨ç¼–è¯‘æ—¶æ ¹æ®ç±»çš„å£°æ˜åˆ›å»º Shape::$vftable@  class Shape { public: virtual ~Shape(){ cout \u0026lt;\u0026lt; \u0026#34;~Shape()\u0026#34; \u0026lt;\u0026lt; endl; } }; class Point { public: ~Point(){ cout \u0026lt;\u0026lt; \u0026#34;~Point()\u0026#34; \u0026lt;\u0026lt; endl; } private: int m_x{0}; int m_y{0}; char m_c; }; class Circle : public Shape { public: ~Circle(){ cout \u0026lt;\u0026lt; \u0026#34;~Circle()\u0026#34; \u0026lt;\u0026lt; endl; } private: Point m_p; }; int main( ) { // 8 ç±»ä¸­å­˜æœ‰æŒ‡å‘è™šå‡½æ•°è¡¨çš„æŒ‡é’ˆ  cout \u0026lt;\u0026lt; sizeof(Shape) \u0026lt;\u0026lt; endl; // 16 ç±»ä¸­å­˜æœ‰æŒ‡å‘è™šå‡½æ•°è¡¨çš„æŒ‡é’ˆ  // ä»¥åŠPointå¯¹è±¡çš„å¤§å°ï¼ˆæ­¤æ—¶Pointç±»ä¸­ä¸åŒ…å«ä»»ä½•å˜é‡ï¼‰ï¼Œè™½ç„¶çœŸå®å¤§å°æ˜¯ 8 + 1  // ä½†æ˜¯é¢å¤–å¤šçš„1ä¸ªå­—èŠ‚å¯¼è‡´å†…å­˜å¤§å°æ‰©å¢äº† 8(æ¯æ¬¡æ‰©å¢çš„æœ€å°æ•°å€¼æ˜¯8 \u0026lt;alignment member\u0026gt; (size=7))  cout \u0026lt;\u0026lt; sizeof(Circle) \u0026lt;\u0026lt; endl; // 8 ç±»ä¸­çš„intå 4ä¸ªå­—èŠ‚ï¼Œcharå 1ä¸ªå­—èŠ‚  // ä½†æ¯æ¬¡æ‰©å¢çš„æœ€å°æ•°å€¼æ˜¯4(\u0026lt;alignment member\u0026gt; (size=3))  cout \u0026lt;\u0026lt; sizeof(Point) \u0026lt;\u0026lt; endl; Circle c; return 0; } Start 8 24 12 ~Circle() ~Point() ~Shape() 0 Finish Shape ç±»","title":"å¤šæ€æ€»ç»“"},{"content":"1. å‡½æ•°é»˜è®¤å‚æ•°å’Œå ä½å‚æ•°ï¼ˆäºšå…ƒï¼‰ å½¢å‚ä¸­çš„å ä½å‚æ•°åˆå«äºšå…ƒï¼Œå¹¶æ²¡æœ‰ä»€ä¹ˆå®é™…æ„ä¹‰ï¼Œåªåœ¨å‡½æ•°é‡è½½ä¸­èµ·åˆ°ä½œç”¨\n// äºšå…ƒï¼Œè®¾ç½®äº†é»˜è®¤å€¼æ‰€ä»¥è°ƒç”¨æ—¶å¯ä»¥ä¸ä¼ å‚æ•° // å¦åˆ™å°±å¿…é¡»ä¼ å…¥ä¸¤ä¸ªå‚æ•° void foo(int a, int = 0){ cout \u0026lt;\u0026lt; \u0026#34;a = \u0026#34; \u0026lt;\u0026lt; a \u0026lt;\u0026lt; endl; } int main() { foo(20); return 0; } 2. å‡½æ•°é‡è½½  å‡½æ•°åç›¸åŒï¼Œå½¢å‚åˆ—è¡¨ä¸åŒï¼ˆå½¢å‚ä¸ªæ•°ã€ç±»å‹ã€é¡ºåºï¼‰ å‡½æ•°è¿”å›å€¼ä¸èµ·ä½œç”¨ å‡½æ•°é‡è½½å’Œé»˜è®¤å‚æ•°ä¸è¦åŒæ—¶ä½¿ç”¨ï¼ˆå‡½æ•°è°ƒç”¨æ—¶å®¹æ˜“äº§ç”ŸäºŒä¹‰æ€§ï¼‰ å€¾è½§æŠ€æœ¯ï¼ˆname manglingï¼‰ï¼Œåº•å±‚ä¼šå°†å‡½æ•°åè¿›è¡Œç¼–è¯‘  ç”¨ v c i f l d è¡¨ç¤º void char int float long double åŠå…¶å¼•ç”¨ int fun(int) =\u0026gt; fun_i\nint fun(int, char, double) =\u0026gt; fun_icd   é‡è½½å‡½æ•°åŒ¹é…é¡ºåº  å¦‚æœèƒ½å¤Ÿä¸¥æ ¼åŒ¹é…ï¼Œåˆ™è°ƒç”¨å®Œå…¨åŒ¹é…çš„ å¦‚æœæ²¡æœ‰å®Œå…¨åŒ¹é…çš„ï¼Œåˆ™è°ƒç”¨éšå¼è½¬æ¢çš„ éƒ½åŒ¹é…ä¸ä¸Šï¼Œç¼–è¯‘å¤±è´¥    3. å‡½æ•°æŒ‡é’ˆ int test(int a, int b){ cout \u0026lt;\u0026lt; \u0026#34;test(\u0026#34; \u0026lt;\u0026lt; a \u0026lt;\u0026lt; \u0026#34;, \u0026#34; \u0026lt;\u0026lt; b \u0026lt;\u0026lt; \u0026#34;)\u0026#34; \u0026lt;\u0026lt; endl; return 0; } // æ–¹å¼ä¸€ï¼š typedef int(FUN)(int, int); // æ–¹å¼äºŒï¼š typedef int(*FUN_P)(int, int); int main() { // æ–¹å¼ä¸€ï¼š  FUN *f1 = NULL; f1 = test; f1(10, 20); (*f1)(10, 20); // æ–¹å¼äºŒï¼š  FUN_P f2 = NULL; f2 = test; f2(10, 20); // æ–¹å¼ä¸‰ï¼š  int (*f3)(int, int) = NULL; f3 = test; f3(10, 20); return 0; } è¾“å‡ºï¼š\nStart test(10, 20) test(10, 20) test(10, 20) test(10, 20) 0 Finish ","permalink":"https://874656645.github.io/rick/posts/42-%E5%87%BD%E6%95%B0%E9%BB%98%E8%AE%A4%E5%8F%82%E6%95%B0%E5%92%8C%E5%8D%A0%E4%BD%8D%E5%8F%82%E6%95%B0/","summary":"1. å‡½æ•°é»˜è®¤å‚æ•°å’Œå ä½å‚æ•°ï¼ˆäºšå…ƒï¼‰ å½¢å‚ä¸­çš„å ä½å‚æ•°åˆå«äºšå…ƒï¼Œå¹¶æ²¡æœ‰ä»€ä¹ˆå®é™…æ„ä¹‰ï¼Œåªåœ¨å‡½æ•°é‡è½½ä¸­èµ·åˆ°ä½œç”¨\n// äºšå…ƒï¼Œè®¾ç½®äº†é»˜è®¤å€¼æ‰€ä»¥è°ƒç”¨æ—¶å¯ä»¥ä¸ä¼ å‚æ•° // å¦åˆ™å°±å¿…é¡»ä¼ å…¥ä¸¤ä¸ªå‚æ•° void foo(int a, int = 0){ cout \u0026lt;\u0026lt; \u0026#34;a = \u0026#34; \u0026lt;\u0026lt; a \u0026lt;\u0026lt; endl; } int main() { foo(20); return 0; } 2. å‡½æ•°é‡è½½  å‡½æ•°åç›¸åŒï¼Œå½¢å‚åˆ—è¡¨ä¸åŒï¼ˆå½¢å‚ä¸ªæ•°ã€ç±»å‹ã€é¡ºåºï¼‰ å‡½æ•°è¿”å›å€¼ä¸èµ·ä½œç”¨ å‡½æ•°é‡è½½å’Œé»˜è®¤å‚æ•°ä¸è¦åŒæ—¶ä½¿ç”¨ï¼ˆå‡½æ•°è°ƒç”¨æ—¶å®¹æ˜“äº§ç”ŸäºŒä¹‰æ€§ï¼‰ å€¾è½§æŠ€æœ¯ï¼ˆname manglingï¼‰ï¼Œåº•å±‚ä¼šå°†å‡½æ•°åè¿›è¡Œç¼–è¯‘  ç”¨ v c i f l d è¡¨ç¤º void char int float long double åŠå…¶å¼•ç”¨ int fun(int) =\u0026gt; fun_i\nint fun(int, char, double) =\u0026gt; fun_icd   é‡è½½å‡½æ•°åŒ¹é…é¡ºåº  å¦‚æœèƒ½å¤Ÿä¸¥æ ¼åŒ¹é…ï¼Œåˆ™è°ƒç”¨å®Œå…¨åŒ¹é…çš„ å¦‚æœæ²¡æœ‰å®Œå…¨åŒ¹é…çš„ï¼Œåˆ™è°ƒç”¨éšå¼è½¬æ¢çš„ éƒ½åŒ¹é…ä¸ä¸Šï¼Œç¼–è¯‘å¤±è´¥    3.","title":"å‡½æ•°é»˜è®¤å‚æ•°å’Œå ä½å‚æ•°"},{"content":"","permalink":"https://874656645.github.io/rick/posts/41-%E5%86%85%E5%AD%98%E5%8C%BA%E9%97%B4%E5%88%92%E5%88%86/","summary":"","title":"å†…å­˜åŒºé—´åˆ’åˆ†"},{"content":" æŒ‡é’ˆä¹Ÿæ˜¯ä¸€ç§å˜é‡ï¼Œä½œä¸ºå‡½æ•°å½¢å‚å’Œè¿”å›å€¼çš„æ—¶å€™ä¹Ÿæ˜¯å€¼æ‹·è´ï¼ˆæ‹·è´çš„æ˜¯ä¸€ä¸ªåœ°å€ï¼‰ ä½¿ç”¨æŒ‡é’ˆå¼•ç”¨çš„æ–¹å¼ï¼Œä»£ç æ›´åŠ ç®€æ´ï¼Œé€»è¾‘æ›´åŠ æ¸…æ™° é‡Šæ”¾æ‰æŒ‡é’ˆæŒ‡å‘çš„ç©ºé—´åï¼Œä¸€å®šè®°å¾—æŠŠæŒ‡é’ˆç½®ç©º å£°æ˜æŒ‡é’ˆæ—¶å°±è¿›è¡Œåˆå§‹åŒ–æˆ–å°†å…¶æŒ‡å‘ NULL æ˜¯ä¸ªå¥½ä¹ æƒ¯  æŒ‡é’ˆå€¼æ‹·è´ï¼š\nvoid test(int * a){ a = new int(20); //*a = 20;  cout \u0026lt;\u0026lt; \u0026#34;test point a = \u0026#34; \u0026lt;\u0026lt; \u0026amp;a \u0026lt;\u0026lt; endl; cout \u0026lt;\u0026lt; \u0026#34;test:\u0026#34; \u0026lt;\u0026lt; a \u0026lt;\u0026lt; \u0026#34;\\ta = \u0026#34; \u0026lt;\u0026lt; *a \u0026lt;\u0026lt; endl; } int main() { int *a = new int(10); cout \u0026lt;\u0026lt; \u0026#34;main point a = \u0026#34; \u0026lt;\u0026lt; \u0026amp;a \u0026lt;\u0026lt; endl; cout \u0026lt;\u0026lt; \u0026#34;main:\u0026#34; \u0026lt;\u0026lt; a \u0026lt;\u0026lt; \u0026#34;\\ta = \u0026#34; \u0026lt;\u0026lt; *a \u0026lt;\u0026lt; endl; test(a); cout \u0026lt;\u0026lt; \u0026#34;main:\u0026#34; \u0026lt;\u0026lt; a \u0026lt;\u0026lt; \u0026#34;\\ta = \u0026#34; \u0026lt;\u0026lt; *a \u0026lt;\u0026lt; endl; return 0; } è¾“å‡ºï¼š\nStart main point a = 0x7ffea2597be0 main:0x195d010\ta = 10 test point a = 0x7ffea2597ba8 test:0x195e040\ta = 20 main:0x195d010\ta = 10 0 Finish struct teacher{ char name[64]; int id; }; // æ–¹å¼ä¸€ï¼š // å¦‚æœæƒ³è¦åœ¨å‡½æ•°å†…éƒ¨å®ç°æŒ‡é’ˆå†…å­˜åˆ†é… // å°±åªèƒ½ç”¨äºŒçº§æŒ‡é’ˆçš„å½¢å‚ int getTT(struct teacher ** tpp){ struct teacher *tp = (struct teacher *)malloc(sizeof(struct teacher)); if(tp == NULL){ return -1; } tp-\u0026gt;id = 100; strcpy(tp-\u0026gt;name, \u0026#34;zhang3\u0026#34;); *tpp = tp; return 0; } // å¦‚æœæ˜¯æƒ³é‡Šæ”¾æŒ‡é’ˆï¼Œä¹Ÿå¯ä»¥ç”¨ä¸€çº§æŒ‡é’ˆ void freeTT(struct teacher **tpp){ if(tpp == NULL){ return; } if(*tpp != NULL){ free(*tpp); *tpp = NULL; } } void freeTT(struct teacher *tpp){ if(tpp == NULL){ return; } if(tpp != NULL){ free(tpp); // æ­¤å¤„çš„tppæ˜¯ä¸€ä¸ªæŒ‡é’ˆå¤æœ¬ï¼Œç½®ç©ºæ²¡æœ‰æ•ˆæœ  // æ‰€ä»¥åªèƒ½åœ¨å¤–éƒ¨å°†æŒ‡é’ˆç½®ç©º  tpp = NULL; } } // æ–¹å¼äºŒï¼š // æŒ‡é’ˆå¼•ç”¨çš„æ–¹å¼ï¼Œæ›´åŠ ç®€æ´ int getT(struct teacher *\u0026amp; tp){ tp = (struct teacher *)malloc(sizeof(struct teacher)); if(tp == NULL){ return -1; } tp-\u0026gt;id = 100; strcpy(tp-\u0026gt;name, \u0026#34;zhang3\u0026#34;); return 0; } void freeT(struct teacher *\u0026amp; tp){ if(tp == NULL){ return; } free(tp); tp = NULL; } int main() { struct teacher *tp = NULL; // 1ã€åˆ©ç”¨äºŒçº§æŒ‡é’ˆ  //getTT(\u0026amp;tp);  // 2ã€åˆ©ç”¨æŒ‡é’ˆå¼•ç”¨  getT(tp); cout \u0026lt;\u0026lt; tp-\u0026gt;id \u0026lt;\u0026lt; endl; cout \u0026lt;\u0026lt; tp-\u0026gt;name \u0026lt;\u0026lt; endl; //freeTT(\u0026amp;tp);  freeT(tp); cout \u0026lt;\u0026lt; \u0026#34;==========================\u0026#34; \u0026lt;\u0026lt; endl; if(tp == NULL){ cout \u0026lt;\u0026lt; \u0026#34;free ok\u0026#34; \u0026lt;\u0026lt; endl; return 0; } cout \u0026lt;\u0026lt; tp-\u0026gt;id \u0026lt;\u0026lt; endl; cout \u0026lt;\u0026lt; tp-\u0026gt;name \u0026lt;\u0026lt; endl; return 0; } è¾“å‡ºï¼š\nStart 100 zhang3 ========================== free ok 0 Finish ","permalink":"https://874656645.github.io/rick/posts/40-%E6%8C%87%E9%92%88%E5%BC%95%E7%94%A8/","summary":"æŒ‡é’ˆä¹Ÿæ˜¯ä¸€ç§å˜é‡ï¼Œä½œä¸ºå‡½æ•°å½¢å‚å’Œè¿”å›å€¼çš„æ—¶å€™ä¹Ÿæ˜¯å€¼æ‹·è´ï¼ˆæ‹·è´çš„æ˜¯ä¸€ä¸ªåœ°å€ï¼‰ ä½¿ç”¨æŒ‡é’ˆå¼•ç”¨çš„æ–¹å¼ï¼Œä»£ç æ›´åŠ ç®€æ´ï¼Œé€»è¾‘æ›´åŠ æ¸…æ™° é‡Šæ”¾æ‰æŒ‡é’ˆæŒ‡å‘çš„ç©ºé—´åï¼Œä¸€å®šè®°å¾—æŠŠæŒ‡é’ˆç½®ç©º å£°æ˜æŒ‡é’ˆæ—¶å°±è¿›è¡Œåˆå§‹åŒ–æˆ–å°†å…¶æŒ‡å‘ NULL æ˜¯ä¸ªå¥½ä¹ æƒ¯  æŒ‡é’ˆå€¼æ‹·è´ï¼š\nvoid test(int * a){ a = new int(20); //*a = 20;  cout \u0026lt;\u0026lt; \u0026#34;test point a = \u0026#34; \u0026lt;\u0026lt; \u0026amp;a \u0026lt;\u0026lt; endl; cout \u0026lt;\u0026lt; \u0026#34;test:\u0026#34; \u0026lt;\u0026lt; a \u0026lt;\u0026lt; \u0026#34;\\ta = \u0026#34; \u0026lt;\u0026lt; *a \u0026lt;\u0026lt; endl; } int main() { int *a = new int(10); cout \u0026lt;\u0026lt; \u0026#34;main point a = \u0026#34; \u0026lt;\u0026lt; \u0026amp;a \u0026lt;\u0026lt; endl; cout \u0026lt;\u0026lt; \u0026#34;main:\u0026#34; \u0026lt;\u0026lt; a \u0026lt;\u0026lt; \u0026#34;\\ta = \u0026#34; \u0026lt;\u0026lt; *a \u0026lt;\u0026lt; endl; test(a); cout \u0026lt;\u0026lt; \u0026#34;main:\u0026#34; \u0026lt;\u0026lt; a \u0026lt;\u0026lt; \u0026#34;\\ta = \u0026#34; \u0026lt;\u0026lt; *a \u0026lt;\u0026lt; endl; return 0; } è¾“å‡ºï¼š","title":"æŒ‡é’ˆå¼•ç”¨"},{"content":"ä¸€ã€æŠ½è±¡ã€å°è£… æ•°æ®æŠ½è±¡ï¼šæ˜¯ä¸€ç§ä»…å‘ç”¨æˆ·æš´éœ²æ¥å£è€ŒæŠŠå…·ä½“çš„å®ç°ç»†èŠ‚éšè—èµ·æ¥çš„æœºåˆ¶ï¼Œæ˜¯ä¸€ç§ä¾èµ–äºæ¥å£å®ç°åˆ†ç¦»çš„è®¾è®¡æŠ€æœ¯\næ•°æ®å°è£…ï¼šæ˜¯ä¸€ç§æŠŠæ•°æ®å’Œæ“ä½œæ•°æ®çš„å‡½æ•°æ†ç»‘åœ¨ä¸€èµ·çš„æœºåˆ¶\n1. å¥½å¤„  ç±»çš„å†…éƒ¨å—åˆ°ä¿æŠ¤ï¼Œä¸ä¼šå› æ— æ„çš„ç”¨æˆ·çº§é”™è¯¯å¯¼è‡´å¯¹è±¡çŠ¶æ€å—æŸ ç±»å®ç°å¯èƒ½éšç€æ—¶é—´çš„æ¨ç§»è€Œå‘ç”Ÿå˜åŒ–ï¼Œæ•°æ®æŠ½è±¡å¯ä»¥æ›´å¥½çš„åº”å¯¹ä¸æ–­å˜åŒ–çš„éœ€æ±‚  2. ç­–ç•¥  é€šå¸¸æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬éƒ½ä¼šè®¾ç½®ç±»æˆå‘˜çŠ¶æ€ä¸ºç§æœ‰ï¼ˆprivateï¼‰ï¼Œé™¤éæˆ‘ä»¬çœŸçš„éœ€è¦å°†å…¶æš´éœ²ï¼Œè¿™æ ·æ‰èƒ½ä¿è¯è‰¯å¥½çš„å°è£…æ€§ã€‚ æŠ½è±¡æŠŠä»£ç åˆ†ç¦»ä¸ºæ¥å£å’Œå®ç°ã€‚æ‰€ä»¥åœ¨è®¾è®¡ç»„ä»¶æ—¶ï¼Œå¿…é¡»ä¿æŒæ¥å£ç‹¬ç«‹äºå®ç°ï¼Œè¿™æ ·ï¼Œå¦‚æœæ”¹å˜åº•å±‚å®ç°ï¼Œæ¥å£ä¹Ÿå°†ä¿æŒä¸å˜ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä¸ç®¡ä»»ä½•ç¨‹åºä½¿ç”¨æ¥å£ï¼Œæ¥å£éƒ½ä¸ä¼šå—åˆ°å½±å“ï¼Œåªéœ€è¦å°†æœ€æ–°çš„å®ç°é‡æ–°ç¼–è¯‘å³å¯  3. æ¥å£ æ¥å£æè¿°äº†ç±»çš„è¡Œä¸ºå’ŒåŠŸèƒ½ï¼Œè€Œä¸éœ€è¦å®Œæˆç±»çš„ç‰¹å®šå®ç°ã€‚å¦‚æœç±»ä¸­è‡³å°‘æœ‰ä¸€ä¸ªå‡½æ•°è¢«å£°æ˜ä¸ºçº¯è™šå‡½æ•°ï¼Œåˆ™è¿™ä¸ªç±»å°±æ˜¯æŠ½è±¡ç±»\nè®¾è®¡æŠ½è±¡ç±»ï¼ˆé€šå¸¸ç§°ä¸º ABCï¼‰çš„ç›®çš„ï¼Œæ˜¯ä¸ºäº†ç»™å…¶ä»–ç±»æä¾›ä¸€ä¸ªå¯ä»¥ç»§æ‰¿çš„é€‚å½“çš„åŸºç±»ã€‚æŠ½è±¡ç±»ä¸èƒ½è¢«ç”¨äºå®ä¾‹åŒ–å¯¹è±¡ï¼Œå®ƒåªèƒ½ä½œä¸ºæ¥å£ä½¿ç”¨ã€‚å› æ­¤ï¼Œå¦‚æœä¸€ä¸ª ABC çš„å­ç±»éœ€è¦è¢«å®ä¾‹åŒ–ï¼Œåˆ™å¿…é¡»å®ç°æ¯ä¸ªè™šå‡½æ•°ï¼Œå¦‚æœæ²¡æœ‰åœ¨æ´¾ç”Ÿç±»ä¸­é‡å†™çº¯è™šå‡½æ•°ï¼Œå°±å°è¯•å®ä¾‹åŒ–è¯¥ç±»çš„å¯¹è±¡ï¼Œä¼šå¯¼è‡´ç¼–è¯‘é”™è¯¯ã€‚\nå¯ç”¨äºå®ä¾‹åŒ–å¯¹è±¡çš„ç±»è¢«ç§°ä¸ºå…·ä½“ç±»\næ¥å£çš„å¥½å¤„å®ç°äº†è§£è€¦åˆçš„ä½œç”¨ã€‚ å¯ä»¥å°†è½¯ä»¶æ¶æ„åˆ†ä¸ºä¸šåŠ¡é€»è¾‘å±‚ã€æŠ½è±¡å±‚å’Œå®ç°å±‚\näºŒã€ç»§æ‰¿ ç»§æ‰¿ä»£è¡¨äº† is a å…³ç³»ã€‚ä¾‹å¦‚ï¼Œå“ºä¹³åŠ¨ç‰©æ˜¯åŠ¨ç‰©ï¼Œç‹—æ˜¯å“ºä¹³åŠ¨ç‰©ï¼Œå› æ­¤ï¼Œç‹—æ˜¯åŠ¨ç‰©ï¼Œç­‰ç­‰ã€‚ä¸€ä¸ªç±»å¯ä»¥æ´¾ç”Ÿè‡ªå¤šä¸ªç±»ï¼Œè¿™æ„å‘³ç€ï¼Œå®ƒå¯ä»¥ä»å¤šä¸ªåŸºç±»ç»§æ‰¿æ•°æ®å’Œå‡½æ•°ã€‚ç±»æ´¾ç”Ÿåˆ—è¡¨ä»¥ä¸€ä¸ªæˆ–å¤šä¸ªåŸºç±»å‘½å\næ´¾ç”Ÿç±»å¯ä»¥è®¿é—®åŸºç±»ä¸­æ‰€æœ‰çš„éç§æœ‰æˆå‘˜ï¼ŒåŒæ—¶ï¼Œä¸€ä¸ªæ´¾ç”Ÿç±»ç»§æ‰¿äº†æ‰€æœ‰çš„åŸºç±»æ–¹æ³•ï¼Œä½†ä¸‹åˆ—æƒ…å†µé™¤å¤–ï¼š\n åŸºç±»çš„æ„é€ å‡½æ•°ã€ææ„å‡½æ•°å’Œæ‹·è´æ„é€ å‡½æ•° åŸºç±»çš„é‡è½½è¿ç®—ç¬¦ åŸºç±»çš„å‹å…ƒå‡½æ•°  ä¸‰ã€å¤šæ€ è™šå‡½æ•°ï¼šè™šå‡½æ•°æ˜¯åœ¨åŸºç±»ä¸­ä½¿ç”¨å…³é”®å­— virtual å£°æ˜çš„å‡½æ•°ã€‚åœ¨æ´¾ç”Ÿç±»ä¸­é‡æ–°å®šä¹‰åŸºç±»ä¸­å®šä¹‰çš„è™šå‡½æ•°æ—¶ï¼Œä¼šå‘Šè¯‰ç¼–è¯‘å™¨ä¸è¦é™æ€é“¾ç¼–åˆ°è¯¥å‡½æ•°ã€‚æˆ‘ä»¬æƒ³è¦çš„æ˜¯åœ¨ç¨‹åºä¸­ä»»æ„ç‚¹å¯ä»¥æ ¹æ®æ‰€è°ƒç”¨çš„å¯¹è±¡ç±»å‹æ¥é€‰æ‹©è°ƒç”¨çš„å‡½æ•°ï¼Œè¿™ç§æ“ä½œè¢«ç§°ä¸ºåŠ¨æ€é“¾ç¼–ï¼Œæˆ–åæœŸç»‘å®šã€‚\n å¤šæ€æ„å‘³ç€è°ƒç”¨æˆå‘˜å‡½æ•°æ—¶ï¼Œä¼šæ ¹æ®è°ƒç”¨å‡½æ•°çš„å¯¹è±¡çš„ç±»å‹æ¥æ‰§è¡Œä¸åŒçš„å‡½æ•° ä¸€èˆ¬è¦å°†çˆ¶ç±»çš„ææ„å‡½æ•°è®¾ç½®ä¸ºè™šå‡½æ•°ï¼Œå¦‚æœä¸æŠŠçˆ¶ç±»çš„ææ„å‡½æ•°è®¾ç½®ä¸ºè™šå‡½æ•°ï¼Œåœ¨ delete çˆ¶ç±»æŒ‡é’ˆæ—¶å°±ä¸ä¼šè°ƒç”¨å­ç±»çš„ææ„äº† ç±»ææ„é¡ºåºï¼š1ï¼‰æ´¾ç”Ÿç±»æœ¬èº«çš„ææ„å‡½æ•°ï¼›2ï¼‰å¯¹è±¡æˆå‘˜ææ„å‡½æ•°ï¼›3ï¼‰åŸºç±»ææ„å‡½æ•° è‹¥åœ¨åŸºç±»ä¸­ä¸èƒ½å¯¹è™šå‡½æ•°ç»™å‡ºæœ‰æ„ä¹‰çš„å®ç°ï¼Œè¿™ä¸ªæ—¶å€™å°±ä¼šç”¨åˆ°çº¯è™šå‡½æ•°ï¼Œåœ¨å‡½æ•°å‚æ•°åç›´æ¥åŠ  = 0 å‘Šè¯‰ç¼–è¯‘å™¨ï¼Œå‡½æ•°æ²¡æœ‰ä¸»ä½“ï¼Œè¿™ç§è™šå‡½æ•°å³æ˜¯çº¯è™šå‡½æ•°  æµ‹è¯•ç±»ï¼š\n// åŸºç±» Shape class Shape { protected: int width, height; public: Shape(int a = 0, int b = 0) { width = a; height = b; } virtual ~Shape() { cout \u0026lt;\u0026lt; \u0026#34;Shape destructor\u0026#34; \u0026lt;\u0026lt; endl; } // pure virtual function  virtual int area() = 0; }; // åŸºç±» PaintCost class PaintCost { public: int getCost(int area) { auto res = area * 70; cout \u0026lt;\u0026lt; \u0026#34;PaintCost: \u0026#34; \u0026lt;\u0026lt; res \u0026lt;\u0026lt; endl; return res; } }; class Rectangle: public Shape, public PaintCost { public: Rectangle(int a = 0, int b = 0):Shape(a, b) { } ~Rectangle() { cout \u0026lt;\u0026lt; \u0026#34;Rectangle destructor\u0026#34; \u0026lt;\u0026lt; endl; } void printPro() { // è®¿é—®çˆ¶ç±»çš„æˆå‘˜å˜é‡ï¼ˆä¸èƒ½è®¿é—®çˆ¶ç±»çš„ç§æœ‰æˆå‘˜ï¼‰  cout \u0026lt;\u0026lt; \u0026#34;width: \u0026#34; \u0026lt;\u0026lt; width \u0026lt;\u0026lt; \u0026#34;\\theight: \u0026#34; \u0026lt;\u0026lt; height \u0026lt;\u0026lt; endl; } int area () { auto area = width * height; cout \u0026lt;\u0026lt; \u0026#34;Rectangle class area: \u0026#34; \u0026lt;\u0026lt; area \u0026lt;\u0026lt;endl; return area; } }; class Triangle: public Shape { public: Triangle(int a = 0, int b = 0):Shape(a, b) { } ~Triangle() { cout \u0026lt;\u0026lt; \u0026#34;Triangle destructor\u0026#34; \u0026lt;\u0026lt; endl; } int area () { auto area = width * height / 2; cout \u0026lt;\u0026lt; \u0026#34;Triangle class area: \u0026#34; \u0026lt;\u0026lt; area \u0026lt;\u0026lt;endl; return area; } }; å¤šç»§æ‰¿ï¼š\nint main() { Rectangle rec(10, 20); rec.printPro(); // è°ƒç”¨çˆ¶ç±»å‡½æ•°  rec.getCost(10); return 0; } è¾“å‡ºï¼š\nStart width: 10\theight: 20 PaintCost: 700 Rectangle destructor Shape destructor 0 Finish å¤šæ€ï¼š\nint main() { Shape *shape = new Rectangle(10, 7); Triangle tri(10,5); shape-\u0026gt;area(); //Rectangle class area  delete shape; shape = \u0026amp;tri; shape-\u0026gt;area(); //Triangle class area  // delete shape; // è¿™ç§æŒ‡é’ˆä¸èƒ½ delete  return 0; } è¾“å‡ºï¼š\nStart Rectangle class area: 70 Rectangle destructor Shape destructor Triangle class area: 25 Triangle destructor Shape destructor 0 Finish å®ç°å¤šæ€çš„åŸå› ï¼š å¦‚æœçˆ¶ç±»æœ‰ virtual æ–¹æ³•ï¼Œç¼–è¯‘å™¨ä¼šåˆ›å»ºä¸€ä¸ªè™šå‡½æ•°è¡¨ï¼ˆåœ¨åªè¯»åŒºï¼‰ï¼ŒåŒæ—¶ä¼šåœ¨ç±»ä¸­å­˜å‚¨ä¸€ä¸ªæŒ‡å‘è™šå‡½æ•°è¡¨çš„æŒ‡é’ˆ VPTRï¼Œè¿™ä¸ªè¡¨ä¹Ÿä¼šè¢«å­ç±»ç»§æ‰¿ï¼Œå¦‚æœå­ç±»ä¸­é‡å†™äº†çˆ¶ç±»çš„è™šå‡½æ•°ï¼Œå°±ä¼šåœ¨å­ç±»ä¸­è¦†ç›–æ‰€ç»§æ‰¿çš„è™šå‡½æ•°è¡¨ä¸­çš„å‡½æ•°\nè™šå‡½æ•°è¡¨æŒ‡é’ˆæ˜¯åˆ†æ­¥åˆå§‹åŒ–çš„ï¼Œåœ¨æ„å»ºçˆ¶ç±»æ—¶æŒ‡å‘çš„è¿˜æ˜¯çˆ¶ç±»çš„è™šå‡½æ•°è¡¨\nclass A{ public: A(){ cout \u0026lt;\u0026lt; \u0026#34;A()...\u0026#34; \u0026lt;\u0026lt; endl; print(); } virtual ~A(){ cout \u0026lt;\u0026lt; \u0026#34;~A()...\u0026#34; \u0026lt;\u0026lt; endl; print(); } virtual void print(){ cout \u0026lt;\u0026lt; \u0026#34;A\u0026#34; \u0026lt;\u0026lt; endl; } }; class B : public A{ public: B(){ cout \u0026lt;\u0026lt; \u0026#34;B()...\u0026#34; \u0026lt;\u0026lt; endl; print(); } ~B(){ cout \u0026lt;\u0026lt; \u0026#34;~B()...\u0026#34; \u0026lt;\u0026lt; endl; print(); } virtual void print(){ cout \u0026lt;\u0026lt; \u0026#34;B\u0026#34; \u0026lt;\u0026lt; endl; } }; int main() { A *a = new B; delete a; return 0; } è¾“å‡ºï¼š\nA()... A B()... B ~B()... B ~A()... A ","permalink":"https://874656645.github.io/rick/posts/39-%E6%8A%BD%E8%B1%A1%E5%B0%81%E8%A3%85%E7%BB%A7%E6%89%BF%E5%A4%9A%E6%80%81/","summary":"ä¸€ã€æŠ½è±¡ã€å°è£… æ•°æ®æŠ½è±¡ï¼šæ˜¯ä¸€ç§ä»…å‘ç”¨æˆ·æš´éœ²æ¥å£è€ŒæŠŠå…·ä½“çš„å®ç°ç»†èŠ‚éšè—èµ·æ¥çš„æœºåˆ¶ï¼Œæ˜¯ä¸€ç§ä¾èµ–äºæ¥å£å®ç°åˆ†ç¦»çš„è®¾è®¡æŠ€æœ¯\næ•°æ®å°è£…ï¼šæ˜¯ä¸€ç§æŠŠæ•°æ®å’Œæ“ä½œæ•°æ®çš„å‡½æ•°æ†ç»‘åœ¨ä¸€èµ·çš„æœºåˆ¶\n1. å¥½å¤„  ç±»çš„å†…éƒ¨å—åˆ°ä¿æŠ¤ï¼Œä¸ä¼šå› æ— æ„çš„ç”¨æˆ·çº§é”™è¯¯å¯¼è‡´å¯¹è±¡çŠ¶æ€å—æŸ ç±»å®ç°å¯èƒ½éšç€æ—¶é—´çš„æ¨ç§»è€Œå‘ç”Ÿå˜åŒ–ï¼Œæ•°æ®æŠ½è±¡å¯ä»¥æ›´å¥½çš„åº”å¯¹ä¸æ–­å˜åŒ–çš„éœ€æ±‚  2. ç­–ç•¥  é€šå¸¸æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬éƒ½ä¼šè®¾ç½®ç±»æˆå‘˜çŠ¶æ€ä¸ºç§æœ‰ï¼ˆprivateï¼‰ï¼Œé™¤éæˆ‘ä»¬çœŸçš„éœ€è¦å°†å…¶æš´éœ²ï¼Œè¿™æ ·æ‰èƒ½ä¿è¯è‰¯å¥½çš„å°è£…æ€§ã€‚ æŠ½è±¡æŠŠä»£ç åˆ†ç¦»ä¸ºæ¥å£å’Œå®ç°ã€‚æ‰€ä»¥åœ¨è®¾è®¡ç»„ä»¶æ—¶ï¼Œå¿…é¡»ä¿æŒæ¥å£ç‹¬ç«‹äºå®ç°ï¼Œè¿™æ ·ï¼Œå¦‚æœæ”¹å˜åº•å±‚å®ç°ï¼Œæ¥å£ä¹Ÿå°†ä¿æŒä¸å˜ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä¸ç®¡ä»»ä½•ç¨‹åºä½¿ç”¨æ¥å£ï¼Œæ¥å£éƒ½ä¸ä¼šå—åˆ°å½±å“ï¼Œåªéœ€è¦å°†æœ€æ–°çš„å®ç°é‡æ–°ç¼–è¯‘å³å¯  3. æ¥å£ æ¥å£æè¿°äº†ç±»çš„è¡Œä¸ºå’ŒåŠŸèƒ½ï¼Œè€Œä¸éœ€è¦å®Œæˆç±»çš„ç‰¹å®šå®ç°ã€‚å¦‚æœç±»ä¸­è‡³å°‘æœ‰ä¸€ä¸ªå‡½æ•°è¢«å£°æ˜ä¸ºçº¯è™šå‡½æ•°ï¼Œåˆ™è¿™ä¸ªç±»å°±æ˜¯æŠ½è±¡ç±»\nè®¾è®¡æŠ½è±¡ç±»ï¼ˆé€šå¸¸ç§°ä¸º ABCï¼‰çš„ç›®çš„ï¼Œæ˜¯ä¸ºäº†ç»™å…¶ä»–ç±»æä¾›ä¸€ä¸ªå¯ä»¥ç»§æ‰¿çš„é€‚å½“çš„åŸºç±»ã€‚æŠ½è±¡ç±»ä¸èƒ½è¢«ç”¨äºå®ä¾‹åŒ–å¯¹è±¡ï¼Œå®ƒåªèƒ½ä½œä¸ºæ¥å£ä½¿ç”¨ã€‚å› æ­¤ï¼Œå¦‚æœä¸€ä¸ª ABC çš„å­ç±»éœ€è¦è¢«å®ä¾‹åŒ–ï¼Œåˆ™å¿…é¡»å®ç°æ¯ä¸ªè™šå‡½æ•°ï¼Œå¦‚æœæ²¡æœ‰åœ¨æ´¾ç”Ÿç±»ä¸­é‡å†™çº¯è™šå‡½æ•°ï¼Œå°±å°è¯•å®ä¾‹åŒ–è¯¥ç±»çš„å¯¹è±¡ï¼Œä¼šå¯¼è‡´ç¼–è¯‘é”™è¯¯ã€‚\nå¯ç”¨äºå®ä¾‹åŒ–å¯¹è±¡çš„ç±»è¢«ç§°ä¸ºå…·ä½“ç±»\næ¥å£çš„å¥½å¤„å®ç°äº†è§£è€¦åˆçš„ä½œç”¨ã€‚ å¯ä»¥å°†è½¯ä»¶æ¶æ„åˆ†ä¸ºä¸šåŠ¡é€»è¾‘å±‚ã€æŠ½è±¡å±‚å’Œå®ç°å±‚\näºŒã€ç»§æ‰¿ ç»§æ‰¿ä»£è¡¨äº† is a å…³ç³»ã€‚ä¾‹å¦‚ï¼Œå“ºä¹³åŠ¨ç‰©æ˜¯åŠ¨ç‰©ï¼Œç‹—æ˜¯å“ºä¹³åŠ¨ç‰©ï¼Œå› æ­¤ï¼Œç‹—æ˜¯åŠ¨ç‰©ï¼Œç­‰ç­‰ã€‚ä¸€ä¸ªç±»å¯ä»¥æ´¾ç”Ÿè‡ªå¤šä¸ªç±»ï¼Œè¿™æ„å‘³ç€ï¼Œå®ƒå¯ä»¥ä»å¤šä¸ªåŸºç±»ç»§æ‰¿æ•°æ®å’Œå‡½æ•°ã€‚ç±»æ´¾ç”Ÿåˆ—è¡¨ä»¥ä¸€ä¸ªæˆ–å¤šä¸ªåŸºç±»å‘½å\næ´¾ç”Ÿç±»å¯ä»¥è®¿é—®åŸºç±»ä¸­æ‰€æœ‰çš„éç§æœ‰æˆå‘˜ï¼ŒåŒæ—¶ï¼Œä¸€ä¸ªæ´¾ç”Ÿç±»ç»§æ‰¿äº†æ‰€æœ‰çš„åŸºç±»æ–¹æ³•ï¼Œä½†ä¸‹åˆ—æƒ…å†µé™¤å¤–ï¼š\n åŸºç±»çš„æ„é€ å‡½æ•°ã€ææ„å‡½æ•°å’Œæ‹·è´æ„é€ å‡½æ•° åŸºç±»çš„é‡è½½è¿ç®—ç¬¦ åŸºç±»çš„å‹å…ƒå‡½æ•°  ä¸‰ã€å¤šæ€ è™šå‡½æ•°ï¼šè™šå‡½æ•°æ˜¯åœ¨åŸºç±»ä¸­ä½¿ç”¨å…³é”®å­— virtual å£°æ˜çš„å‡½æ•°ã€‚åœ¨æ´¾ç”Ÿç±»ä¸­é‡æ–°å®šä¹‰åŸºç±»ä¸­å®šä¹‰çš„è™šå‡½æ•°æ—¶ï¼Œä¼šå‘Šè¯‰ç¼–è¯‘å™¨ä¸è¦é™æ€é“¾ç¼–åˆ°è¯¥å‡½æ•°ã€‚æˆ‘ä»¬æƒ³è¦çš„æ˜¯åœ¨ç¨‹åºä¸­ä»»æ„ç‚¹å¯ä»¥æ ¹æ®æ‰€è°ƒç”¨çš„å¯¹è±¡ç±»å‹æ¥é€‰æ‹©è°ƒç”¨çš„å‡½æ•°ï¼Œè¿™ç§æ“ä½œè¢«ç§°ä¸ºåŠ¨æ€é“¾ç¼–ï¼Œæˆ–åæœŸç»‘å®šã€‚\n å¤šæ€æ„å‘³ç€è°ƒç”¨æˆå‘˜å‡½æ•°æ—¶ï¼Œä¼šæ ¹æ®è°ƒç”¨å‡½æ•°çš„å¯¹è±¡çš„ç±»å‹æ¥æ‰§è¡Œä¸åŒçš„å‡½æ•° ä¸€èˆ¬è¦å°†çˆ¶ç±»çš„ææ„å‡½æ•°è®¾ç½®ä¸ºè™šå‡½æ•°ï¼Œå¦‚æœä¸æŠŠçˆ¶ç±»çš„ææ„å‡½æ•°è®¾ç½®ä¸ºè™šå‡½æ•°ï¼Œåœ¨ delete çˆ¶ç±»æŒ‡é’ˆæ—¶å°±ä¸ä¼šè°ƒç”¨å­ç±»çš„ææ„äº† ç±»ææ„é¡ºåºï¼š1ï¼‰æ´¾ç”Ÿç±»æœ¬èº«çš„ææ„å‡½æ•°ï¼›2ï¼‰å¯¹è±¡æˆå‘˜ææ„å‡½æ•°ï¼›3ï¼‰åŸºç±»ææ„å‡½æ•° è‹¥åœ¨åŸºç±»ä¸­ä¸èƒ½å¯¹è™šå‡½æ•°ç»™å‡ºæœ‰æ„ä¹‰çš„å®ç°ï¼Œè¿™ä¸ªæ—¶å€™å°±ä¼šç”¨åˆ°çº¯è™šå‡½æ•°ï¼Œåœ¨å‡½æ•°å‚æ•°åç›´æ¥åŠ  = 0 å‘Šè¯‰ç¼–è¯‘å™¨ï¼Œå‡½æ•°æ²¡æœ‰ä¸»ä½“ï¼Œè¿™ç§è™šå‡½æ•°å³æ˜¯çº¯è™šå‡½æ•°  æµ‹è¯•ç±»ï¼š\n// åŸºç±» Shape class Shape { protected: int width, height; public: Shape(int a = 0, int b = 0) { width = a; height = b; } virtual ~Shape() { cout \u0026lt;\u0026lt; \u0026#34;Shape destructor\u0026#34; \u0026lt;\u0026lt; endl; } // pure virtual function  virtual int area() = 0; }; // åŸºç±» PaintCost class PaintCost { public: int getCost(int area) { auto res = area * 70; cout \u0026lt;\u0026lt; \u0026#34;PaintCost: \u0026#34; \u0026lt;\u0026lt; res \u0026lt;\u0026lt; endl; return res; } }; class Rectangle: public Shape, public PaintCost { public: Rectangle(int a = 0, int b = 0):Shape(a, b) { } ~Rectangle() { cout \u0026lt;\u0026lt; \u0026#34;Rectangle destructor\u0026#34; \u0026lt;\u0026lt; endl; } void printPro() { // è®¿é—®çˆ¶ç±»çš„æˆå‘˜å˜é‡ï¼ˆä¸èƒ½è®¿é—®çˆ¶ç±»çš„ç§æœ‰æˆå‘˜ï¼‰  cout \u0026lt;\u0026lt; \u0026#34;width: \u0026#34; \u0026lt;\u0026lt; width \u0026lt;\u0026lt; \u0026#34;\\theight: \u0026#34; \u0026lt;\u0026lt; height \u0026lt;\u0026lt; endl; } int area () { auto area = width * height; cout \u0026lt;\u0026lt; \u0026#34;Rectangle class area: \u0026#34; \u0026lt;\u0026lt; area \u0026lt;\u0026lt;endl; return area; } }; class Triangle: public Shape { public: Triangle(int a = 0, int b = 0):Shape(a, b) { } ~Triangle() { cout \u0026lt;\u0026lt; \u0026#34;Triangle destructor\u0026#34; \u0026lt;\u0026lt; endl; } int area () { auto area = width * height / 2; cout \u0026lt;\u0026lt; \u0026#34;Triangle class area: \u0026#34; \u0026lt;\u0026lt; area \u0026lt;\u0026lt;endl; return area; } }; å¤šç»§æ‰¿ï¼š","title":"æŠ½è±¡ã€å°è£…ã€ç»§æ‰¿ã€å¤šæ€"},{"content":" ä½¿ç”¨ static å…³é”®å­—æ¥æŠŠç±»æˆå‘˜å®šä¹‰ä¸ºé™æ€çš„ã€‚é™æ€æˆå‘˜åœ¨ç±»çš„æ‰€æœ‰å¯¹è±¡ä¸­æ˜¯å…±äº«çš„ï¼Œå½“æˆ‘ä»¬å£°æ˜ç±»çš„æˆå‘˜ä¸ºé™æ€æ—¶ï¼Œè¿™æ„å‘³ç€æ— è®ºåˆ›å»ºå¤šå°‘ä¸ªç±»çš„å¯¹è±¡ï¼Œé™æ€æˆå‘˜éƒ½åªæœ‰ä¸€ä¸ªå‰¯æœ¬ å¦‚æœä¸å­˜åœ¨å…¶ä»–çš„åˆå§‹åŒ–è¯­å¥ï¼Œåœ¨åˆ›å»ºç¬¬ä¸€ä¸ªå¯¹è±¡æ—¶ï¼Œæ‰€æœ‰çš„é™æ€æ•°æ®éƒ½ä¼šè¢«åˆå§‹åŒ–ä¸ºé›¶ ä¸èƒ½æŠŠé™æ€æˆå‘˜çš„åˆå§‹åŒ–æ”¾ç½®åœ¨ç±»çš„å®šä¹‰ä¸­ï¼Œä½†æ˜¯å¯ä»¥åœ¨ç±»çš„å¤–éƒ¨é€šè¿‡ä½¿ç”¨èŒƒå›´è§£æè¿ç®—ç¬¦ :: æ¥é‡æ–°å£°æ˜é™æ€å˜é‡ä»è€Œå¯¹å®ƒè¿›è¡Œåˆå§‹åŒ– å¦‚æœæŠŠå‡½æ•°æˆå‘˜å£°æ˜ä¸ºé™æ€çš„ï¼Œå°±å¯ä»¥æŠŠå‡½æ•°ä¸ç±»çš„ä»»ä½•ç‰¹å®šå¯¹è±¡ç‹¬ç«‹å¼€æ¥ã€‚é™æ€æˆå‘˜å‡½æ•°å³ä½¿åœ¨ç±»å¯¹è±¡ä¸å­˜åœ¨çš„æƒ…å†µä¸‹ä¹Ÿèƒ½è¢«è°ƒç”¨ï¼Œé™æ€å‡½æ•°åªè¦ä½¿ç”¨ç±»ååŠ èŒƒå›´è§£æè¿ç®—ç¬¦ :: å°±å¯ä»¥è®¿é—® é™æ€æˆå‘˜å‡½æ•°æ²¡æœ‰ this æŒ‡é’ˆï¼Œåªèƒ½è®¿é—®é™æ€æˆå‘˜ï¼ˆåŒ…æ‹¬é™æ€æˆå‘˜å˜é‡å’Œé™æ€æˆå‘˜å‡½æ•°ï¼‰ æ™®é€šæˆå‘˜å‡½æ•°æœ‰ this æŒ‡é’ˆï¼Œå¯ä»¥è®¿é—®ç±»ä¸­çš„ä»»æ„æˆå‘˜ï¼›  class A { string name {\u0026#34;C++\u0026#34;}; int id {1024}; static int objCount; public: A(); friend void printA(const A \u0026amp;a); void printA(); static void printC(); }; // é™æ€æˆå‘˜ç±»å¤–åˆå§‹åŒ– int A::objCount = 0; A::A(){ objCount++; } void A::printA(){ cout \u0026lt;\u0026lt; \u0026#34;objCount = \u0026#34; \u0026lt;\u0026lt; this-\u0026gt;objCount \u0026lt;\u0026lt; \u0026#34;\\tname = \u0026#34; \u0026lt;\u0026lt; this-\u0026gt;name \u0026lt;\u0026lt; \u0026#34;\\tid = \u0026#34; \u0026lt;\u0026lt; this-\u0026gt;id \u0026lt;\u0026lt; endl; } void A::printC(){ // é™æ€å‡½æ•°å†…æ²¡æœ‰thisæŒ‡é’ˆ  cout \u0026lt;\u0026lt; \u0026#34;objCount = \u0026#34; \u0026lt;\u0026lt; objCount \u0026lt;\u0026lt; endl; // error: \u0026#39;this\u0026#39; is unavailable for static member functions  // cout \u0026lt;\u0026lt; \u0026#34;objCount = \u0026#34; \u0026lt;\u0026lt; this-\u0026gt;objCount \u0026lt;\u0026lt; endl; } void printA(const A \u0026amp;a){ cout \u0026lt;\u0026lt; \u0026#34;objCount = \u0026#34; \u0026lt;\u0026lt; a.objCount \u0026lt;\u0026lt; \u0026#34;\\tname = \u0026#34; \u0026lt;\u0026lt; a.name \u0026lt;\u0026lt; \u0026#34;\\tid = \u0026#34; \u0026lt;\u0026lt; a.id \u0026lt;\u0026lt; endl; } int main() { // ç±»é™æ€æˆå‘˜å‡½æ•°  A::printC(); // å‹å‘˜å‡½æ•°  A a; printA(a); // æˆå‘˜å‡½æ•°  A b; b.printA(); return 0; } è¾“å‡ºï¼š\nStart objCount = 0 objCount = 1\tname = C++\tid = 1024 objCount = 2\tname = C++\tid = 1024 0 Finish ","permalink":"https://874656645.github.io/rick/posts/38-%E7%B1%BB%E7%9A%84%E9%9D%99%E6%80%81%E6%88%90%E5%91%98/","summary":"ä½¿ç”¨ static å…³é”®å­—æ¥æŠŠç±»æˆå‘˜å®šä¹‰ä¸ºé™æ€çš„ã€‚é™æ€æˆå‘˜åœ¨ç±»çš„æ‰€æœ‰å¯¹è±¡ä¸­æ˜¯å…±äº«çš„ï¼Œå½“æˆ‘ä»¬å£°æ˜ç±»çš„æˆå‘˜ä¸ºé™æ€æ—¶ï¼Œè¿™æ„å‘³ç€æ— è®ºåˆ›å»ºå¤šå°‘ä¸ªç±»çš„å¯¹è±¡ï¼Œé™æ€æˆå‘˜éƒ½åªæœ‰ä¸€ä¸ªå‰¯æœ¬ å¦‚æœä¸å­˜åœ¨å…¶ä»–çš„åˆå§‹åŒ–è¯­å¥ï¼Œåœ¨åˆ›å»ºç¬¬ä¸€ä¸ªå¯¹è±¡æ—¶ï¼Œæ‰€æœ‰çš„é™æ€æ•°æ®éƒ½ä¼šè¢«åˆå§‹åŒ–ä¸ºé›¶ ä¸èƒ½æŠŠé™æ€æˆå‘˜çš„åˆå§‹åŒ–æ”¾ç½®åœ¨ç±»çš„å®šä¹‰ä¸­ï¼Œä½†æ˜¯å¯ä»¥åœ¨ç±»çš„å¤–éƒ¨é€šè¿‡ä½¿ç”¨èŒƒå›´è§£æè¿ç®—ç¬¦ :: æ¥é‡æ–°å£°æ˜é™æ€å˜é‡ä»è€Œå¯¹å®ƒè¿›è¡Œåˆå§‹åŒ– å¦‚æœæŠŠå‡½æ•°æˆå‘˜å£°æ˜ä¸ºé™æ€çš„ï¼Œå°±å¯ä»¥æŠŠå‡½æ•°ä¸ç±»çš„ä»»ä½•ç‰¹å®šå¯¹è±¡ç‹¬ç«‹å¼€æ¥ã€‚é™æ€æˆå‘˜å‡½æ•°å³ä½¿åœ¨ç±»å¯¹è±¡ä¸å­˜åœ¨çš„æƒ…å†µä¸‹ä¹Ÿèƒ½è¢«è°ƒç”¨ï¼Œé™æ€å‡½æ•°åªè¦ä½¿ç”¨ç±»ååŠ èŒƒå›´è§£æè¿ç®—ç¬¦ :: å°±å¯ä»¥è®¿é—® é™æ€æˆå‘˜å‡½æ•°æ²¡æœ‰ this æŒ‡é’ˆï¼Œåªèƒ½è®¿é—®é™æ€æˆå‘˜ï¼ˆåŒ…æ‹¬é™æ€æˆå‘˜å˜é‡å’Œé™æ€æˆå‘˜å‡½æ•°ï¼‰ æ™®é€šæˆå‘˜å‡½æ•°æœ‰ this æŒ‡é’ˆï¼Œå¯ä»¥è®¿é—®ç±»ä¸­çš„ä»»æ„æˆå‘˜ï¼›  class A { string name {\u0026#34;C++\u0026#34;}; int id {1024}; static int objCount; public: A(); friend void printA(const A \u0026amp;a); void printA(); static void printC(); }; // é™æ€æˆå‘˜ç±»å¤–åˆå§‹åŒ– int A::objCount = 0; A::A(){ objCount++; } void A::printA(){ cout \u0026lt;\u0026lt; \u0026#34;objCount = \u0026#34; \u0026lt;\u0026lt; this-\u0026gt;objCount \u0026lt;\u0026lt; \u0026#34;\\tname = \u0026#34; \u0026lt;\u0026lt; this-\u0026gt;name \u0026lt;\u0026lt; \u0026#34;\\tid = \u0026#34; \u0026lt;\u0026lt; this-\u0026gt;id \u0026lt;\u0026lt; endl; } void A::printC(){ // é™æ€å‡½æ•°å†…æ²¡æœ‰thisæŒ‡é’ˆ  cout \u0026lt;\u0026lt; \u0026#34;objCount = \u0026#34; \u0026lt;\u0026lt; objCount \u0026lt;\u0026lt; endl; // error: \u0026#39;this\u0026#39; is unavailable for static member functions  // cout \u0026lt;\u0026lt; \u0026#34;objCount = \u0026#34; \u0026lt;\u0026lt; this-\u0026gt;objCount \u0026lt;\u0026lt; endl; } void printA(const A \u0026amp;a){ cout \u0026lt;\u0026lt; \u0026#34;objCount = \u0026#34; \u0026lt;\u0026lt; a.","title":"ç±»çš„é™æ€æˆå‘˜"},{"content":"  å‹å…ƒåˆ©å¼Šï¼š\nå‹å…ƒä¸æ˜¯ç±»çš„æˆå‘˜ä½†èƒ½è®¿é—®ç±»ä¸­çš„ç§æœ‰æˆå‘˜ã€‚å‹å…ƒçš„ä½œç”¨åœ¨äºæé«˜ç¨‹åºçš„è¿è¡Œæ•ˆç‡ï¼Œä½†ä¹Ÿç ´åäº†ç±»çš„å°è£…ã€‚\n  æ³¨æ„äº‹é¡¹ï¼š\nï¼ˆ1ï¼‰å‹å…ƒå…³ç³»ä¸èƒ½è¢«ç»§æ‰¿ï¼›\nï¼ˆ2ï¼‰å‹å…ƒå…³ç³»æ˜¯å•å‘çš„ï¼Œä¸å…·æœ‰äº¤æ¢æ€§ï¼›\nï¼ˆ3ï¼‰å‹å…ƒå…³ç³»ä¸å…·æœ‰ä¼ é€’æ€§ï¼›\n  ä¸€ã€å‹å…ƒå‡½æ•°  ç±»çš„å‹å…ƒå‡½æ•°æ˜¯å®šä¹‰åœ¨ç±»å¤–éƒ¨ï¼Œä½†æœ‰æƒè®¿é—®ç±»çš„æ‰€æœ‰ç§æœ‰ï¼ˆprivateï¼‰æˆå‘˜å’Œä¿æŠ¤ï¼ˆprotectedï¼‰æˆå‘˜ å°½ç®¡å‹å…ƒå‡½æ•°çš„åŸå‹æœ‰åœ¨ç±»çš„å®šä¹‰ä¸­å‡ºç°è¿‡ï¼Œä½†æ˜¯ å‹å…ƒå‡½æ•°å¹¶ä¸æ˜¯æˆå‘˜å‡½æ•° this æŒ‡é’ˆæ˜¯æ‰€æœ‰æˆå‘˜å‡½æ•°çš„éšå«å‚æ•°ã€‚å› æ­¤ï¼Œåœ¨æˆå‘˜å‡½æ•°å†…éƒ¨ï¼Œå®ƒå¯ä»¥ç”¨æ¥æŒ‡å‘è°ƒç”¨å¯¹è±¡ å‹å…ƒå‡½æ•°æ²¡æœ‰ this æŒ‡é’ˆï¼Œå› ä¸ºå‹å…ƒä¸æ˜¯ç±»çš„æˆå‘˜ã€‚åªæœ‰æˆå‘˜å‡½æ•°æ‰æœ‰ this æŒ‡é’ˆ  1. å‹å…ƒå‡½æ•°æ˜¯å…¨å±€å‡½æ•°\nclass A { friend void printA(const A \u0026amp;a); public: void printA(); private: string name {\u0026#34;C++\u0026#34;}; int id {1024}; }; void A::printA(){ cout \u0026lt;\u0026lt; \u0026#34;name = \u0026#34; \u0026lt;\u0026lt; this-\u0026gt;name \u0026lt;\u0026lt; \u0026#34;\\tid = \u0026#34; \u0026lt;\u0026lt; this-\u0026gt;id \u0026lt;\u0026lt; endl; } // è¯·æ³¨æ„ï¼šprintA() ä¸æ˜¯ä»»ä½•ç±»çš„æˆå‘˜å‡½æ•° void printA(const A \u0026amp;a){ cout \u0026lt;\u0026lt; \u0026#34;name = \u0026#34; \u0026lt;\u0026lt; a.name \u0026lt;\u0026lt; \u0026#34;\\tid = \u0026#34; \u0026lt;\u0026lt; a.id \u0026lt;\u0026lt; endl; } int main() { A a; printA(a); a.printA(); return 0; } è¾“å‡ºï¼š\nStart name = C++\tid = 1024 name = C++\tid = 1024 0 Finish 2. å‹å…ƒå‡½æ•°æ˜¯ç±»çš„æˆå‘˜æ–¹æ³•\nå°æŠ€å·§ï¼šä¸ºäº†é˜²æ­¢ç›¸äº’åµŒå¥—ï¼Œå¯ä»¥å°†å…¶ä¸­ä¸€ä¸ªç±»çš„å£°æ˜å’Œå®ç°æ‹†å¼€\nclass Point; class PointManager{ public: double getDistance(Point \u0026amp;p1, Point \u0026amp;p2); private: }; class Point{ friend double PointManager::getDistance(Point \u0026amp;p1, Point \u0026amp;p2); public: Point(int x, int y){ this-\u0026gt;x = x; this-\u0026gt;y = y; } private: int x; int y; }; double PointManager::getDistance(Point \u0026amp;p1, Point \u0026amp;p2){ int dx = p1.x - p2.x; int dy = p1.y - p2.y; return sqrt(dx * dx + dy * dy); } int main( ) { Point p1(1, 1), p2(3, 1); PointManager pm; cout \u0026lt;\u0026lt; pm.getDistance(p1, p2) \u0026lt;\u0026lt; endl; return 0; } è¾“å‡ºï¼š\nStart 2 0 Finish äºŒã€å‹å…ƒç±» class A{ friend class B; // å°† B å£°æ˜ä¸ºå‹å…ƒç±»åï¼Œåœ¨ B ä¸­ A å°±æ˜¯é€æ˜çš„ public: A(int a){ this-\u0026gt;a = a; } void printA(){ cout \u0026lt;\u0026lt; \u0026#34;a = \u0026#34; \u0026lt;\u0026lt; this-\u0026gt;a \u0026lt;\u0026lt; endl; } private: int a; }; class B{ public: B(int b){ this-\u0026gt;b = b; } void printB(){ A a(10); cout \u0026lt;\u0026lt; \u0026#34;print a in b: \u0026#34; \u0026lt;\u0026lt; a.a \u0026lt;\u0026lt; endl; cout \u0026lt;\u0026lt; \u0026#34;b = \u0026#34; \u0026lt;\u0026lt; this-\u0026gt;b \u0026lt;\u0026lt; endl; } private: int b; }; int main( ) { B b(-10); b.printB(); return 0; } Start print a in b: 10 b = -10 0 Finish ","permalink":"https://874656645.github.io/rick/posts/37-%E5%8F%8B%E5%85%83%E5%87%BD%E6%95%B0%E4%B8%8E%E5%8F%8B%E5%85%83%E7%B1%BB/","summary":"å‹å…ƒåˆ©å¼Šï¼š\nå‹å…ƒä¸æ˜¯ç±»çš„æˆå‘˜ä½†èƒ½è®¿é—®ç±»ä¸­çš„ç§æœ‰æˆå‘˜ã€‚å‹å…ƒçš„ä½œç”¨åœ¨äºæé«˜ç¨‹åºçš„è¿è¡Œæ•ˆç‡ï¼Œä½†ä¹Ÿç ´åäº†ç±»çš„å°è£…ã€‚\n  æ³¨æ„äº‹é¡¹ï¼š\nï¼ˆ1ï¼‰å‹å…ƒå…³ç³»ä¸èƒ½è¢«ç»§æ‰¿ï¼›\nï¼ˆ2ï¼‰å‹å…ƒå…³ç³»æ˜¯å•å‘çš„ï¼Œä¸å…·æœ‰äº¤æ¢æ€§ï¼›\nï¼ˆ3ï¼‰å‹å…ƒå…³ç³»ä¸å…·æœ‰ä¼ é€’æ€§ï¼›\n  ä¸€ã€å‹å…ƒå‡½æ•°  ç±»çš„å‹å…ƒå‡½æ•°æ˜¯å®šä¹‰åœ¨ç±»å¤–éƒ¨ï¼Œä½†æœ‰æƒè®¿é—®ç±»çš„æ‰€æœ‰ç§æœ‰ï¼ˆprivateï¼‰æˆå‘˜å’Œä¿æŠ¤ï¼ˆprotectedï¼‰æˆå‘˜ å°½ç®¡å‹å…ƒå‡½æ•°çš„åŸå‹æœ‰åœ¨ç±»çš„å®šä¹‰ä¸­å‡ºç°è¿‡ï¼Œä½†æ˜¯ å‹å…ƒå‡½æ•°å¹¶ä¸æ˜¯æˆå‘˜å‡½æ•° this æŒ‡é’ˆæ˜¯æ‰€æœ‰æˆå‘˜å‡½æ•°çš„éšå«å‚æ•°ã€‚å› æ­¤ï¼Œåœ¨æˆå‘˜å‡½æ•°å†…éƒ¨ï¼Œå®ƒå¯ä»¥ç”¨æ¥æŒ‡å‘è°ƒç”¨å¯¹è±¡ å‹å…ƒå‡½æ•°æ²¡æœ‰ this æŒ‡é’ˆï¼Œå› ä¸ºå‹å…ƒä¸æ˜¯ç±»çš„æˆå‘˜ã€‚åªæœ‰æˆå‘˜å‡½æ•°æ‰æœ‰ this æŒ‡é’ˆ  1. å‹å…ƒå‡½æ•°æ˜¯å…¨å±€å‡½æ•°\nclass A { friend void printA(const A \u0026amp;a); public: void printA(); private: string name {\u0026#34;C++\u0026#34;}; int id {1024}; }; void A::printA(){ cout \u0026lt;\u0026lt; \u0026#34;name = \u0026#34; \u0026lt;\u0026lt; this-\u0026gt;name \u0026lt;\u0026lt; \u0026#34;\\tid = \u0026#34; \u0026lt;\u0026lt; this-\u0026gt;id \u0026lt;\u0026lt; endl; } // è¯·æ³¨æ„ï¼šprintA() ä¸æ˜¯ä»»ä½•ç±»çš„æˆå‘˜å‡½æ•° void printA(const A \u0026amp;a){ cout \u0026lt;\u0026lt; \u0026#34;name = \u0026#34; \u0026lt;\u0026lt; a.","title":"å‹å…ƒå‡½æ•°ä¸å‹å…ƒç±»"},{"content":"ç»“è®ºï¼š\n æ‹·è´æ„é€ å‡½æ•°æ˜¯å‡½æ•°ï¼Œèµ‹å€¼è¿ç®—ç¬¦æ˜¯è¿ç®—ç¬¦çš„é‡è½½ï¼› æ‹·è´æ„é€ å‡½æ•°ä¼šç”Ÿæˆæ–°çš„ç±»å¯¹è±¡ï¼Œèµ‹å€¼è¿ç®—ç¬¦ä¸ä¼šï¼› æ‹·è´æ„é€ å‡½æ•°æ˜¯ç”¨ä¸€ä¸ªå·²å­˜åœ¨çš„å¯¹è±¡å»æ„é€ ä¸€ä¸ªä¸å­˜åœ¨çš„å¯¹è±¡ï¼›è€Œèµ‹å€¼è¿ç®—ç¬¦é‡è½½å‡½æ•°æ˜¯ç”¨ä¸€ä¸ªå­˜åœ¨çš„å¯¹è±¡å»ç»™å¦ä¸€ä¸ªå·²å­˜åœ¨å¹¶åˆå§‹åŒ–è¿‡çš„å¯¹è±¡è¿›è¡Œèµ‹å€¼; è‹¥æ¥å—è¿”å›å€¼çš„å¯¹è±¡å·²ç»åˆå§‹åŒ–è¿‡ï¼Œåˆ™ä¼šè°ƒç”¨èµ‹å€¼æ„é€ å‡½æ•°ï¼Œä¸”è¯¥å¯¹è±¡è¿˜ä¼šè°ƒç”¨ææ„å‡½æ•°ï¼Œå½“å¯¹è±¡ä¸­åŒ…å«æŒ‡é’ˆæ—¶ï¼Œä¼šä½¿è¯¥æŒ‡é’ˆå¤±æ•ˆï¼Œå› æ­¤éœ€è¦é‡è½½èµ‹å€¼æ„é€ å‡½æ•°ï¼Œä½¿ç”¨ç±»ä¼¼æ·±æ‹·è´æˆ–ç§»åŠ¨æ„é€ å‡½æ•°çš„æ–¹æ³•èµ‹å€¼ï¼Œæ‰èƒ½é¿å…æŒ‡é’ˆå¤±æ•ˆã€‚ å½“æ²¡æœ‰æ˜¾å¼çš„æ„é€ å‡½æ•°å’Œæ‹·è´æ„é€ æ—¶ï¼Œç³»ç»Ÿæ‰ä¼šæä¾›é»˜è®¤çš„æ— å‚æ„é€   æˆå‘˜åˆå§‹åŒ–åˆ—è¡¨  ä½¿ç”¨åˆå§‹åŒ–åˆ—è¡¨ï¼Œå°‘äº†ä¸€æ¬¡è°ƒç”¨é»˜è®¤æ„é€ å‡½æ•°çš„è¿‡ç¨‹ï¼Œæé«˜æ•ˆç‡ å¸¸é‡æˆå‘˜ï¼Œå› ä¸ºå¸¸é‡åªèƒ½åˆå§‹åŒ–ä¸èƒ½èµ‹å€¼ï¼Œæ‰€ä»¥å¿…é¡»æ”¾åœ¨åˆå§‹åŒ–åˆ—è¡¨é‡Œé¢ å¼•ç”¨ç±»å‹ï¼Œå¼•ç”¨å¿…é¡»åœ¨å®šä¹‰çš„æ—¶å€™åˆå§‹åŒ–ï¼Œå¹¶ä¸”ä¸èƒ½é‡æ–°èµ‹å€¼ï¼Œæ‰€ä»¥ä¹Ÿè¦å†™åœ¨åˆå§‹åŒ–åˆ—è¡¨é‡Œé¢ æˆå‘˜å˜é‡åˆå§‹åŒ–çš„é¡ºåºè·Ÿåœ¨åˆå§‹åŒ–åˆ—è¡¨çš„é¡ºåºæ— å…³ï¼Œä¸å˜é‡å£°æ˜çš„é¡ºåºæœ‰å…³  æµ‹è¯•ç±» class A { public: A(){ cout \u0026lt;\u0026lt; \u0026#34;default constructor\u0026#34; \u0026lt;\u0026lt; endl; cout \u0026lt;\u0026lt; \u0026#34;adrres: \u0026#34; \u0026lt;\u0026lt; this \u0026lt;\u0026lt; \u0026#34;\\tpoint x: \u0026#34; \u0026lt;\u0026lt; x \u0026lt;\u0026lt; \u0026#34;\\ty: \u0026#34; \u0026lt;\u0026lt; y \u0026lt;\u0026lt; endl; } A(int t){ x = new int(0); y = t; cout \u0026lt;\u0026lt; \u0026#34;second constructor\u0026#34; \u0026lt;\u0026lt; endl; cout \u0026lt;\u0026lt; \u0026#34;adrres: \u0026#34; \u0026lt;\u0026lt; this \u0026lt;\u0026lt; \u0026#34;\\tpoint x: \u0026#34; \u0026lt;\u0026lt; x \u0026lt;\u0026lt; \u0026#34;\\ty: \u0026#34; \u0026lt;\u0026lt; y \u0026lt;\u0026lt; endl; } A(const A \u0026amp;a){ cout \u0026lt;\u0026lt; \u0026#34;const copy constructor\u0026#34; \u0026lt;\u0026lt; endl; cout \u0026lt;\u0026lt; \u0026#34;adrres: \u0026#34; \u0026lt;\u0026lt; this \u0026lt;\u0026lt; \u0026#34;\\tpoint x: \u0026#34; \u0026lt;\u0026lt; x \u0026lt;\u0026lt; \u0026#34;\\ty: \u0026#34; \u0026lt;\u0026lt; y \u0026lt;\u0026lt; endl; this-\u0026gt;x = a.x; this-\u0026gt;y = a.y; } A\u0026amp; operator = (const A \u0026amp;a){ cout \u0026lt;\u0026lt; \u0026#34;const assignment constructor\u0026#34; \u0026lt;\u0026lt; endl; this-\u0026gt;x = a.x; this-\u0026gt;y = a.y; return *this; } ~A(){ cout \u0026lt;\u0026lt; \u0026#34;destructor delete \u0026#34; \u0026lt;\u0026lt; this \u0026lt;\u0026lt; endl; delete x; } public: int * x {nullptr}; int y{0}; }; A f(){ A ret(3); cout \u0026lt;\u0026lt; \u0026#34;stack f adrres: \u0026#34; \u0026lt;\u0026lt; \u0026amp;ret \u0026lt;\u0026lt; \u0026#34;\\tpoint x: \u0026#34; \u0026lt;\u0026lt; ret.x \u0026lt;\u0026lt; \u0026#34;\\ty: \u0026#34; \u0026lt;\u0026lt; ret.y \u0026lt;\u0026lt; endl; return ret; } // åŒ¿åå¯¹è±¡ = ret (æ­¤å¤„ä¼šè°ƒç”¨æ‹·è´æ„é€ ) ä¸€ã€æ‹·è´æ„é€  1. å¯¹è±¡éœ€è¦é€šè¿‡å¦å¤–ä¸€ä¸ªå¯¹è±¡è¿›è¡Œåˆå§‹åŒ– int main() { A a(1); A c = a; cout \u0026lt;\u0026lt; \u0026#34;global adrres: \u0026#34; \u0026lt;\u0026lt; \u0026amp;c \u0026lt;\u0026lt; \u0026#34;\\tpoint x: \u0026#34; \u0026lt;\u0026lt; c.x \u0026lt;\u0026lt; \u0026#34;\\ty: \u0026#34; \u0026lt;\u0026lt; c.y \u0026lt;\u0026lt; endl; return 0; } è¾“å‡ºï¼š\nStart second constructor adrres: 0x7ffdf2cf5cc0\tpoint x: 0x1e9db20\ty: 1 const copy constructor adrres: 0x7ffdf2cf5cb0\tpoint x: 0\ty: 0 global adrres: 0x7ffdf2cf5cb0\tpoint x: 0x1e9db20\ty: 1 destructor delete 0x7ffdf2cf5cb0 destructor delete 0x7ffdf2cf5cc0 0 Finish 2. å¯¹è±¡é€šè¿‡å€¼ä¼ é€’æ–¹å¼è¿›å…¥å‡½æ•° void g(A a){ cout \u0026lt;\u0026lt; \u0026#34;stack g adrres: \u0026#34; \u0026lt;\u0026lt; \u0026amp;a \u0026lt;\u0026lt; \u0026#34;\\tpoint x: \u0026#34; \u0026lt;\u0026lt; a.x \u0026lt;\u0026lt; \u0026#34;\\ty: \u0026#34; \u0026lt;\u0026lt; a.y \u0026lt;\u0026lt; endl; } int main() { A a(1); g(a); return 0; } è¾“å‡ºï¼š\nStart second constructor adrres: 0x7ffddc160510\tpoint x: 0x2448b20\ty: 1 const copy constructor adrres: 0x7ffddc160520\tpoint x: 0\ty: 0 stack g adrres: 0x7ffddc160520\tpoint x: 0x2448b20\ty: 1 destructor delete 0x7ffddc160520 destructor delete 0x7ffddc160510 0 Finish 3. å½“å¯¹è±¡ä»¥å€¼ä¼ é€’çš„æ–¹å¼ä»å‡½æ•°è¿”å›  å‡½æ•°è¿”å›åŒ¿åå¯¹è±¡æ—¶ä¼šè°ƒç”¨æ‹·è´æ„é€  å˜é‡åœ¨æ¥æ”¶åŒ¿åå¯¹è±¡æ—¶å°±ä¸ä¼šè°ƒç”¨æ‹·è´æ„é€ äº†  class A { //æ³¨æ„æŠŠæ‹·è´æ„é€ è®¾ä¸ºç¦æ­¢ä½¿ç”¨ï¼Œå¦åˆ™çœ‹ä¸åˆ°æ•ˆæœ  A(const A \u0026amp;a) = delete; } int main() { f(); // å¦‚æœæ²¡æœ‰å˜é‡æ¥æ”¶åŒ¿åå¯¹è±¡ï¼Œç¼–è¯‘å™¨å°±ç›´æ¥å›æ”¶äº†ï¼Œç«‹å³æ‰§è¡Œå¯¹è±¡ææ„  A c = f(); // åŒ¿åå¯¹è±¡ç›´æ¥è½¬æ­£ï¼Œå°±ä¸ä¼šè°ƒç”¨æ‹·è´æ„é€ äº†  A d; d = f(); // æ­¤å¤„ä¼šè°ƒç”¨ = å·æ“ä½œç¬¦é‡è½½ï¼ˆd = åŒ¿åå¯¹è±¡ï¼‰  // ç„¶ååŒ¿åå¯¹è±¡ä¼šæ‰§è¡Œææ„ï¼Œç«‹å³é”€æ¯  cout \u0026lt;\u0026lt; \u0026#34;global adrres: \u0026#34; \u0026lt;\u0026lt; \u0026amp;c \u0026lt;\u0026lt; \u0026#34;\\tpoint x: \u0026#34; \u0026lt;\u0026lt; c.x \u0026lt;\u0026lt; \u0026#34;\\ty: \u0026#34; \u0026lt;\u0026lt; c.y \u0026lt;\u0026lt; endl; return 0; } è¾“å‡ºï¼š\nStart prog.cc: In function \u0026#39;A f()\u0026#39;: prog.cc:40:12: error: use of deleted function \u0026#39;A::A(const A\u0026amp;)\u0026#39; 40 | return ret; | ^~~ prog.cc:20:5: note: declared here 20 | A(const A \u0026amp;a) = delete; | ^ 1 Finish æ­£å¸¸è¾“å‡ºï¼šè™½ç„¶æ²¡æœ‰è¾“å‡ºè°ƒç”¨æ‹·è´æ„é€ çš„ä¿¡æ¯ï¼Œä½†ç¡®å®æœ‰å…³ç³»\nStart second constructor adrres: 0x7fff0f7062d0\tpoint x: 0x127eb20\ty: 3 stack f adrres: 0x7fff0f7062d0\tpoint x: 0x127eb20\ty: 3 global adrres: 0x7fff0f7062d0\tpoint x: 0x127eb20\ty: 3 destructor delete 0x7fff0f7062d0 0 Finish äºŒã€èµ‹å€¼æ„é€   æ³¨æ„ï¼šæ‹·è´æ„é€ ä¸èƒ½æ˜¯ delete çš„  1. å¯¹è±¡ç›´æ¥èµ‹å€¼ç»™å¦ä¸€ä¸ªå¯¹è±¡ï¼Œä¸”æ¥å—å€¼çš„å¯¹è±¡å·²ç»åˆå§‹åŒ–è¿‡ int main() { A a(1); A c; c = a; cout \u0026lt;\u0026lt; \u0026#34;global adrres: \u0026#34; \u0026lt;\u0026lt; \u0026amp;c \u0026lt;\u0026lt; \u0026#34;\\tpoint x: \u0026#34; \u0026lt;\u0026lt; c.x \u0026lt;\u0026lt; \u0026#34;\\ty: \u0026#34; \u0026lt;\u0026lt; c.y \u0026lt;\u0026lt; endl; return 0; } è¾“å‡ºï¼š\nStart second constructor adrres: 0x7ffee27a6fa0\tpoint x: 0xcdeb20\ty: 1 default constructor adrres: 0x7ffee27a6f90\tpoint x: 0\ty: 0 const assignment constructor global adrres: 0x7ffee27a6f90\tpoint x: 0xcdeb20\ty: 1 destructor delete 0x7ffee27a6f90 destructor delete 0x7ffee27a6fa0 0 Finish 2. å¯¹è±¡ä»¥å€¼ä¼ é€’æ–¹å¼ä»å‡½æ•°è¿”å›ï¼Œä¸”æ¥å—è¿”å›å€¼çš„å¯¹è±¡å·²ç»åˆå§‹åŒ–è¿‡  æ³¨æ„ï¼šè¿”å›å‡½æ•°è°ƒç”¨åï¼Œä¼šè°ƒç”¨ææ„ï¼Œå¦‚æœå¯¹è±¡ä¸­åŒ…å«æŒ‡é’ˆæ—¶ï¼Œä¼šä½¿è¯¥æŒ‡é’ˆå¤±æ•ˆ  int main() { A c; c = f(); // æ­¤æ—¶è°ƒç”¨æŒ‡é’ˆä¼šå‡ºé”™ï¼Œf()ç»“æŸï¼Œè°ƒç”¨å¯¹è±¡ææ„ï¼Œå¯¹è±¡ä¸­çš„æŒ‡é’ˆè¢« delete æ‰äº†  // cout \u0026lt;\u0026lt; *c.x \u0026lt;\u0026lt; endl;  cout \u0026lt;\u0026lt; \u0026#34;global adrres: \u0026#34; \u0026lt;\u0026lt; \u0026amp;c \u0026lt;\u0026lt; \u0026#34;\\tpoint x: \u0026#34; \u0026lt;\u0026lt; c.x \u0026lt;\u0026lt; \u0026#34;\\ty: \u0026#34; \u0026lt;\u0026lt; c.y \u0026lt;\u0026lt; endl; return 0; } è¾“å‡ºï¼š\nStart default constructor adrres: 0x7ffd3aed2be0\tpoint x: 0\ty: 0 second constructor adrres: 0x7ffd3aed2bf0\tpoint x: 0x1475b20\ty: 3 stack f adrres: 0x7ffd3aed2bf0\tpoint x: 0x1475b20\ty: 3 const assignment constructor destructor delete 0x7ffd3aed2bf0 global adrres: 0x7ffd3aed2be0\tpoint x: 0x1475b20\ty: 3 destructor delete 0x7ffd3aed2be0 0 Finish ","permalink":"https://874656645.github.io/rick/posts/36-%E6%9E%84%E9%80%A0%E6%8B%B7%E8%B4%9D%E6%9E%84%E9%80%A0%E8%B5%8B%E5%80%BC%E6%9E%84%E9%80%A0/","summary":"ç»“è®ºï¼š\n æ‹·è´æ„é€ å‡½æ•°æ˜¯å‡½æ•°ï¼Œèµ‹å€¼è¿ç®—ç¬¦æ˜¯è¿ç®—ç¬¦çš„é‡è½½ï¼› æ‹·è´æ„é€ å‡½æ•°ä¼šç”Ÿæˆæ–°çš„ç±»å¯¹è±¡ï¼Œèµ‹å€¼è¿ç®—ç¬¦ä¸ä¼šï¼› æ‹·è´æ„é€ å‡½æ•°æ˜¯ç”¨ä¸€ä¸ªå·²å­˜åœ¨çš„å¯¹è±¡å»æ„é€ ä¸€ä¸ªä¸å­˜åœ¨çš„å¯¹è±¡ï¼›è€Œèµ‹å€¼è¿ç®—ç¬¦é‡è½½å‡½æ•°æ˜¯ç”¨ä¸€ä¸ªå­˜åœ¨çš„å¯¹è±¡å»ç»™å¦ä¸€ä¸ªå·²å­˜åœ¨å¹¶åˆå§‹åŒ–è¿‡çš„å¯¹è±¡è¿›è¡Œèµ‹å€¼; è‹¥æ¥å—è¿”å›å€¼çš„å¯¹è±¡å·²ç»åˆå§‹åŒ–è¿‡ï¼Œåˆ™ä¼šè°ƒç”¨èµ‹å€¼æ„é€ å‡½æ•°ï¼Œä¸”è¯¥å¯¹è±¡è¿˜ä¼šè°ƒç”¨ææ„å‡½æ•°ï¼Œå½“å¯¹è±¡ä¸­åŒ…å«æŒ‡é’ˆæ—¶ï¼Œä¼šä½¿è¯¥æŒ‡é’ˆå¤±æ•ˆï¼Œå› æ­¤éœ€è¦é‡è½½èµ‹å€¼æ„é€ å‡½æ•°ï¼Œä½¿ç”¨ç±»ä¼¼æ·±æ‹·è´æˆ–ç§»åŠ¨æ„é€ å‡½æ•°çš„æ–¹æ³•èµ‹å€¼ï¼Œæ‰èƒ½é¿å…æŒ‡é’ˆå¤±æ•ˆã€‚ å½“æ²¡æœ‰æ˜¾å¼çš„æ„é€ å‡½æ•°å’Œæ‹·è´æ„é€ æ—¶ï¼Œç³»ç»Ÿæ‰ä¼šæä¾›é»˜è®¤çš„æ— å‚æ„é€   æˆå‘˜åˆå§‹åŒ–åˆ—è¡¨  ä½¿ç”¨åˆå§‹åŒ–åˆ—è¡¨ï¼Œå°‘äº†ä¸€æ¬¡è°ƒç”¨é»˜è®¤æ„é€ å‡½æ•°çš„è¿‡ç¨‹ï¼Œæé«˜æ•ˆç‡ å¸¸é‡æˆå‘˜ï¼Œå› ä¸ºå¸¸é‡åªèƒ½åˆå§‹åŒ–ä¸èƒ½èµ‹å€¼ï¼Œæ‰€ä»¥å¿…é¡»æ”¾åœ¨åˆå§‹åŒ–åˆ—è¡¨é‡Œé¢ å¼•ç”¨ç±»å‹ï¼Œå¼•ç”¨å¿…é¡»åœ¨å®šä¹‰çš„æ—¶å€™åˆå§‹åŒ–ï¼Œå¹¶ä¸”ä¸èƒ½é‡æ–°èµ‹å€¼ï¼Œæ‰€ä»¥ä¹Ÿè¦å†™åœ¨åˆå§‹åŒ–åˆ—è¡¨é‡Œé¢ æˆå‘˜å˜é‡åˆå§‹åŒ–çš„é¡ºåºè·Ÿåœ¨åˆå§‹åŒ–åˆ—è¡¨çš„é¡ºåºæ— å…³ï¼Œä¸å˜é‡å£°æ˜çš„é¡ºåºæœ‰å…³  æµ‹è¯•ç±» class A { public: A(){ cout \u0026lt;\u0026lt; \u0026#34;default constructor\u0026#34; \u0026lt;\u0026lt; endl; cout \u0026lt;\u0026lt; \u0026#34;adrres: \u0026#34; \u0026lt;\u0026lt; this \u0026lt;\u0026lt; \u0026#34;\\tpoint x: \u0026#34; \u0026lt;\u0026lt; x \u0026lt;\u0026lt; \u0026#34;\\ty: \u0026#34; \u0026lt;\u0026lt; y \u0026lt;\u0026lt; endl; } A(int t){ x = new int(0); y = t; cout \u0026lt;\u0026lt; \u0026#34;second constructor\u0026#34; \u0026lt;\u0026lt; endl; cout \u0026lt;\u0026lt; \u0026#34;adrres: \u0026#34; \u0026lt;\u0026lt; this \u0026lt;\u0026lt; \u0026#34;\\tpoint x: \u0026#34; \u0026lt;\u0026lt; x \u0026lt;\u0026lt; \u0026#34;\\ty: \u0026#34; \u0026lt;\u0026lt; y \u0026lt;\u0026lt; endl; } A(const A \u0026amp;a){ cout \u0026lt;\u0026lt; \u0026#34;const copy constructor\u0026#34; \u0026lt;\u0026lt; endl; cout \u0026lt;\u0026lt; \u0026#34;adrres: \u0026#34; \u0026lt;\u0026lt; this \u0026lt;\u0026lt; \u0026#34;\\tpoint x: \u0026#34; \u0026lt;\u0026lt; x \u0026lt;\u0026lt; \u0026#34;\\ty: \u0026#34; \u0026lt;\u0026lt; y \u0026lt;\u0026lt; endl; this-\u0026gt;x = a.","title":"æ„é€ ã€æ‹·è´æ„é€ ã€èµ‹å€¼æ„é€ "},{"content":" é‡è½½ï¼š åœ¨åŒä¸€ä½œç”¨åŸŸä¸­ï¼Œä¸¤ä¸ªå‡½æ•°åç›¸åŒï¼Œä½†æ˜¯å‚æ•°åˆ—è¡¨ä¸åŒï¼ˆä¸ªæ•°ã€ç±»å‹ã€é¡ºåºï¼‰ï¼Œè¿”å›å€¼ç±»å‹æ²¡æœ‰è¦æ±‚ï¼› é‡å†™ï¼š å­ç±»ç»§æ‰¿äº†çˆ¶ç±»ï¼Œçˆ¶ç±»ä¸­çš„å‡½æ•°æ˜¯è™šå‡½æ•°ï¼Œåœ¨å­ç±»ä¸­é‡æ–°å®šä¹‰äº†è¿™ä¸ªè™šå‡½æ•°ï¼Œè¿™ç§æƒ…å†µæ˜¯é‡å†™ï¼› é‡å®šä¹‰ï¼š æ´¾ç”Ÿç±»ä¸­å‡½æ•°ä¸åŸºç±»ä¸­çš„å‡½æ•°åŒåï¼Œä½†æ˜¯è¿™ä¸ªå‡½æ•°åœ¨åŸºç±»ä¸­å¹¶æ²¡æœ‰è¢«å®šä¹‰ä¸ºè™šå‡½æ•° éšè—ï¼š æ´¾ç”Ÿç±»ä¸­é‡å®šä¹‰äº†çˆ¶ç±»çš„å‡½æ•°ï¼Œæ­¤æ—¶åŸºç±»çš„å‡½æ•°ä¼šè¢«éšè—ï¼› æ¨¡æ¿ï¼š æ¨¡æ¿å‡½æ•°æ˜¯ä¸€ä¸ªé€šç”¨å‡½æ•°ï¼Œå‡½æ•°çš„ç±»å‹å’Œå½¢å‚ä¸ç›´æ¥æŒ‡å®šè€Œç”¨è™šæ‹Ÿç±»å‹æ¥ä»£è¡¨ï¼Œåªé€‚ç”¨äº å‚æ•°ä¸ªæ•°ç›¸åŒè€Œç±»å‹ä¸åŒ çš„å‡½æ•°ã€‚ æ„é€ å‡½æ•°å¯ä»¥è¢«é‡è½½ï¼Œææ„å‡½æ•°ä¸å¯ä»¥è¢«é‡è½½ã€‚å› ä¸ºæ„é€ å‡½æ•°å¯ä»¥æœ‰å¤šä¸ªä¸”å¯ä»¥å¸¦å‚æ•°ï¼Œ è€Œææ„å‡½æ•°åªèƒ½æœ‰ä¸€ä¸ªï¼Œä¸”ä¸èƒ½å¸¦å‚æ•°  1ã€é‡è½½  ç±»çš„é™æ€å‡½æ•°ä¹Ÿå¯ä»¥é‡è½½ï¼› å½¢å‚ä¸­ä¸€çº§æŒ‡é’ˆå’ŒäºŒçº§æŒ‡é’ˆè¢«è®¤ä¸ºæ˜¯ä¸åŒç±»å‹çš„å‚æ•°ï¼›  class A{ public: A(int a){ m_a = a; } void print(){ cout \u0026lt;\u0026lt; \u0026#34;print()\u0026#34; \u0026lt;\u0026lt; \u0026#34;m_a = \u0026#34; \u0026lt;\u0026lt; m_a \u0026lt;\u0026lt; endl; } void freeP(A ** p){ if(p == NULL){ return; } if(*p != NULL){ free(*p); *p = NULL; } } void freeP(A * p){ if(p != NULL){ free(p); p = NULL; } } static void printS(){ cout \u0026lt;\u0026lt; \u0026#34;printS() s_a = \u0026#34; \u0026lt;\u0026lt; s_a \u0026lt;\u0026lt; endl; } static void printS(int s){ cout \u0026lt;\u0026lt; \u0026#34;printS(int s) \u0026#34; \u0026lt;\u0026lt; s_a * s \u0026lt;\u0026lt; endl; } static void printS(void *p, int s){ cout \u0026lt;\u0026lt; \u0026#34;printS(void *p, int s) \u0026#34; \u0026lt;\u0026lt; ((A*)p)-\u0026gt;m_a * s \u0026lt;\u0026lt; endl; } static int s_a; private: int m_a; }; int A::s_a = 0; int main( ) { A *a = new A(1); a-\u0026gt;printS(a, 20); a-\u0026gt;print(); A::s_a = 10; a-\u0026gt;printS(); a-\u0026gt;printS(10); a-\u0026gt;freeP(a); if(a == NULL){ cout \u0026lt;\u0026lt; \u0026#34;*a is not valid\u0026#34; \u0026lt;\u0026lt; endl; return 0; } cout \u0026lt;\u0026lt; \u0026#34;*a is valid\u0026#34; \u0026lt;\u0026lt; endl; a-\u0026gt;print(); return 0; } è¾“å‡ºï¼š\nStart printS(void *p, int s) 20 print()m_a = 1 printS() s_a = 10 printS(int s) 100 *a is valid print()m_a = 0 0 Finish ","permalink":"https://874656645.github.io/rick/posts/35-%E5%87%BD%E6%95%B0%E9%87%8D%E8%BD%BD%E9%87%8D%E5%86%99%E9%9A%90%E8%97%8F%E6%A8%A1%E6%9D%BF/","summary":"é‡è½½ï¼š åœ¨åŒä¸€ä½œç”¨åŸŸä¸­ï¼Œä¸¤ä¸ªå‡½æ•°åç›¸åŒï¼Œä½†æ˜¯å‚æ•°åˆ—è¡¨ä¸åŒï¼ˆä¸ªæ•°ã€ç±»å‹ã€é¡ºåºï¼‰ï¼Œè¿”å›å€¼ç±»å‹æ²¡æœ‰è¦æ±‚ï¼› é‡å†™ï¼š å­ç±»ç»§æ‰¿äº†çˆ¶ç±»ï¼Œçˆ¶ç±»ä¸­çš„å‡½æ•°æ˜¯è™šå‡½æ•°ï¼Œåœ¨å­ç±»ä¸­é‡æ–°å®šä¹‰äº†è¿™ä¸ªè™šå‡½æ•°ï¼Œè¿™ç§æƒ…å†µæ˜¯é‡å†™ï¼› é‡å®šä¹‰ï¼š æ´¾ç”Ÿç±»ä¸­å‡½æ•°ä¸åŸºç±»ä¸­çš„å‡½æ•°åŒåï¼Œä½†æ˜¯è¿™ä¸ªå‡½æ•°åœ¨åŸºç±»ä¸­å¹¶æ²¡æœ‰è¢«å®šä¹‰ä¸ºè™šå‡½æ•° éšè—ï¼š æ´¾ç”Ÿç±»ä¸­é‡å®šä¹‰äº†çˆ¶ç±»çš„å‡½æ•°ï¼Œæ­¤æ—¶åŸºç±»çš„å‡½æ•°ä¼šè¢«éšè—ï¼› æ¨¡æ¿ï¼š æ¨¡æ¿å‡½æ•°æ˜¯ä¸€ä¸ªé€šç”¨å‡½æ•°ï¼Œå‡½æ•°çš„ç±»å‹å’Œå½¢å‚ä¸ç›´æ¥æŒ‡å®šè€Œç”¨è™šæ‹Ÿç±»å‹æ¥ä»£è¡¨ï¼Œåªé€‚ç”¨äº å‚æ•°ä¸ªæ•°ç›¸åŒè€Œç±»å‹ä¸åŒ çš„å‡½æ•°ã€‚ æ„é€ å‡½æ•°å¯ä»¥è¢«é‡è½½ï¼Œææ„å‡½æ•°ä¸å¯ä»¥è¢«é‡è½½ã€‚å› ä¸ºæ„é€ å‡½æ•°å¯ä»¥æœ‰å¤šä¸ªä¸”å¯ä»¥å¸¦å‚æ•°ï¼Œ è€Œææ„å‡½æ•°åªèƒ½æœ‰ä¸€ä¸ªï¼Œä¸”ä¸èƒ½å¸¦å‚æ•°  1ã€é‡è½½  ç±»çš„é™æ€å‡½æ•°ä¹Ÿå¯ä»¥é‡è½½ï¼› å½¢å‚ä¸­ä¸€çº§æŒ‡é’ˆå’ŒäºŒçº§æŒ‡é’ˆè¢«è®¤ä¸ºæ˜¯ä¸åŒç±»å‹çš„å‚æ•°ï¼›  class A{ public: A(int a){ m_a = a; } void print(){ cout \u0026lt;\u0026lt; \u0026#34;print()\u0026#34; \u0026lt;\u0026lt; \u0026#34;m_a = \u0026#34; \u0026lt;\u0026lt; m_a \u0026lt;\u0026lt; endl; } void freeP(A ** p){ if(p == NULL){ return; } if(*p != NULL){ free(*p); *p = NULL; } } void freeP(A * p){ if(p != NULL){ free(p); p = NULL; } } static void printS(){ cout \u0026lt;\u0026lt; \u0026#34;printS() s_a = \u0026#34; \u0026lt;\u0026lt; s_a \u0026lt;\u0026lt; endl; } static void printS(int s){ cout \u0026lt;\u0026lt; \u0026#34;printS(int s) \u0026#34; \u0026lt;\u0026lt; s_a * s \u0026lt;\u0026lt; endl; } static void printS(void *p, int s){ cout \u0026lt;\u0026lt; \u0026#34;printS(void *p, int s) \u0026#34; \u0026lt;\u0026lt; ((A*)p)-\u0026gt;m_a * s \u0026lt;\u0026lt; endl; } static int s_a; private: int m_a; }; int A::s_a = 0; int main( ) { A *a = new A(1); a-\u0026gt;printS(a, 20); a-\u0026gt;print(); A::s_a = 10; a-\u0026gt;printS(); a-\u0026gt;printS(10); a-\u0026gt;freeP(a); if(a == NULL){ cout \u0026lt;\u0026lt; \u0026#34;*a is not valid\u0026#34; \u0026lt;\u0026lt; endl; return 0; } cout \u0026lt;\u0026lt; \u0026#34;*a is valid\u0026#34; \u0026lt;\u0026lt; endl; a-\u0026gt;print(); return 0; } è¾“å‡ºï¼š","title":"å‡½æ•°é‡è½½ã€é‡å†™ã€éšè—ã€æ¨¡æ¿"},{"content":"å½“ä¸€ä¸ªå‡½æ•°è¢«å£°æ˜ä¸ºå†…è”å‡½æ•°ä¹‹åï¼Œåœ¨ç¼–è¯‘é˜¶æ®µï¼Œç¼–è¯‘å™¨ä¼šç”¨å†…è”å‡½æ•°çš„å‡½æ•°ä½“å–æ›¿æ¢ç¨‹åºä¸­å‡ºç°çš„å†…è”å‡½æ•°è°ƒç”¨è¡¨è¾¾å¼ï¼Œè€Œå…¶ä»–çš„å‡½æ•°éƒ½æ˜¯åœ¨è¿è¡Œæ—¶æ‰è¢«æ›¿æ¢ï¼Œè¿™å…¶å®å°±æ˜¯ç”¨ç©ºé—´æ¢æ—¶é—´ï¼Œæé«˜äº†å‡½æ•°è°ƒç”¨çš„æ•ˆç‡ã€‚åŒæ—¶ï¼Œå†…è”å‡½æ•°å…·æœ‰å‡ ä¸ªç‰¹ç‚¹ï¼š\n é€‚ç”¨äºå‡½æ•°ä½“ç§¯å¾ˆå°å¹¶é¢‘ç¹ä½¿ç”¨çš„å‡½æ•° å†…è”å‡½æ•°ä¸­ä¸å¯ä»¥å‡ºç°å¾ªç¯ã€é€’å½’æˆ–å¼€å…³æ“ä½œ å†…è”å‡½æ•°çš„å£°æ˜å¿…é¡»åœ¨å‡½æ•°å®šä¹‰ä¹‹å‰ å†…è”å‡½æ•°çš„å®šä¹‰å¿…é¡»å‡ºç°åœ¨å†…è”å‡½æ•°çš„ç¬¬ä¸€æ¬¡è°ƒç”¨å‰ åœ¨ç±»ä¸­å£°æ˜åŒæ—¶å®šä¹‰çš„æˆå‘˜å‡½æ•°ï¼ˆé™¤äº†è™šå‡½æ•°ï¼‰ä¼šè‡ªåŠ¨éšå¼çš„å½“æˆå†…è”å‡½æ•° è™šå‡½æ•°å¯ä»¥æ˜¯å†…è”å‡½æ•°ï¼Œä½†æ˜¯å½“è™šå‡½æ•°è¡¨ç°å¤šæ€æ€§çš„æ—¶å€™ä¸èƒ½å†…è”  ä¼˜ç‚¹ï¼š\n å†…è”å‡½æ•°åœ¨è¢«è°ƒç”¨å¤„è¿›è¡Œä»£ç å±•å¼€ï¼Œçœå»äº†å‚æ•°å‹æ ˆã€è·³è½¬è¿”å›ã€æ ˆå¸§å¼€è¾Ÿä¸å›æ”¶ï¼Œç»“æœè¿”å›ç­‰æ“ä½œï¼Œä»è€Œæé«˜ç¨‹åºè¿è¡Œé€Ÿåº¦ï¼› å†…è”å‡½æ•°ç›¸æ¯”å®å‡½æ•°æ¥è¯´ï¼Œåœ¨ä»£ç å±•å¼€æ—¶ï¼Œä¼šåšå®‰å…¨æ£€æŸ¥æˆ–è‡ªåŠ¨ç±»å‹è½¬æ¢ï¼Œè€Œå®å®šä¹‰åˆ™ä¸ä¼šï¼› åœ¨ç±»ä¸­å£°æ˜åŒæ—¶å®šä¹‰çš„æˆå‘˜å‡½æ•°ï¼Œè‡ªåŠ¨è½¬åŒ–ä¸ºå†…è”å‡½æ•°ï¼Œå› æ­¤å†…è”å‡½æ•°å¯ä»¥è®¿é—®ç±»çš„æˆå‘˜å˜é‡ï¼Œå®å®šä¹‰åˆ™ä¸èƒ½ï¼› å†…è”å‡½æ•°åœ¨è¿è¡Œæ—¶å¯è°ƒè¯•ï¼Œè€Œå®å®šä¹‰ä¸å¯ä»¥ã€‚  ç¼ºç‚¹ï¼š\n ä»£ç è†¨èƒ€ï¼Œæ¶ˆè€—äº†æ›´å¤šçš„å†…å­˜ç©ºé—´ï¼› inline å‡½æ•°æ— æ³•éšç€å‡½æ•°åº“å‡çº§è€Œå‡çº§ã€‚inlineå‡½æ•°çš„æ”¹å˜éœ€è¦é‡æ–°ç¼–è¯‘ï¼Œä¸åƒ non-inline å¯ä»¥ç›´æ¥é“¾æ¥ï¼› å†…è”å‡½æ•°å…¶å®æ˜¯ä¸å¯æ§çš„ï¼Œå®ƒåªæ˜¯å¯¹ç¼–è¯‘å™¨çš„å»ºè®®ï¼Œæ˜¯å¦å¯¹å‡½æ•°å†…è”ï¼Œå†³å®šæƒåœ¨äºç¼–è¯‘å™¨; ä¸èƒ½å¯¹å‡½æ•°è¿›è¡Œå–å€æ“ä½œ  ","permalink":"https://874656645.github.io/rick/posts/34-inline-%E5%86%85%E8%81%94%E5%87%BD%E6%95%B0/","summary":"å½“ä¸€ä¸ªå‡½æ•°è¢«å£°æ˜ä¸ºå†…è”å‡½æ•°ä¹‹åï¼Œåœ¨ç¼–è¯‘é˜¶æ®µï¼Œç¼–è¯‘å™¨ä¼šç”¨å†…è”å‡½æ•°çš„å‡½æ•°ä½“å–æ›¿æ¢ç¨‹åºä¸­å‡ºç°çš„å†…è”å‡½æ•°è°ƒç”¨è¡¨è¾¾å¼ï¼Œè€Œå…¶ä»–çš„å‡½æ•°éƒ½æ˜¯åœ¨è¿è¡Œæ—¶æ‰è¢«æ›¿æ¢ï¼Œè¿™å…¶å®å°±æ˜¯ç”¨ç©ºé—´æ¢æ—¶é—´ï¼Œæé«˜äº†å‡½æ•°è°ƒç”¨çš„æ•ˆç‡ã€‚åŒæ—¶ï¼Œå†…è”å‡½æ•°å…·æœ‰å‡ ä¸ªç‰¹ç‚¹ï¼š\n é€‚ç”¨äºå‡½æ•°ä½“ç§¯å¾ˆå°å¹¶é¢‘ç¹ä½¿ç”¨çš„å‡½æ•° å†…è”å‡½æ•°ä¸­ä¸å¯ä»¥å‡ºç°å¾ªç¯ã€é€’å½’æˆ–å¼€å…³æ“ä½œ å†…è”å‡½æ•°çš„å£°æ˜å¿…é¡»åœ¨å‡½æ•°å®šä¹‰ä¹‹å‰ å†…è”å‡½æ•°çš„å®šä¹‰å¿…é¡»å‡ºç°åœ¨å†…è”å‡½æ•°çš„ç¬¬ä¸€æ¬¡è°ƒç”¨å‰ åœ¨ç±»ä¸­å£°æ˜åŒæ—¶å®šä¹‰çš„æˆå‘˜å‡½æ•°ï¼ˆé™¤äº†è™šå‡½æ•°ï¼‰ä¼šè‡ªåŠ¨éšå¼çš„å½“æˆå†…è”å‡½æ•° è™šå‡½æ•°å¯ä»¥æ˜¯å†…è”å‡½æ•°ï¼Œä½†æ˜¯å½“è™šå‡½æ•°è¡¨ç°å¤šæ€æ€§çš„æ—¶å€™ä¸èƒ½å†…è”  ä¼˜ç‚¹ï¼š\n å†…è”å‡½æ•°åœ¨è¢«è°ƒç”¨å¤„è¿›è¡Œä»£ç å±•å¼€ï¼Œçœå»äº†å‚æ•°å‹æ ˆã€è·³è½¬è¿”å›ã€æ ˆå¸§å¼€è¾Ÿä¸å›æ”¶ï¼Œç»“æœè¿”å›ç­‰æ“ä½œï¼Œä»è€Œæé«˜ç¨‹åºè¿è¡Œé€Ÿåº¦ï¼› å†…è”å‡½æ•°ç›¸æ¯”å®å‡½æ•°æ¥è¯´ï¼Œåœ¨ä»£ç å±•å¼€æ—¶ï¼Œä¼šåšå®‰å…¨æ£€æŸ¥æˆ–è‡ªåŠ¨ç±»å‹è½¬æ¢ï¼Œè€Œå®å®šä¹‰åˆ™ä¸ä¼šï¼› åœ¨ç±»ä¸­å£°æ˜åŒæ—¶å®šä¹‰çš„æˆå‘˜å‡½æ•°ï¼Œè‡ªåŠ¨è½¬åŒ–ä¸ºå†…è”å‡½æ•°ï¼Œå› æ­¤å†…è”å‡½æ•°å¯ä»¥è®¿é—®ç±»çš„æˆå‘˜å˜é‡ï¼Œå®å®šä¹‰åˆ™ä¸èƒ½ï¼› å†…è”å‡½æ•°åœ¨è¿è¡Œæ—¶å¯è°ƒè¯•ï¼Œè€Œå®å®šä¹‰ä¸å¯ä»¥ã€‚  ç¼ºç‚¹ï¼š\n ä»£ç è†¨èƒ€ï¼Œæ¶ˆè€—äº†æ›´å¤šçš„å†…å­˜ç©ºé—´ï¼› inline å‡½æ•°æ— æ³•éšç€å‡½æ•°åº“å‡çº§è€Œå‡çº§ã€‚inlineå‡½æ•°çš„æ”¹å˜éœ€è¦é‡æ–°ç¼–è¯‘ï¼Œä¸åƒ non-inline å¯ä»¥ç›´æ¥é“¾æ¥ï¼› å†…è”å‡½æ•°å…¶å®æ˜¯ä¸å¯æ§çš„ï¼Œå®ƒåªæ˜¯å¯¹ç¼–è¯‘å™¨çš„å»ºè®®ï¼Œæ˜¯å¦å¯¹å‡½æ•°å†…è”ï¼Œå†³å®šæƒåœ¨äºç¼–è¯‘å™¨; ä¸èƒ½å¯¹å‡½æ•°è¿›è¡Œå–å€æ“ä½œ  ","title":"inline å†…è”å‡½æ•°"},{"content":"Unix çš„ fork å‡½æ•° forkå‡½æ•°å¯ä»¥åˆ›å»ºä¸€ä¸ªå’Œå½“å‰æ˜ åƒä¸€æ ·çš„å­è¿›ç¨‹ï¼Œè¿™ä¸ªå‡½æ•°ä¼šè¿”å›ä¸¤ä¸ªå€¼ï¼šä»å­è¿›ç¨‹è¿”å›0ï¼Œä»çˆ¶è¿›ç¨‹è¿”å›å­è¿›ç¨‹çš„PIDï¼›\n 1ï¼‰åœ¨çˆ¶è¿›ç¨‹ä¸­ï¼Œforkè¿”å›æ–°åˆ›å»ºå­è¿›ç¨‹çš„è¿›ç¨‹IDï¼› 2ï¼‰åœ¨å­è¿›ç¨‹ä¸­ï¼Œforkè¿”å›0ï¼› 3ï¼‰å¦‚æœå‡ºç°é”™è¯¯ï¼Œforkè¿”å›ä¸€ä¸ªè´Ÿå€¼ï¼›  #include \u0026lt;iostream\u0026gt;#include \u0026lt;unistd.h\u0026gt; using namespace std; int main() { pid_t fpid; //fpidè¡¨ç¤ºforkå‡½æ•°è¿”å›çš„å€¼  int count = 0; cout \u0026lt;\u0026lt; \u0026amp;count \u0026lt;\u0026lt; endl; fpid = fork(); if (fpid \u0026lt; 0) printf(\u0026#34;error in fork!\\n\u0026#34;); else if (fpid == 0) { printf(\u0026#34;i am the child process, my process id is %d\\n\u0026#34;,getpid()); cout \u0026lt;\u0026lt; \u0026amp;count \u0026lt;\u0026lt; endl; count++; } else { printf(\u0026#34;i am the parent process, my process id is %d\\n\u0026#34;,getpid()); cout \u0026lt;\u0026lt; \u0026amp;count \u0026lt;\u0026lt; endl; count++; } printf(\u0026#34;ç»Ÿè®¡ç»“æœæ˜¯: %d\\n\u0026#34;,count); return 0; } è¾“å‡ºï¼š\nStart 0x7ffd3ed42530 i am the parent process, my process id is 22 0x7ffd3ed42530 ç»Ÿè®¡ç»“æœæ˜¯: 1 i am the child process, my process id is 23 0x7ffd3ed42530 ç»Ÿè®¡ç»“æœæ˜¯: 1 0 Finish ","permalink":"https://874656645.github.io/rick/posts/33-fork-unix/","summary":"Unix çš„ fork å‡½æ•° forkå‡½æ•°å¯ä»¥åˆ›å»ºä¸€ä¸ªå’Œå½“å‰æ˜ åƒä¸€æ ·çš„å­è¿›ç¨‹ï¼Œè¿™ä¸ªå‡½æ•°ä¼šè¿”å›ä¸¤ä¸ªå€¼ï¼šä»å­è¿›ç¨‹è¿”å›0ï¼Œä»çˆ¶è¿›ç¨‹è¿”å›å­è¿›ç¨‹çš„PIDï¼›\n 1ï¼‰åœ¨çˆ¶è¿›ç¨‹ä¸­ï¼Œforkè¿”å›æ–°åˆ›å»ºå­è¿›ç¨‹çš„è¿›ç¨‹IDï¼› 2ï¼‰åœ¨å­è¿›ç¨‹ä¸­ï¼Œforkè¿”å›0ï¼› 3ï¼‰å¦‚æœå‡ºç°é”™è¯¯ï¼Œforkè¿”å›ä¸€ä¸ªè´Ÿå€¼ï¼›  #include \u0026lt;iostream\u0026gt;#include \u0026lt;unistd.h\u0026gt; using namespace std; int main() { pid_t fpid; //fpidè¡¨ç¤ºforkå‡½æ•°è¿”å›çš„å€¼  int count = 0; cout \u0026lt;\u0026lt; \u0026amp;count \u0026lt;\u0026lt; endl; fpid = fork(); if (fpid \u0026lt; 0) printf(\u0026#34;error in fork!\\n\u0026#34;); else if (fpid == 0) { printf(\u0026#34;i am the child process, my process id is %d\\n\u0026#34;,getpid()); cout \u0026lt;\u0026lt; \u0026amp;count \u0026lt;\u0026lt; endl; count++; } else { printf(\u0026#34;i am the parent process, my process id is %d\\n\u0026#34;,getpid()); cout \u0026lt;\u0026lt; \u0026amp;count \u0026lt;\u0026lt; endl; count++; } printf(\u0026#34;ç»Ÿè®¡ç»“æœæ˜¯: %d\\n\u0026#34;,count); return 0; } è¾“å‡ºï¼š","title":"fork Unix"},{"content":"C++ æ˜¯ C çš„è¶…é›†å’Œå¢å¼ºï¼Œæ ¡éªŒæ›´åŠ ä¸¥æ ¼\nC ä¸»è¦æ˜¯é¢å‘è¿‡ç¨‹ï¼ŒC++ æ˜¯é¢å‘å¯¹è±¡ï¼Œé¢å‘è¿‡ç¨‹æ˜¯å‡½æ•°é©±åŠ¨ï¼Œé¢å‘å¯¹è±¡æ˜¯å¯¹è±¡é©±åŠ¨\n1 æ–°å¢å‘½åç©ºé—´  ç»™{}ä½œç”¨åŸŸèµ·äº†ä¸ªåç§°ï¼Œåé¢ä¸ç”¨åŠ åˆ†å·; å‘½åç©ºé—´å¯ä»¥åµŒå¥—  namespace X { namespace Y { } } 2 æ–°å¢å¼•ç”¨ç±»å‹  å¼•ç”¨åœ¨ä¸€å®šç¨‹åº¦ä¸Šå¯ä»¥æ›¿ä»£æŒ‡é’ˆï¼Œä½œç”¨ä¸å¸¸æŒ‡é’ˆç±»ä¼¼ int * const a å¼•ç”¨æ²¡æœ‰å®šä¹‰ï¼Œæ˜¯ä¸€ç§å…³ç³»å£°æ˜ï¼Œå£°æ˜å®ƒå’ŒåŸæœ‰æŸä¸€å˜é‡ï¼ˆå®ä½“ï¼‰çš„å…³ç³»ï¼Œ\næ•…è€Œç±»å‹ä¸åŸç±»å‹ä¿æŒä¸€è‡´ï¼Œä¸”ä¸åˆ†é…å†…å­˜ï¼Œä¸è¢«å¼•ç”¨çš„å˜é‡æœ‰ç›¸åŒçš„åœ°å€ å£°æ˜æ—¶å¿…é¡»åˆå§‹åŒ–ï¼Œä¸€ç»å£°æ˜ï¼Œä¸å¯å˜æ›´ å¯å¯¹å¼•ç”¨å†æ¬¡å¼•ç”¨ï¼Œå¤šæ¬¡å¼•ç”¨çš„ç»“æœæ˜¯æŸä¸€å˜é‡å…·æœ‰å¤šä¸ªåˆ«å \u0026amp; ç¬¦å·åœ¨ = å·å·¦è¾¹æ˜¯å¼•ç”¨ï¼Œåœ¨ = å·å³è¾¹ä¸ºå–åœ°å€  3 æšä¸¾æ£€æµ‹å¢å¼º  ä¸èƒ½å°†æ•´å‹éšå¼è½¬åŒ–ä¸ºæšä¸¾  4 å˜é‡å®šä¹‰å¢å¼º  C++ å˜é‡ä¸å¿…éƒ½å£°æ˜åœ¨å‡½æ•°é¡¶éƒ¨ï¼Œå¯ä»¥éšä½¿ç”¨éšå®šä¹‰  5 å…¨å±€å˜é‡å®šä¹‰æ£€æµ‹ä¸¥æ ¼  C å…¨å±€å˜é‡é‡å¤å®šä¹‰ï¼ŒC++ ä¸å¯ä»¥ï¼Œå…¨å±€å˜é‡æ£€æµ‹å¢å¼º  // C è¯­è¨€ int g_val; // bssæ®µ int g_val = 10; // dataæ®µ 6 å‡½æ•°å½¢å‚ä¸ªæ•°å’Œå‡½æ•°è¿”å›å€¼æ£€æµ‹å¢å¼º // C è¯­è¨€ f() // é»˜è®¤è¿”å›å€¼ int { return 10; } int g(int a) { return 10; } // è°ƒç”¨ g(10, 20, 30, 40); // å¯ç¼–è¯‘é€šè¿‡ï¼Œä½†æ˜¯æœ‰è­¦å‘Š 7 struct ç»“æ„ä½“å¢å¼º  åŠŸèƒ½ä¸ç±»åŸºæœ¬ç­‰åŒï¼Œåªä¸è¿‡ class é»˜è®¤æ˜¯ private æƒé™ï¼Œstruct é»˜è®¤æ˜¯ public æƒé™  // C è¯­è¨€å£°æ˜ç»“æ„ä½“å˜é‡ struct Student s; // C++ è¯­è¨€å£°æ˜ç»“æ„ä½“å˜é‡ Student s; 8 æ–°å¢ bool å…³é”®å­—ï¼Œ1 ä¸ªå­—èŠ‚  C ç”¨ 0 è¡¨ç¤º falseï¼Œé 0 è¡¨ç¤º true C++ ä¸­ bool ä¸º 1 ä¸ªå­—èŠ‚ï¼Œä½†æ˜¯åªæœ‰ true å’Œ false ä¸¤ä¸ªå€¼  9 ä¸‰ç›®è¿ç®—ç¬¦å¢å¼ºï¼ˆè¯­æ³•ç³–ï¼‰  C ä¸­ä¸‰ç›®è¿ç®—ç¬¦ä¸å¯ä»¥å½“å·¦å€¼  // C è¯­è¨€ int a = 10, b = 20; ((a \u0026lt; b) ? a : b) = 50; // é”™è¯¯ *((a \u0026lt; b) ? \u0026amp;a : \u0026amp;b) = 50; // æ­£ç¡®ï¼Œa æ­¤æ—¶æ˜¯50 // C++ ä¸‰ç›®è¿ç®—å·¦å€¼ int a = 10, b = 20; ((a \u0026lt; b) ? a : b) = 50; // æ­£ç¡®ï¼Œa æ­¤æ—¶æ˜¯50ï¼ˆè¿”å›çš„æ˜¯å¼•ç”¨ï¼‰ 10 const å¢å¼º  Cä¸­çš„ const å˜é‡å¯ä»¥é€šè¿‡æŒ‡é’ˆçš„æ–¹å¼è¿›è¡Œä¿®æ”¹ï¼Œæ˜¯å‡å¸¸é‡  // C è¯­è¨€ const int a = 10; int *p = \u0026amp;a; *p = 20; printf(\u0026#34;a = %d\u0026#34;, a);  C++ ä¸­çš„ const å˜é‡æ”¾åœ¨äº†å…¨å±€ç©ºé—´çš„ç¬¦å·è¡¨ä¸­ï¼Œæ˜¯ä¸å¯æ›´æ”¹çš„  // C++ è¯­è¨€ const int a = 10; // å¸¸é‡åŒºç¬¦å·è¡¨ä¸­ï¼ˆkey value é”®å€¼å¯¹ï¼‰ï¼Œç¼–è¯‘è¿‡ç¨‹ä¸­è¿›è¡Œæ›¿æ¢  // #define æ˜¯åœ¨é¢„å¤„ç†é˜¶æ®µå±•å¼€ï¼Œä¸å—ä½œç”¨åŸŸé™åˆ¶ int *p = \u0026amp;a; // åœ¨æ ˆä¸­å¼€è¾Ÿäº†ä¸€ä¸ªä¸´æ—¶å˜é‡ç©ºé—´ *p = 20; cout \u0026lt;\u0026lt; \u0026#34;a = \u0026#34; \u0026lt;\u0026lt; a \u0026lt;\u0026lt; endl; // a = 10 cout \u0026lt;\u0026lt; \u0026#34;*p = \u0026#34; \u0026lt;\u0026lt; *p \u0026lt;\u0026lt; endl; // *p = 20 ","permalink":"https://874656645.github.io/rick/posts/32-c-%E4%B8%8E-c++-%E7%9A%84%E5%B7%AE%E5%BC%82/","summary":"C++ æ˜¯ C çš„è¶…é›†å’Œå¢å¼ºï¼Œæ ¡éªŒæ›´åŠ ä¸¥æ ¼\nC ä¸»è¦æ˜¯é¢å‘è¿‡ç¨‹ï¼ŒC++ æ˜¯é¢å‘å¯¹è±¡ï¼Œé¢å‘è¿‡ç¨‹æ˜¯å‡½æ•°é©±åŠ¨ï¼Œé¢å‘å¯¹è±¡æ˜¯å¯¹è±¡é©±åŠ¨\n1 æ–°å¢å‘½åç©ºé—´  ç»™{}ä½œç”¨åŸŸèµ·äº†ä¸ªåç§°ï¼Œåé¢ä¸ç”¨åŠ åˆ†å·; å‘½åç©ºé—´å¯ä»¥åµŒå¥—  namespace X { namespace Y { } } 2 æ–°å¢å¼•ç”¨ç±»å‹  å¼•ç”¨åœ¨ä¸€å®šç¨‹åº¦ä¸Šå¯ä»¥æ›¿ä»£æŒ‡é’ˆï¼Œä½œç”¨ä¸å¸¸æŒ‡é’ˆç±»ä¼¼ int * const a å¼•ç”¨æ²¡æœ‰å®šä¹‰ï¼Œæ˜¯ä¸€ç§å…³ç³»å£°æ˜ï¼Œå£°æ˜å®ƒå’ŒåŸæœ‰æŸä¸€å˜é‡ï¼ˆå®ä½“ï¼‰çš„å…³ç³»ï¼Œ\næ•…è€Œç±»å‹ä¸åŸç±»å‹ä¿æŒä¸€è‡´ï¼Œä¸”ä¸åˆ†é…å†…å­˜ï¼Œä¸è¢«å¼•ç”¨çš„å˜é‡æœ‰ç›¸åŒçš„åœ°å€ å£°æ˜æ—¶å¿…é¡»åˆå§‹åŒ–ï¼Œä¸€ç»å£°æ˜ï¼Œä¸å¯å˜æ›´ å¯å¯¹å¼•ç”¨å†æ¬¡å¼•ç”¨ï¼Œå¤šæ¬¡å¼•ç”¨çš„ç»“æœæ˜¯æŸä¸€å˜é‡å…·æœ‰å¤šä¸ªåˆ«å \u0026amp; ç¬¦å·åœ¨ = å·å·¦è¾¹æ˜¯å¼•ç”¨ï¼Œåœ¨ = å·å³è¾¹ä¸ºå–åœ°å€  3 æšä¸¾æ£€æµ‹å¢å¼º  ä¸èƒ½å°†æ•´å‹éšå¼è½¬åŒ–ä¸ºæšä¸¾  4 å˜é‡å®šä¹‰å¢å¼º  C++ å˜é‡ä¸å¿…éƒ½å£°æ˜åœ¨å‡½æ•°é¡¶éƒ¨ï¼Œå¯ä»¥éšä½¿ç”¨éšå®šä¹‰  5 å…¨å±€å˜é‡å®šä¹‰æ£€æµ‹ä¸¥æ ¼  C å…¨å±€å˜é‡é‡å¤å®šä¹‰ï¼ŒC++ ä¸å¯ä»¥ï¼Œå…¨å±€å˜é‡æ£€æµ‹å¢å¼º  // C è¯­è¨€ int g_val; // bssæ®µ int g_val = 10; // dataæ®µ 6 å‡½æ•°å½¢å‚ä¸ªæ•°å’Œå‡½æ•°è¿”å›å€¼æ£€æµ‹å¢å¼º // C è¯­è¨€ f() // é»˜è®¤è¿”å›å€¼ int { return 10; } int g(int a) { return 10; } // è°ƒç”¨ g(10, 20, 30, 40); // å¯ç¼–è¯‘é€šè¿‡ï¼Œä½†æ˜¯æœ‰è­¦å‘Š 7 struct ç»“æ„ä½“å¢å¼º  åŠŸèƒ½ä¸ç±»åŸºæœ¬ç­‰åŒï¼Œåªä¸è¿‡ class é»˜è®¤æ˜¯ private æƒé™ï¼Œstruct é»˜è®¤æ˜¯ public æƒé™  // C è¯­è¨€å£°æ˜ç»“æ„ä½“å˜é‡ struct Student s; // C++ è¯­è¨€å£°æ˜ç»“æ„ä½“å˜é‡ Student s; 8 æ–°å¢ bool å…³é”®å­—ï¼Œ1 ä¸ªå­—èŠ‚  C ç”¨ 0 è¡¨ç¤º falseï¼Œé 0 è¡¨ç¤º true C++ ä¸­ bool ä¸º 1 ä¸ªå­—èŠ‚ï¼Œä½†æ˜¯åªæœ‰ true å’Œ false ä¸¤ä¸ªå€¼  9 ä¸‰ç›®è¿ç®—ç¬¦å¢å¼ºï¼ˆè¯­æ³•ç³–ï¼‰  C ä¸­ä¸‰ç›®è¿ç®—ç¬¦ä¸å¯ä»¥å½“å·¦å€¼  // C è¯­è¨€ int a = 10, b = 20; ((a \u0026lt; b) ?","title":"C ä¸ C++ çš„å·®å¼‚"},{"content":"int add(int count, ...) { // æŒ‡é’ˆå¤§å°ä¸ç¨‹åºä½æ•°æœ‰å…³ï¼ˆ32ä½æŒ‡é’ˆæ˜¯4ä¸ªå­—èŠ‚ï¼Œ64ä½æŒ‡é’ˆæ˜¯8ä¸ªå­—èŠ‚ï¼‰  int intSize = sizeof(int*) / sizeof(int); int sum = 0; // cout \u0026lt;\u0026lt; \u0026amp;count \u0026lt;\u0026lt; endl;  int *p = \u0026amp;count + intSize; // cout \u0026lt;\u0026lt; p \u0026lt;\u0026lt; endl;  for (int i = 0; i \u0026lt; count; ++i) { sum += *p; cout \u0026lt;\u0026lt; *p \u0026lt;\u0026lt; endl; p += intSize; } return sum; } int main() { cout \u0026lt;\u0026lt; add(3, 1, 2, 3) \u0026lt;\u0026lt; endl; return 0; } è¾“å‡ºï¼š\n1 2 3 6 ","permalink":"https://874656645.github.io/rick/posts/31-%E5%87%BD%E6%95%B0%E5%BD%A2%E5%8F%82%E4%BB%8E%E5%8F%B3%E5%88%B0%E5%B7%A6%E5%85%A5%E6%A0%88/","summary":"int add(int count, ...) { // æŒ‡é’ˆå¤§å°ä¸ç¨‹åºä½æ•°æœ‰å…³ï¼ˆ32ä½æŒ‡é’ˆæ˜¯4ä¸ªå­—èŠ‚ï¼Œ64ä½æŒ‡é’ˆæ˜¯8ä¸ªå­—èŠ‚ï¼‰  int intSize = sizeof(int*) / sizeof(int); int sum = 0; // cout \u0026lt;\u0026lt; \u0026amp;count \u0026lt;\u0026lt; endl;  int *p = \u0026amp;count + intSize; // cout \u0026lt;\u0026lt; p \u0026lt;\u0026lt; endl;  for (int i = 0; i \u0026lt; count; ++i) { sum += *p; cout \u0026lt;\u0026lt; *p \u0026lt;\u0026lt; endl; p += intSize; } return sum; } int main() { cout \u0026lt;\u0026lt; add(3, 1, 2, 3) \u0026lt;\u0026lt; endl; return 0; } è¾“å‡ºï¼š","title":"å‡½æ•°å½¢å‚ä»å³åˆ°å·¦å…¥æ ˆ"},{"content":"1. 32 ä½å’Œ 64 ä½ç¨‹åºæŒ‡é’ˆæ˜¯å¤šå°‘ä½ 32ä½æŒ‡é’ˆå¤§å°ä¸º4ä¸ªå­—èŠ‚ï¼Œ64ä½æŒ‡é’ˆå¤§å°ä½8ä¸ªå­—èŠ‚\n2. æŒ‡é’ˆåŠ  1ï¼Œæ˜¯å¯¹è¯¥æŒ‡é’ˆå¢åŠ  1 ä¸ªå‚¨å­˜å•ä½ â€œå­˜å‚¨å•ä½â€ï¼ŒæŒ‡çš„æ˜¯æŒ‡é’ˆæŒ‡å‘çš„æ•°æ®ç±»å‹æ‰€å çš„å†…å­˜çš„å­—èŠ‚æ•°ã€‚ä¸åŒç±»å‹çš„æŒ‡é’ˆåŠ 1åï¼Œå¢åŠ çš„å¤§å°ä¸åŒã€‚\nint main() { int a[] = {1, 2, 3, 4, 5}; // \u0026amp;aæ˜¯æ•°ç»„æŒ‡é’ˆï¼Œå…¶ç±»å‹ä¸º int (*)[5]ï¼Œaæ˜¯é•¿åº¦ä¸º5çš„intæ•°ç»„æŒ‡é’ˆï¼Œæ‰€ä»¥è¦åŠ  5*sizeof(int)ï¼Œæ‰€ä»¥ptrå®é™…æ˜¯a[5]ï¼›  // \u0026amp;a+1ä¸æ˜¯é¦–åœ°å€+1ï¼Œç³»ç»Ÿä¼šè®¤ä¸ºåŠ ä¸€ä¸ªaæ•°ç»„çš„åç§»ï¼Œæ˜¯åç§»äº†ä¸€ä¸ªæ•°ç»„çš„å¤§å°ï¼ˆæœ¬ä¾‹æ˜¯5ä¸ªintï¼‰  // ä½†æ˜¯prtä¸(\u0026amp;a+1)ç±»å‹æ˜¯ä¸ä¸€æ ·çš„(è¿™ç‚¹å¾ˆé‡è¦ï¼ŒprtæŒ‡å‘çš„æ˜¯æ•´å½¢)ï¼Œæ‰€ä»¥prt-1åªä¼šå‡å»sizeof(int)  int *ptr = (int*)(\u0026amp;a + 1); cout \u0026lt;\u0026lt; *(a + 1) \u0026lt;\u0026lt; endl; cout \u0026lt;\u0026lt; *(ptr - 1) \u0026lt;\u0026lt; endl; return 0; } è¾“å‡ºï¼š\n1 2 3 6 æ³¨ï¼š aï¼Œ\u0026amp;açš„åœ°å€æ˜¯ä¸€æ ·çš„ï¼Œä½†æ„æ€ä¸ä¸€æ ·ï¼š\n aæ˜¯æ•°ç»„é¦–åœ°å€ï¼Œä¹Ÿå°±æ˜¯a[0]çš„åœ°å€ï¼Œa+1æ˜¯æ•°ç»„ä¸‹ä¸€å…ƒç´ çš„åœ°å€ï¼Œå³a[1] \u0026amp;aæ˜¯å¯¹è±¡ï¼ˆæ•´ä¸ªæ•°ç»„ä½œä¸ºä¸€ä¸ªå¯¹è±¡ï¼‰é¦–åœ°å€ï¼Œè€Œ\u0026amp;a+1æ˜¯ä¸‹ä¸€ä¸ªå¯¹è±¡çš„åœ°å€ï¼Œå³a[5].  ","permalink":"https://874656645.github.io/rick/posts/30-%E6%8C%87%E9%92%88-+1/","summary":"1. 32 ä½å’Œ 64 ä½ç¨‹åºæŒ‡é’ˆæ˜¯å¤šå°‘ä½ 32ä½æŒ‡é’ˆå¤§å°ä¸º4ä¸ªå­—èŠ‚ï¼Œ64ä½æŒ‡é’ˆå¤§å°ä½8ä¸ªå­—èŠ‚\n2. æŒ‡é’ˆåŠ  1ï¼Œæ˜¯å¯¹è¯¥æŒ‡é’ˆå¢åŠ  1 ä¸ªå‚¨å­˜å•ä½ â€œå­˜å‚¨å•ä½â€ï¼ŒæŒ‡çš„æ˜¯æŒ‡é’ˆæŒ‡å‘çš„æ•°æ®ç±»å‹æ‰€å çš„å†…å­˜çš„å­—èŠ‚æ•°ã€‚ä¸åŒç±»å‹çš„æŒ‡é’ˆåŠ 1åï¼Œå¢åŠ çš„å¤§å°ä¸åŒã€‚\nint main() { int a[] = {1, 2, 3, 4, 5}; // \u0026amp;aæ˜¯æ•°ç»„æŒ‡é’ˆï¼Œå…¶ç±»å‹ä¸º int (*)[5]ï¼Œaæ˜¯é•¿åº¦ä¸º5çš„intæ•°ç»„æŒ‡é’ˆï¼Œæ‰€ä»¥è¦åŠ  5*sizeof(int)ï¼Œæ‰€ä»¥ptrå®é™…æ˜¯a[5]ï¼›  // \u0026amp;a+1ä¸æ˜¯é¦–åœ°å€+1ï¼Œç³»ç»Ÿä¼šè®¤ä¸ºåŠ ä¸€ä¸ªaæ•°ç»„çš„åç§»ï¼Œæ˜¯åç§»äº†ä¸€ä¸ªæ•°ç»„çš„å¤§å°ï¼ˆæœ¬ä¾‹æ˜¯5ä¸ªintï¼‰  // ä½†æ˜¯prtä¸(\u0026amp;a+1)ç±»å‹æ˜¯ä¸ä¸€æ ·çš„(è¿™ç‚¹å¾ˆé‡è¦ï¼ŒprtæŒ‡å‘çš„æ˜¯æ•´å½¢)ï¼Œæ‰€ä»¥prt-1åªä¼šå‡å»sizeof(int)  int *ptr = (int*)(\u0026amp;a + 1); cout \u0026lt;\u0026lt; *(a + 1) \u0026lt;\u0026lt; endl; cout \u0026lt;\u0026lt; *(ptr - 1) \u0026lt;\u0026lt; endl; return 0; } è¾“å‡ºï¼š\n1 2 3 6 æ³¨ï¼š aï¼Œ\u0026amp;açš„åœ°å€æ˜¯ä¸€æ ·çš„ï¼Œä½†æ„æ€ä¸ä¸€æ ·ï¼š\n aæ˜¯æ•°ç»„é¦–åœ°å€ï¼Œä¹Ÿå°±æ˜¯a[0]çš„åœ°å€ï¼Œa+1æ˜¯æ•°ç»„ä¸‹ä¸€å…ƒç´ çš„åœ°å€ï¼Œå³a[1] \u0026amp;aæ˜¯å¯¹è±¡ï¼ˆæ•´ä¸ªæ•°ç»„ä½œä¸ºä¸€ä¸ªå¯¹è±¡ï¼‰é¦–åœ°å€ï¼Œè€Œ\u0026amp;a+1æ˜¯ä¸‹ä¸€ä¸ªå¯¹è±¡çš„åœ°å€ï¼Œå³a[5].  ","title":"æŒ‡é’ˆ + 1"},{"content":"template\u0026lt;class T\u0026gt; class Test { public: Test(T t){ m_t = t;}; // explicit Test(T t){ m_t = t;};  T getValue(){ return m_t; }; private: T m_t; }; int main() { Test\u0026lt;int\u0026gt; tInt(1); cout \u0026lt;\u0026lt; tInt.getValue() \u0026lt;\u0026lt; endl; Test\u0026lt;double\u0026gt; tD(1.15); cout \u0026lt;\u0026lt; tD.getValue() \u0026lt;\u0026lt; endl; Test\u0026lt;float\u0026gt; tF = 1.3f; // æ„é€ å‡½æ•°æ²¡æœ‰explicitä¿®é¥°ï¼Œå¯ä»¥éšå¼è½¬æ¢  cout \u0026lt;\u0026lt; tF.getValue() \u0026lt;\u0026lt; endl; return 0; } è¾“å‡ºï¼š\nStart 1 1.15 1.3 0 Finish ","permalink":"https://874656645.github.io/rick/posts/29-%E6%A8%A1%E6%9D%BF%E7%B1%BB/","summary":"template\u0026lt;class T\u0026gt; class Test { public: Test(T t){ m_t = t;}; // explicit Test(T t){ m_t = t;};  T getValue(){ return m_t; }; private: T m_t; }; int main() { Test\u0026lt;int\u0026gt; tInt(1); cout \u0026lt;\u0026lt; tInt.getValue() \u0026lt;\u0026lt; endl; Test\u0026lt;double\u0026gt; tD(1.15); cout \u0026lt;\u0026lt; tD.getValue() \u0026lt;\u0026lt; endl; Test\u0026lt;float\u0026gt; tF = 1.3f; // æ„é€ å‡½æ•°æ²¡æœ‰explicitä¿®é¥°ï¼Œå¯ä»¥éšå¼è½¬æ¢  cout \u0026lt;\u0026lt; tF.getValue() \u0026lt;\u0026lt; endl; return 0; } è¾“å‡ºï¼š\nStart 1 1.15 1.3 0 Finish ","title":"æ¨¡æ¿ç±»"},{"content":"template \u0026lt;typename T\u0026gt; inline const T\u0026amp; Max (const T\u0026amp; a, const T\u0026amp; b) { return a \u0026lt; b ? b:a; }; int main() { int i = 39; int j = 20; cout \u0026lt;\u0026lt; \u0026#34;Max(i, j): \u0026#34; \u0026lt;\u0026lt; Max(i, j) \u0026lt;\u0026lt; endl; double f1 = 13.5; double f2 = 20.7; cout \u0026lt;\u0026lt; \u0026#34;Max(f1, f2): \u0026#34; \u0026lt;\u0026lt; Max(f1, f2) \u0026lt;\u0026lt; endl; string s1 = \u0026#34;Hello\u0026#34;; string s2 = \u0026#34;World\u0026#34;; cout \u0026lt;\u0026lt; \u0026#34;Max(s1, s2): \u0026#34; \u0026lt;\u0026lt; Max(s1, s2) \u0026lt;\u0026lt; endl; return 0; } è¾“å‡ºï¼š\nStart Max(i, j): 39 Max(f1, f2): 20.7 Max(s1, s2): World 0 Finish ","permalink":"https://874656645.github.io/rick/posts/28-%E6%A8%A1%E6%9D%BF%E5%87%BD%E6%95%B0/","summary":"template \u0026lt;typename T\u0026gt; inline const T\u0026amp; Max (const T\u0026amp; a, const T\u0026amp; b) { return a \u0026lt; b ? b:a; }; int main() { int i = 39; int j = 20; cout \u0026lt;\u0026lt; \u0026#34;Max(i, j): \u0026#34; \u0026lt;\u0026lt; Max(i, j) \u0026lt;\u0026lt; endl; double f1 = 13.5; double f2 = 20.7; cout \u0026lt;\u0026lt; \u0026#34;Max(f1, f2): \u0026#34; \u0026lt;\u0026lt; Max(f1, f2) \u0026lt;\u0026lt; endl; string s1 = \u0026#34;Hello\u0026#34;; string s2 = \u0026#34;World\u0026#34;; cout \u0026lt;\u0026lt; \u0026#34;Max(s1, s2): \u0026#34; \u0026lt;\u0026lt; Max(s1, s2) \u0026lt;\u0026lt; endl; return 0; } è¾“å‡ºï¼š","title":"æ¨¡æ¿å‡½æ•°"},{"content":" æ³¨ï¼šè½¯ä»¶ç‰ˆæœ¬ä¸º10.6ï¼Œéœ€è¦ æœåŠ¡ç«¯ token æ³¨ï¼šå¤©åœ°å›¾å®˜ç½‘çš„æœåŠ¡ï¼ˆhttps://t0.tianditu.gov.cn/img_w/wmtsï¼‰ä½¿ç”¨çš„ dpi å¤§å°é‡‡ç”¨çš„æ˜¯å›½å®¶æ ‡å‡†ï¼Œå¹¶ä¸æ˜¯OGCæ ‡å‡†ï¼Œä¼šå¯¼è‡´ ArcMap åŠ è½½ååæ ‡ä¸å¯¹  å½±åƒåº•å›¾ï¼š\nhttp://t0.tianditu.com/img_c/esri/wmts å¤©åœ°å›¾å½±åƒï¼ˆç»çº¬åº¦ï¼ŒCGCS2000ï¼‰\nhttp://t0.tianditu.com/cia_c/esri/wmts å¤©åœ°å›¾å½±åƒæ³¨è®°ï¼ˆç»çº¬åº¦ï¼ŒCGCS2000ï¼‰\nhttp://t0.tianditu.com/img_w/esri/wmts å¤©åœ°å›¾å½±åƒï¼ˆå¢¨å¡æ‰˜ï¼ŒWGS1984ï¼‰\nhttp://t0.tianditu.com/cia_w/esri/wmts å¤©åœ°å›¾å½±åƒæ³¨è®°ï¼ˆå¢¨å¡æ‰˜ï¼ŒWGS1984ï¼‰\nçŸ¢é‡åº•å›¾ï¼š\nhttp://t0.tianditu.com/vec_c/esri/wmts å¤©åœ°å›¾çŸ¢é‡ï¼ˆç»çº¬åº¦ï¼ŒCGCS2000ï¼‰\nhttp://t0.tianditu.com/cva_c/esri/wmts å¤©åœ°å›¾çŸ¢é‡æ³¨è®°ï¼ˆç»çº¬åº¦ï¼ŒCGCS2000ï¼‰\nhttp://t0.tianditu.com/vec_w/esri/wmts å¤©åœ°å›¾çŸ¢é‡ï¼ˆå¢¨å¡æ‰˜ï¼ŒWGS1984ï¼‰\nhttp://t0.tianditu.com/cva_w/esri/wmts å¤©åœ°å›¾çŸ¢é‡æ³¨è®°ï¼ˆå¢¨å¡æ‰˜ï¼ŒWGS1984ï¼‰\nArcMap WMTS\n","permalink":"https://874656645.github.io/rick/posts/27-arcmap-%E5%8A%A0%E8%BD%BD%E5%A4%A9%E5%9C%B0%E5%9B%BE%E6%9C%8D%E5%8A%A1/","summary":"æ³¨ï¼šè½¯ä»¶ç‰ˆæœ¬ä¸º10.6ï¼Œéœ€è¦ æœåŠ¡ç«¯ token æ³¨ï¼šå¤©åœ°å›¾å®˜ç½‘çš„æœåŠ¡ï¼ˆhttps://t0.tianditu.gov.cn/img_w/wmtsï¼‰ä½¿ç”¨çš„ dpi å¤§å°é‡‡ç”¨çš„æ˜¯å›½å®¶æ ‡å‡†ï¼Œå¹¶ä¸æ˜¯OGCæ ‡å‡†ï¼Œä¼šå¯¼è‡´ ArcMap åŠ è½½ååæ ‡ä¸å¯¹  å½±åƒåº•å›¾ï¼š\nhttp://t0.tianditu.com/img_c/esri/wmts å¤©åœ°å›¾å½±åƒï¼ˆç»çº¬åº¦ï¼ŒCGCS2000ï¼‰\nhttp://t0.tianditu.com/cia_c/esri/wmts å¤©åœ°å›¾å½±åƒæ³¨è®°ï¼ˆç»çº¬åº¦ï¼ŒCGCS2000ï¼‰\nhttp://t0.tianditu.com/img_w/esri/wmts å¤©åœ°å›¾å½±åƒï¼ˆå¢¨å¡æ‰˜ï¼ŒWGS1984ï¼‰\nhttp://t0.tianditu.com/cia_w/esri/wmts å¤©åœ°å›¾å½±åƒæ³¨è®°ï¼ˆå¢¨å¡æ‰˜ï¼ŒWGS1984ï¼‰\nçŸ¢é‡åº•å›¾ï¼š\nhttp://t0.tianditu.com/vec_c/esri/wmts å¤©åœ°å›¾çŸ¢é‡ï¼ˆç»çº¬åº¦ï¼ŒCGCS2000ï¼‰\nhttp://t0.tianditu.com/cva_c/esri/wmts å¤©åœ°å›¾çŸ¢é‡æ³¨è®°ï¼ˆç»çº¬åº¦ï¼ŒCGCS2000ï¼‰\nhttp://t0.tianditu.com/vec_w/esri/wmts å¤©åœ°å›¾çŸ¢é‡ï¼ˆå¢¨å¡æ‰˜ï¼ŒWGS1984ï¼‰\nhttp://t0.tianditu.com/cva_w/esri/wmts å¤©åœ°å›¾çŸ¢é‡æ³¨è®°ï¼ˆå¢¨å¡æ‰˜ï¼ŒWGS1984ï¼‰\nArcMap WMTS","title":"ArcMap åŠ è½½å¤©åœ°å›¾æœåŠ¡"},{"content":"#include \u0026lt;iostream\u0026gt;#include \u0026lt;cstdlib\u0026gt;using namespace std; // å£°æ˜å‡½æ•°æŒ‡é’ˆ int (*fn)(int); // å®šä¹‰å‡½æ•°æŒ‡é’ˆç±»å‹ typedef int (*Fn)(int); int cal(int v){ return v; }; // å‡½æ•°æŒ‡é’ˆåšä¸ºå½¢å‚ void proc(int v, Fn f){ cout \u0026lt;\u0026lt; f(v) \u0026lt;\u0026lt; endl; }; int main() { fn = cal; cout \u0026lt;\u0026lt; (*fn)(10) \u0026lt;\u0026lt; endl; cout \u0026lt;\u0026lt; fn(10) \u0026lt;\u0026lt; endl; Fn f1 = cal; cout \u0026lt;\u0026lt; (*f1)(20) \u0026lt;\u0026lt; endl; proc(30, cal); return 0; } Start 10 10 20 30 0 Finish ","permalink":"https://874656645.github.io/rick/posts/26-%E5%87%BD%E6%95%B0%E6%8C%87%E9%92%88/","summary":"#include \u0026lt;iostream\u0026gt;#include \u0026lt;cstdlib\u0026gt;using namespace std; // å£°æ˜å‡½æ•°æŒ‡é’ˆ int (*fn)(int); // å®šä¹‰å‡½æ•°æŒ‡é’ˆç±»å‹ typedef int (*Fn)(int); int cal(int v){ return v; }; // å‡½æ•°æŒ‡é’ˆåšä¸ºå½¢å‚ void proc(int v, Fn f){ cout \u0026lt;\u0026lt; f(v) \u0026lt;\u0026lt; endl; }; int main() { fn = cal; cout \u0026lt;\u0026lt; (*fn)(10) \u0026lt;\u0026lt; endl; cout \u0026lt;\u0026lt; fn(10) \u0026lt;\u0026lt; endl; Fn f1 = cal; cout \u0026lt;\u0026lt; (*f1)(20) \u0026lt;\u0026lt; endl; proc(30, cal); return 0; } Start 10 10 20 30 0 Finish ","title":"å‡½æ•°æŒ‡é’ˆ"},{"content":"  æŒ‡é’ˆå‡½æ•°æœ¬è´¨æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œè¿”å›å€¼æ˜¯ä¸€ä¸ªæŒ‡é’ˆï¼›\n  å‡½æ•°æŒ‡é’ˆæ˜¯æŒ‡å‘å‡½æ•°çš„ä¸€ä¸ªæŒ‡é’ˆå˜é‡ï¼›\n  #include \u0026lt;iostream\u0026gt;#include \u0026lt;cstdlib\u0026gt; using namespace std; // æŒ‡é’ˆå‡½æ•°fun char * fun(const char * p) { cout \u0026lt;\u0026lt; \u0026#34;fun: \u0026#34; \u0026lt;\u0026lt; p \u0026lt;\u0026lt; endl; return nullptr; }; // å‡½æ•°æŒ‡é’ˆpf char * (*pf)(const char * p); int main() { pf = fun; // å‡½æ•°æŒ‡é’ˆpfæŒ‡å‘å‡½æ•°fun  pf(\u0026#34;Hello\u0026#34;); return 0; } ","permalink":"https://874656645.github.io/rick/posts/25-%E6%8C%87%E9%92%88%E5%87%BD%E6%95%B0%E5%92%8C%E5%87%BD%E6%95%B0%E6%8C%87%E9%92%88/","summary":"  æŒ‡é’ˆå‡½æ•°æœ¬è´¨æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œè¿”å›å€¼æ˜¯ä¸€ä¸ªæŒ‡é’ˆï¼›\n  å‡½æ•°æŒ‡é’ˆæ˜¯æŒ‡å‘å‡½æ•°çš„ä¸€ä¸ªæŒ‡é’ˆå˜é‡ï¼›\n  #include \u0026lt;iostream\u0026gt;#include \u0026lt;cstdlib\u0026gt; using namespace std; // æŒ‡é’ˆå‡½æ•°fun char * fun(const char * p) { cout \u0026lt;\u0026lt; \u0026#34;fun: \u0026#34; \u0026lt;\u0026lt; p \u0026lt;\u0026lt; endl; return nullptr; }; // å‡½æ•°æŒ‡é’ˆpf char * (*pf)(const char * p); int main() { pf = fun; // å‡½æ•°æŒ‡é’ˆpfæŒ‡å‘å‡½æ•°fun  pf(\u0026#34;Hello\u0026#34;); return 0; } ","title":"æŒ‡é’ˆå‡½æ•°å’Œå‡½æ•°æŒ‡é’ˆ"},{"content":" ä¿®é¥°æ„é€ å‡½æ•°ï¼Œé˜²æ­¢éšå¼è½¬æ¢ï¼Œå¤åˆ¶åˆå§‹åŒ–ï¼Œå¤åˆ¶åˆ—è¡¨åˆå§‹åŒ– ä¿®é¥°è½¬æ¢å‡½æ•°ï¼Œå¯ä»¥é˜²æ­¢éšå¼è½¬æ¢ï¼Œä½†æŒ‰è¯­å¢ƒè½¬æ¢é™¤å¤– explicit å¯åŠ åœ¨å¸¦å¤šä¸ªå‚æ•°çš„æ„é€ æ–¹æ³•ä¸Š(converting to â€˜XXXâ€™ from initializer list)  struct B { explicit B(int) {} explicit operator bool() const { return true; } }; int main() { B b1(1); // OKï¼šç›´æ¥åˆå§‹åŒ–  B b2 = 1; // é”™è¯¯ï¼šè¢« explicit ä¿®é¥°æ„é€ å‡½æ•°çš„å¯¹è±¡ä¸å¯ä»¥å¤åˆ¶åˆå§‹åŒ–  B b3{ 1 }; // OKï¼šç›´æ¥åˆ—è¡¨åˆå§‹åŒ–  B b4 = { 1 }; // é”™è¯¯ï¼šè¢« explicit ä¿®é¥°æ„é€ å‡½æ•°çš„å¯¹è±¡ä¸å¯ä»¥å¤åˆ¶åˆ—è¡¨åˆå§‹åŒ–  B b5 = (B)1; // OKï¼šå…è®¸ static_cast çš„æ˜¾å¼è½¬æ¢  if (b1); // OKï¼šè¢« explicit ä¿®é¥°è½¬æ¢å‡½æ•° B::operator bool() çš„å¯¹è±¡å¯ä»¥ä» B åˆ° bool çš„æŒ‰è¯­å¢ƒè½¬æ¢  bool b6(b1); // OKï¼šè¢« explicit ä¿®é¥°è½¬æ¢å‡½æ•° B::operator bool() çš„å¯¹è±¡å¯ä»¥ä» B åˆ° bool çš„æŒ‰è¯­å¢ƒè½¬æ¢  bool b7 = b1; // é”™è¯¯ï¼šè¢« explicit ä¿®é¥°è½¬æ¢å‡½æ•° B::operator bool() çš„å¯¹è±¡ä¸å¯ä»¥éšå¼è½¬æ¢  bool b8 = static_cast\u0026lt;bool\u0026gt;(b1); // OKï¼šstatic_cast è¿›è¡Œç›´æ¥åˆå§‹åŒ–  return 0; } ä»åˆå§‹åŒ–åˆ—è¡¨éšå¼è½¬æ¢ï¼š\nclass T{ public: T(int a, int b){ cout \u0026lt;\u0026lt; \u0026#34;T(int, int)...\u0026#34; \u0026lt;\u0026lt; endl; this-\u0026gt;a = a; this-\u0026gt;b = b; } ~T(){ cout \u0026lt;\u0026lt; \u0026#34;~T()...\u0026#34; \u0026lt;\u0026lt; endl; } void printT(){ cout \u0026lt;\u0026lt; \u0026#34;a = \u0026#34; \u0026lt;\u0026lt; a \u0026lt;\u0026lt; \u0026#34;, b = \u0026#34; \u0026lt;\u0026lt; b \u0026lt;\u0026lt; endl; } private: int a; int b; }; T func(){ cout \u0026lt;\u0026lt; \u0026#34;in func()...\u0026#34; \u0026lt;\u0026lt; endl; return {3, 4}; } int main() { T t = func(); t.printT(); return 0; } è¾“å‡ºï¼š\nin func()... T(int, int)... a = 3, b = 4 ~T()... ","permalink":"https://874656645.github.io/rick/posts/24-explicit-%E5%85%B3%E9%94%AE%E5%AD%97/","summary":"ä¿®é¥°æ„é€ å‡½æ•°ï¼Œé˜²æ­¢éšå¼è½¬æ¢ï¼Œå¤åˆ¶åˆå§‹åŒ–ï¼Œå¤åˆ¶åˆ—è¡¨åˆå§‹åŒ– ä¿®é¥°è½¬æ¢å‡½æ•°ï¼Œå¯ä»¥é˜²æ­¢éšå¼è½¬æ¢ï¼Œä½†æŒ‰è¯­å¢ƒè½¬æ¢é™¤å¤– explicit å¯åŠ åœ¨å¸¦å¤šä¸ªå‚æ•°çš„æ„é€ æ–¹æ³•ä¸Š(converting to â€˜XXXâ€™ from initializer list)  struct B { explicit B(int) {} explicit operator bool() const { return true; } }; int main() { B b1(1); // OKï¼šç›´æ¥åˆå§‹åŒ–  B b2 = 1; // é”™è¯¯ï¼šè¢« explicit ä¿®é¥°æ„é€ å‡½æ•°çš„å¯¹è±¡ä¸å¯ä»¥å¤åˆ¶åˆå§‹åŒ–  B b3{ 1 }; // OKï¼šç›´æ¥åˆ—è¡¨åˆå§‹åŒ–  B b4 = { 1 }; // é”™è¯¯ï¼šè¢« explicit ä¿®é¥°æ„é€ å‡½æ•°çš„å¯¹è±¡ä¸å¯ä»¥å¤åˆ¶åˆ—è¡¨åˆå§‹åŒ–  B b5 = (B)1; // OKï¼šå…è®¸ static_cast çš„æ˜¾å¼è½¬æ¢  if (b1); // OKï¼šè¢« explicit ä¿®é¥°è½¬æ¢å‡½æ•° B::operator bool() çš„å¯¹è±¡å¯ä»¥ä» B åˆ° bool çš„æŒ‰è¯­å¢ƒè½¬æ¢  bool b6(b1); // OKï¼šè¢« explicit ä¿®é¥°è½¬æ¢å‡½æ•° B::operator bool() çš„å¯¹è±¡å¯ä»¥ä» B åˆ° bool çš„æŒ‰è¯­å¢ƒè½¬æ¢  bool b7 = b1; // é”™è¯¯ï¼šè¢« explicit ä¿®é¥°è½¬æ¢å‡½æ•° B::operator bool() çš„å¯¹è±¡ä¸å¯ä»¥éšå¼è½¬æ¢  bool b8 = static_cast\u0026lt;bool\u0026gt;(b1); // OKï¼šstatic_cast è¿›è¡Œç›´æ¥åˆå§‹åŒ–  return 0; } ä»åˆå§‹åŒ–åˆ—è¡¨éšå¼è½¬æ¢ï¼š","title":"explicitï¼ˆæ˜¾å¼ï¼‰å…³é”®å­—"},{"content":"å±€éƒ¨å˜é‡ã€é™æ€å±€éƒ¨å˜é‡ã€å…¨å±€å˜é‡ã€å…¨å±€é™æ€å˜é‡ã€å­—ç¬¦ä¸²å¸¸é‡ä»¥åŠåŠ¨æ€ç”³è¯·çš„å†…å­˜åŒº\n å±€éƒ¨å˜é‡å­˜å‚¨åœ¨æ ˆä¸­ å…¨å±€å˜é‡ã€é™æ€å˜é‡ï¼ˆå…¨å±€å’Œå±€éƒ¨é™æ€å˜é‡ï¼‰å­˜å‚¨åœ¨é™æ€å­˜å‚¨åŒº newç”³è¯·çš„å†…å­˜æ˜¯åœ¨å †ä¸­ å­—ç¬¦ä¸²å¸¸é‡ä¹Ÿæ˜¯å­˜å‚¨åœ¨é™æ€å­˜å‚¨åŒº   æ ˆä¸­çš„å˜é‡å†…å­˜ä¼šéšç€å®šä¹‰æ‰€åœ¨åŒºé—´çš„ç»“æŸè‡ªåŠ¨é‡Šæ”¾ï¼›è€Œå¯¹äºå †ï¼Œéœ€è¦æ‰‹åŠ¨freeï¼Œå¦åˆ™å®ƒå°±ä¸€ç›´å­˜åœ¨ï¼Œç›´åˆ°ç¨‹åºç»“æŸï¼› å¯¹äºé™æ€å­˜å‚¨åŒºï¼Œå…¶ä¸­çš„å˜é‡å¸¸é‡åœ¨ç¨‹åºè¿è¡ŒæœŸé—´ä¼šä¸€ç›´å­˜åœ¨ï¼Œä¸ä¼šé‡Šæ”¾ï¼Œä¸”å˜é‡å¸¸é‡åœ¨å…¶ä¸­åªæœ‰ä¸€ä»½æ‹·è´ï¼Œä¸ä¼šå‡ºç°ç›¸åŒçš„å˜é‡å’Œå¸¸é‡çš„ä¸åŒæ‹·è´ã€‚  #include \u0026lt;iostream\u0026gt;#include \u0026lt;cstdlib\u0026gt; using namespace std; //è¿”å›çš„æ˜¯å±€éƒ¨å˜é‡çš„åœ°å€ï¼Œè¯¥åœ°å€ä½äºåŠ¨æ€æ•°æ®åŒºï¼Œæ ˆé‡Œ char *s1() { char* p1 = \u0026#34;qqq\u0026#34;;//ä¸ºäº†æµ‹è¯•â€˜char p[]=\u0026#34;Hello world!\u0026#34;â€™ä¸­çš„å­—ç¬¦ä¸²åœ¨é™æ€å­˜å‚¨åŒºæ˜¯å¦ä¹Ÿæœ‰ä¸€ä»½æ‹·è´  char p[]=\u0026#34;Hello world!\u0026#34;; char* p2 = \u0026#34;w\u0026#34;;//ä¸ºäº†æµ‹è¯•â€˜char p[]=\u0026#34;Hello world!\u0026#34;â€™ä¸­çš„å­—ç¬¦ä¸²åœ¨é™æ€å­˜å‚¨åŒºæ˜¯å¦ä¹Ÿæœ‰ä¸€ä»½æ‹·è´  printf(\u0026#34;in s1 p=%p\\n\u0026#34;, p); printf(\u0026#34;in s1 p1=%p\\n\u0026#34;, p1); printf(\u0026#34;in s1: string\u0026#39;s address: %p\\n\u0026#34;, \u0026amp;(\u0026#34;Hello world!\u0026#34;)); printf(\u0026#34;in s1 p2=%p\\n\u0026#34;, p2); return p1; // è¿™é‡Œä¸èƒ½è¿”å›å±€éƒ¨å˜é‡ p } //è¿”å›çš„æ˜¯å­—ç¬¦ä¸²å¸¸é‡çš„åœ°å€ï¼Œè¯¥åœ°å€ä½äºé™æ€æ•°æ®åŒº char *s2() { char *q=\u0026#34;Hello world!\u0026#34;; printf(\u0026#34;in s2 q=%p\\n\u0026#34;, q); printf(\u0026#34;in s2: string\u0026#39;s address: %p\\n\u0026#34;, \u0026amp;(\u0026#34;Hello world!\u0026#34;)); return q; } //è¿”å›çš„æ˜¯é™æ€å±€éƒ¨å˜é‡çš„åœ°å€ï¼Œè¯¥åœ°å€ä½äºé™æ€æ•°æ®åŒº char *s3() { static char r[]=\u0026#34;Hello world!\u0026#34;; printf(\u0026#34;in s3 r=%p\\n\u0026#34;, r); printf(\u0026#34;in s3: string\u0026#39;s address: %p\\n\u0026#34;, \u0026amp;(\u0026#34;Hello world!\u0026#34;)); return r; } int main() { char *t1, *t2, *t3; t1=s1(); t2=s2(); t3=s3(); printf(\u0026#34;in main:\u0026#34;); printf(\u0026#34;p=%p, q=%p, r=%p\\n\u0026#34;, t1, t2, t3); printf(\u0026#34;%s\\n\u0026#34;, t1); printf(\u0026#34;%s\\n\u0026#34;, t2); printf(\u0026#34;%s\\n\u0026#34;, t3); cout \u0026lt;\u0026lt; sizeof(\u0026#39;a\u0026#39;) \u0026lt;\u0026lt; endl; return 0; } è¾“å‡ºï¼š\nin s1 p=0x7ffef76f34d3 in s1 p1=0x401010 in s1: string\u0026#39;s address: 0x40102f in s1 p2=0x401014 in s2 q=0x40102f in s2: string\u0026#39;s address: 0x40102f in s3 r=0x601798 in s3: string\u0026#39;s address: 0x40102f in main:p=0x401010, q=0x40102f, r=0x601798 qqq Hello world! Hello world! 1 è¿™ä¸ªç»“æœæ­£å¥½åº”è¯äº†ä¸Šé¢è§£é‡Šï¼ŒåŒæ—¶ï¼Œè¿˜å¯æ˜¯å¾—å‡ºä¸€ä¸ªç»“è®ºï¼š å­—ç¬¦ä¸²å¸¸é‡ï¼Œä¹‹æ‰€ä»¥ç§°ä¹‹ä¸ºå¸¸é‡ï¼Œå› ä¸ºå®ƒå¯ä¸€çœ‹ä½œæ˜¯ä¸€ä¸ªæ²¡æœ‰å‘½åçš„å­—ç¬¦ä¸²ä¸”ä¸ºå¸¸é‡ï¼Œå­˜æ”¾åœ¨é™æ€æ•°æ®åŒºã€‚ è¿™é‡Œè¯´çš„é™æ€æ•°æ®åŒºï¼Œæ˜¯ç›¸å¯¹äºå †ã€æ ˆç­‰åŠ¨æ€æ•°æ®åŒºè€Œè¨€çš„ã€‚ é™æ€æ•°æ®åŒºå­˜æ”¾çš„æ˜¯å…¨å±€å˜é‡å’Œé™æ€å˜é‡ï¼Œä»è¿™ä¸€ç‚¹ä¸Šæ¥è¯´ï¼Œå­—ç¬¦ä¸²å¸¸é‡åˆå¯ä»¥ç§°ä¹‹ä¸ºä¸€ä¸ªæ— åçš„é™æ€å˜é‡ï¼Œ å› ä¸º\u0026quot;Hello world!\u0026quot;è¿™ä¸ªå­—ç¬¦ä¸²åœ¨å‡½æ•° s1å’Œs2 ä¸­éƒ½å¼•ç”¨äº†ï¼Œä½†åœ¨å†…å­˜ä¸­å´åªæœ‰ä¸€ä»½æ‹·è´ï¼Œè¿™ä¸é™æ€å˜é‡æ€§è´¨ç›¸å½“ç¥ä¼¼ã€‚\n#include \u0026lt;iostream\u0026gt; #include \u0026lt;cstdlib\u0026gt;int main() { const char *b = NULL, *c = NULL; char a[] = \u0026#34;hello world!\u0026#34;; b = \u0026#34;hello world!\u0026#34;; c = \u0026#34;hello world!\u0026#34;; printf(\u0026#34;%p\\n\u0026#34;, a); printf(\u0026#34;%p\\n\u0026#34;, b); printf(\u0026#34;%p\\n\u0026#34;, c); printf(\u0026#34;%p\\n\u0026#34;, \u0026amp;(\u0026#34;hello world!\u0026#34;)); } è¾“å‡ºï¼š\nStart 0x7ffca882ddf3 0x400d40 0x400d40 0x400d40 0 Finish ","permalink":"https://874656645.github.io/rick/posts/23-c++-%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%B8%B8%E9%87%8F%E5%AD%98%E5%82%A8/","summary":"å±€éƒ¨å˜é‡ã€é™æ€å±€éƒ¨å˜é‡ã€å…¨å±€å˜é‡ã€å…¨å±€é™æ€å˜é‡ã€å­—ç¬¦ä¸²å¸¸é‡ä»¥åŠåŠ¨æ€ç”³è¯·çš„å†…å­˜åŒº\n å±€éƒ¨å˜é‡å­˜å‚¨åœ¨æ ˆä¸­ å…¨å±€å˜é‡ã€é™æ€å˜é‡ï¼ˆå…¨å±€å’Œå±€éƒ¨é™æ€å˜é‡ï¼‰å­˜å‚¨åœ¨é™æ€å­˜å‚¨åŒº newç”³è¯·çš„å†…å­˜æ˜¯åœ¨å †ä¸­ å­—ç¬¦ä¸²å¸¸é‡ä¹Ÿæ˜¯å­˜å‚¨åœ¨é™æ€å­˜å‚¨åŒº   æ ˆä¸­çš„å˜é‡å†…å­˜ä¼šéšç€å®šä¹‰æ‰€åœ¨åŒºé—´çš„ç»“æŸè‡ªåŠ¨é‡Šæ”¾ï¼›è€Œå¯¹äºå †ï¼Œéœ€è¦æ‰‹åŠ¨freeï¼Œå¦åˆ™å®ƒå°±ä¸€ç›´å­˜åœ¨ï¼Œç›´åˆ°ç¨‹åºç»“æŸï¼› å¯¹äºé™æ€å­˜å‚¨åŒºï¼Œå…¶ä¸­çš„å˜é‡å¸¸é‡åœ¨ç¨‹åºè¿è¡ŒæœŸé—´ä¼šä¸€ç›´å­˜åœ¨ï¼Œä¸ä¼šé‡Šæ”¾ï¼Œä¸”å˜é‡å¸¸é‡åœ¨å…¶ä¸­åªæœ‰ä¸€ä»½æ‹·è´ï¼Œä¸ä¼šå‡ºç°ç›¸åŒçš„å˜é‡å’Œå¸¸é‡çš„ä¸åŒæ‹·è´ã€‚  #include \u0026lt;iostream\u0026gt;#include \u0026lt;cstdlib\u0026gt; using namespace std; //è¿”å›çš„æ˜¯å±€éƒ¨å˜é‡çš„åœ°å€ï¼Œè¯¥åœ°å€ä½äºåŠ¨æ€æ•°æ®åŒºï¼Œæ ˆé‡Œ char *s1() { char* p1 = \u0026#34;qqq\u0026#34;;//ä¸ºäº†æµ‹è¯•â€˜char p[]=\u0026#34;Hello world!\u0026#34;â€™ä¸­çš„å­—ç¬¦ä¸²åœ¨é™æ€å­˜å‚¨åŒºæ˜¯å¦ä¹Ÿæœ‰ä¸€ä»½æ‹·è´  char p[]=\u0026#34;Hello world!\u0026#34;; char* p2 = \u0026#34;w\u0026#34;;//ä¸ºäº†æµ‹è¯•â€˜char p[]=\u0026#34;Hello world!\u0026#34;â€™ä¸­çš„å­—ç¬¦ä¸²åœ¨é™æ€å­˜å‚¨åŒºæ˜¯å¦ä¹Ÿæœ‰ä¸€ä»½æ‹·è´  printf(\u0026#34;in s1 p=%p\\n\u0026#34;, p); printf(\u0026#34;in s1 p1=%p\\n\u0026#34;, p1); printf(\u0026#34;in s1: string\u0026#39;s address: %p\\n\u0026#34;, \u0026amp;(\u0026#34;Hello world!\u0026#34;)); printf(\u0026#34;in s1 p2=%p\\n\u0026#34;, p2); return p1; // è¿™é‡Œä¸èƒ½è¿”å›å±€éƒ¨å˜é‡ p } //è¿”å›çš„æ˜¯å­—ç¬¦ä¸²å¸¸é‡çš„åœ°å€ï¼Œè¯¥åœ°å€ä½äºé™æ€æ•°æ®åŒº char *s2() { char *q=\u0026#34;Hello world!\u0026#34;; printf(\u0026#34;in s2 q=%p\\n\u0026#34;, q); printf(\u0026#34;in s2: string\u0026#39;s address: %p\\n\u0026#34;, \u0026amp;(\u0026#34;Hello world!","title":"C++ å­—ç¬¦ä¸²å¸¸é‡å­˜å‚¨"},{"content":"1ã€const ä¿®é¥°æŒ‡é’ˆå’Œå¼•ç”¨ å¸¸å¯¹è±¡ï¼šconst Class A åªèƒ½è°ƒç”¨ const æˆå‘˜å‡½æ•°\nå¸¸é‡æŒ‡é’ˆï¼šconst int * æ‰€æŒ‡çš„åœ°å€å†…å®¹ä¸º å¸¸é‡åªè¯»ï¼Œä½†æ˜¯å¯æŒ‡å‘å…¶å®ƒå¯¹è±¡çš„åœ°å€ï¼ˆå¯ä»¥é‡æŒ‡å‘ï¼‰\næŒ‡é’ˆå¸¸é‡ï¼šint * const æŒ‡é’ˆæ‰€æŒ‡çš„åœ°å€ä¸èƒ½å˜ï¼ˆä¸å¯ä»¥é‡æŒ‡å‘ï¼‰ï¼Œä½†åœ°å€çš„å†…å®¹å¯ä»¥è¢«ä¿®æ”¹ï¼Œä¸å¼•ç”¨å˜é‡æ•ˆæœç±»ä¼¼\nå¸¸é‡å¼•ç”¨ï¼šconst int \u0026amp; ç›¸å½“äºæ˜¯å¯¹è±¡çš„ä¸€ä¸ªåˆ«åï¼Œå¯¹è±¡å†…å®¹ä¸º åªè¯»ï¼Œå¹¶ä¸”ä¸èƒ½æŒ‡å‘å…¶å®ƒå¯¹è±¡\nconst int \u0026amp;a = 40 ä¸ constexpr int a = 40 æ•ˆæœç±»ä¼¼ï¼Œä½†åè€…åªèƒ½åœ¨å…¨å±€åŒºå£°æ˜\nconst int \u0026amp;a = 40 ç­‰åŒäº const int * const a = new int(40)ï¼ˆæŒ‡é’ˆçš„æŒ‡å‘å’Œå­˜æ”¾çš„å†…å®¹éƒ½ä¸å¯æ›´æ”¹ï¼‰\nClassA myA(10), myB(-10); const ClassA a; // å¸¸å¯¹è±¡ï¼ˆåªèƒ½è°ƒç”¨å¸¸æˆå‘˜å‡½æ•°ï¼‰ const ClassA * b = \u0026amp;myA; // å¸¸é‡æŒ‡é’ˆ ClassA * const b = \u0026amp;myA; // æŒ‡é’ˆå¸¸é‡ const ClassA \u0026amp;bb = myB; // å¸¸é‡å¼•ç”¨  b = \u0026amp;myB; // åˆæ³•ï¼ˆå¯ä»¥æŒ‡å‘å…¶å®ƒå¯¹è±¡ï¼‰ b-\u0026gt;setA(10); // é”™è¯¯ï¼ˆåªè¯»ï¼‰ bb.setA(100); // é”™è¯¯ï¼ˆåªè¯»ï¼‰ bb = myA; // é”™è¯¯ï¼ˆä¸å¯æŒ‡å‘å…¶å®ƒå¯¹è±¡ï¼‰ char greet[] = \u0026#34;Hello\u0026#34;, w[] = \u0026#34;World\u0026#34;; const char * p = greet; char * const pp = greet; cout \u0026lt;\u0026lt; p \u0026lt;\u0026lt; endl; *p = \u0026#39;W\u0026#39;; //error: assignment of read-only location \u0026#39;* p\u0026#39;  // *p = \u0026#39;W\u0026#39;; p = w; // åˆæ³•ï¼ˆå¸¸é‡æŒ‡é’ˆå¯ä»¥æ”¹å˜æŒ‡å‘ï¼Œä¸èƒ½æ”¹å˜å­˜å‚¨çš„å†…å®¹ï¼‰ pp = w; //error: assignment of read-only variable \u0026#39;pp\u0026#39;  // pp = w; *pp = \u0026#39;W\u0026#39;; // åˆæ³•ï¼ˆæŒ‡é’ˆå¸¸é‡å¯ä»¥æ”¹å˜å­˜å‚¨çš„å†…å®¹ï¼Œä¸èƒ½æ”¹å˜æŒ‡å‘ï¼‰ cout \u0026lt;\u0026lt; p \u0026lt;\u0026lt; endl; cout \u0026lt;\u0026lt; w \u0026lt;\u0026lt; endl; return 0; 2ã€constå˜é‡å­˜æ”¾ä½ç½®  å±€éƒ¨å˜é‡å­˜æ”¾åœ¨æ ˆåŒº å¯¹äºå…¨å±€å¯¹è±¡ï¼Œç¼–è¯‘æœŸä¸€èˆ¬ä¸åˆ†é…å†…å­˜ï¼Œæ”¾åœ¨ç¬¦å·è¡¨ä¸­ä»¥æé«˜è®¿é—®æ•ˆç‡ å¯¹äºå­—é¢å€¼å¸¸é‡ï¼Œå­˜æ”¾åœ¨å¸¸é‡å­˜å‚¨åŒº  ","permalink":"https://874656645.github.io/rick/posts/22-const-%E4%BF%AE%E9%A5%B0%E7%AC%A6/","summary":"1ã€const ä¿®é¥°æŒ‡é’ˆå’Œå¼•ç”¨ å¸¸å¯¹è±¡ï¼šconst Class A åªèƒ½è°ƒç”¨ const æˆå‘˜å‡½æ•°\nå¸¸é‡æŒ‡é’ˆï¼šconst int * æ‰€æŒ‡çš„åœ°å€å†…å®¹ä¸º å¸¸é‡åªè¯»ï¼Œä½†æ˜¯å¯æŒ‡å‘å…¶å®ƒå¯¹è±¡çš„åœ°å€ï¼ˆå¯ä»¥é‡æŒ‡å‘ï¼‰\næŒ‡é’ˆå¸¸é‡ï¼šint * const æŒ‡é’ˆæ‰€æŒ‡çš„åœ°å€ä¸èƒ½å˜ï¼ˆä¸å¯ä»¥é‡æŒ‡å‘ï¼‰ï¼Œä½†åœ°å€çš„å†…å®¹å¯ä»¥è¢«ä¿®æ”¹ï¼Œä¸å¼•ç”¨å˜é‡æ•ˆæœç±»ä¼¼\nå¸¸é‡å¼•ç”¨ï¼šconst int \u0026amp; ç›¸å½“äºæ˜¯å¯¹è±¡çš„ä¸€ä¸ªåˆ«åï¼Œå¯¹è±¡å†…å®¹ä¸º åªè¯»ï¼Œå¹¶ä¸”ä¸èƒ½æŒ‡å‘å…¶å®ƒå¯¹è±¡\nconst int \u0026amp;a = 40 ä¸ constexpr int a = 40 æ•ˆæœç±»ä¼¼ï¼Œä½†åè€…åªèƒ½åœ¨å…¨å±€åŒºå£°æ˜\nconst int \u0026amp;a = 40 ç­‰åŒäº const int * const a = new int(40)ï¼ˆæŒ‡é’ˆçš„æŒ‡å‘å’Œå­˜æ”¾çš„å†…å®¹éƒ½ä¸å¯æ›´æ”¹ï¼‰\nClassA myA(10), myB(-10); const ClassA a; // å¸¸å¯¹è±¡ï¼ˆåªèƒ½è°ƒç”¨å¸¸æˆå‘˜å‡½æ•°ï¼‰ const ClassA * b = \u0026amp;myA; // å¸¸é‡æŒ‡é’ˆ ClassA * const b = \u0026amp;myA; // æŒ‡é’ˆå¸¸é‡ const ClassA \u0026amp;bb = myB; // å¸¸é‡å¼•ç”¨  b = \u0026amp;myB; // åˆæ³•ï¼ˆå¯ä»¥æŒ‡å‘å…¶å®ƒå¯¹è±¡ï¼‰ b-\u0026gt;setA(10); // é”™è¯¯ï¼ˆåªè¯»ï¼‰ bb.","title":"const ä¿®é¥°ç¬¦"},{"content":" è·¯å¾„ä¸­æœ‰ç©ºæ ¼  m_process-\u0026gt;startDetached(strAppDir + \u0026quot;/ThreeDScreen.exe\u0026quot;, QStringList())\næ€æ­»ä¸€ä¸ªè¿›ç¨‹ï¼ˆæ³¨ï¼š-t å‚æ•°ä¼šå°†åˆ›å»ºçš„å­è¿›ç¨‹ä¸€èµ·æ€æ­»ï¼‰  QProcess::startDetached(\u0026quot;taskkill -t -f /IM iexplore.exe\u0026quot;);\n","permalink":"https://874656645.github.io/rick/posts/21-qprocess-%E4%BD%BF%E7%94%A8/","summary":"è·¯å¾„ä¸­æœ‰ç©ºæ ¼  m_process-\u0026gt;startDetached(strAppDir + \u0026quot;/ThreeDScreen.exe\u0026quot;, QStringList())\næ€æ­»ä¸€ä¸ªè¿›ç¨‹ï¼ˆæ³¨ï¼š-t å‚æ•°ä¼šå°†åˆ›å»ºçš„å­è¿›ç¨‹ä¸€èµ·æ€æ­»ï¼‰  QProcess::startDetached(\u0026quot;taskkill -t -f /IM iexplore.exe\u0026quot;);","title":"QProcess ä½¿ç”¨"},{"content":" QStringä½¿ç”¨çš„æ˜¯UTF-8ç¼–ç  ä»å­—ç¬¦å¸¸é‡ä¸­è·å–ä¸­æ–‡  QString msg = QString::fromLocal8Bit(\u0026quot;This is a debug message at ä¸­æ–‡\u0026quot;);\nä»¥QStringåšä¸ºå½¢å‚å˜é‡ä¼ é€’  qDebug(msg.toUtf8());\nQStringä¸æ“ä½œç³»ç»Ÿé—´è¯»å†™ï¼Œä¼šè‡ªåŠ¨å°†UTF-8ä¸æ“ä½œç³»ç»Ÿçš„ç¼–ç åšè½¬æ¢ï¼ˆæ¯”å¦‚æ—¥å¿—ç³»ç»Ÿï¼‰  void QtLog::WriteLine(const QString \u0026amp;logFileName, const QString \u0026amp;logMsg) { QFile file(logFileName); file.open(QIODevice::WriteOnly | QIODevice::Append); QTextStream text_stream(\u0026amp;file); text_stream \u0026lt;\u0026lt; logMsg \u0026lt;\u0026lt; \u0026#34;\\r\\n\u0026#34;; file.flush(); file.close(); } QString strAppDir = QCoreApplication::applicationDirPath(); // ä¸ç”¨è½¬ç   QString message, text, fileName = strAppDir + \u0026#34;/Log/\u0026#34;; QDir dir(fileName); if (!dir.exists()) { // æ³¨ï¼šä¸èƒ½åˆ›å»ºä¸¤çº§æ–‡ä»¶å¤¹  bool ismkdir = dir.mkdir(fileName); } ","permalink":"https://874656645.github.io/rick/posts/20-qstring-%E4%B8%AD%E6%96%87%E4%B9%B1%E7%A0%81/","summary":" QStringä½¿ç”¨çš„æ˜¯UTF-8ç¼–ç  ä»å­—ç¬¦å¸¸é‡ä¸­è·å–ä¸­æ–‡  QString msg = QString::fromLocal8Bit(\u0026quot;This is a debug message at ä¸­æ–‡\u0026quot;);\nä»¥QStringåšä¸ºå½¢å‚å˜é‡ä¼ é€’  qDebug(msg.toUtf8());\nQStringä¸æ“ä½œç³»ç»Ÿé—´è¯»å†™ï¼Œä¼šè‡ªåŠ¨å°†UTF-8ä¸æ“ä½œç³»ç»Ÿçš„ç¼–ç åšè½¬æ¢ï¼ˆæ¯”å¦‚æ—¥å¿—ç³»ç»Ÿï¼‰  void QtLog::WriteLine(const QString \u0026amp;logFileName, const QString \u0026amp;logMsg) { QFile file(logFileName); file.open(QIODevice::WriteOnly | QIODevice::Append); QTextStream text_stream(\u0026amp;file); text_stream \u0026lt;\u0026lt; logMsg \u0026lt;\u0026lt; \u0026#34;\\r\\n\u0026#34;; file.flush(); file.close(); } QString strAppDir = QCoreApplication::applicationDirPath(); // ä¸ç”¨è½¬ç   QString message, text, fileName = strAppDir + \u0026#34;/Log/\u0026#34;; QDir dir(fileName); if (!dir.exists()) { // æ³¨ï¼šä¸èƒ½åˆ›å»ºä¸¤çº§æ–‡ä»¶å¤¹  bool ismkdir = dir.mkdir(fileName); } ","title":"QString ä¸­æ–‡ä¹±ç "},{"content":"1ã€è®¾ç½®IEä¸ºå•è¿›ç¨‹æ¨¡å¼  64ä½æ“ä½œç³»ç»Ÿçš„ IE é»˜è®¤æ¯ä¸ª Tab é¡µéƒ½æ˜¯ä¸€ä¸ªè¿›ç¨‹ï¼Œå¹¶ä¸” Tab é¡µçš„è¿›ç¨‹æ˜¯ 32 ä½çš„ï¼Œä¸»è¿›ç¨‹æ˜¯ 64 ä½çš„ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤º  å€¼ä¸º0æ—¶æ˜¯å•è¿›ç¨‹æ¨¡å¼ï¼Œ1æ˜¯å¤šè¿›ç¨‹\n","permalink":"https://874656645.github.io/rick/posts/19-ie64-%E4%BD%8D%E6%8F%92%E4%BB%B6/","summary":"1ã€è®¾ç½®IEä¸ºå•è¿›ç¨‹æ¨¡å¼  64ä½æ“ä½œç³»ç»Ÿçš„ IE é»˜è®¤æ¯ä¸ª Tab é¡µéƒ½æ˜¯ä¸€ä¸ªè¿›ç¨‹ï¼Œå¹¶ä¸” Tab é¡µçš„è¿›ç¨‹æ˜¯ 32 ä½çš„ï¼Œä¸»è¿›ç¨‹æ˜¯ 64 ä½çš„ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤º  å€¼ä¸º0æ—¶æ˜¯å•è¿›ç¨‹æ¨¡å¼ï¼Œ1æ˜¯å¤šè¿›ç¨‹","title":"IE 64ä½æ’ä»¶"},{"content":"1ã€æŸ¥çœ‹çº¹ç† æ¸²æŸ“â€”â€”æè´¨ç¼–è¾‘å™¨â€”â€”ç²¾ç®€æè´¨ç¼–è¾‘å™¨\n2ã€åˆå¹¶Meshâ€”â€”é™„åŠ  3ã€èµ„æºè·Ÿè¸ªå™¨å¿«æ·é”® Shift + T ","permalink":"https://874656645.github.io/rick/posts/18-3dmax-%E6%93%8D%E4%BD%9C/","summary":"1ã€æŸ¥çœ‹çº¹ç† æ¸²æŸ“â€”â€”æè´¨ç¼–è¾‘å™¨â€”â€”ç²¾ç®€æè´¨ç¼–è¾‘å™¨\n2ã€åˆå¹¶Meshâ€”â€”é™„åŠ  3ã€èµ„æºè·Ÿè¸ªå™¨å¿«æ·é”® Shift + T ","title":"3DMax æ“ä½œ"},{"content":"1ã€éšæœºæ•° python è„šæœ¬\nimport random def randNum(): res = random.randint(1, 7) return res 2ã€è‡ªå¢ python è„šæœ¬\ntotal = 0 def accumulate(increment): global total if total: total += increment else: total = increment return total ","permalink":"https://874656645.github.io/rick/posts/17-arcgis-%E5%AD%97%E6%AE%B5%E9%9A%8F%E6%9C%BA%E6%95%B0/","summary":"1ã€éšæœºæ•° python è„šæœ¬\nimport random def randNum(): res = random.randint(1, 7) return res 2ã€è‡ªå¢ python è„šæœ¬\ntotal = 0 def accumulate(increment): global total if total: total += increment else: total = increment return total ","title":"ArcGIS å­—æ®µè®¡ç®—ï¼ˆè‡ªå¢ã€éšæœºæ•°ï¼‰"},{"content":"1ã€éšæœºæ•° SQL è„šæœ¬\nupdate \u0026#34;CYBuildings2\u0026#34; set \u0026#34;imgIndex\u0026#34; = FLOOR(1 + (RANDOM()+9223372036854775808)/2.0/9223372036854775808 * 7); ","permalink":"https://874656645.github.io/rick/posts/16-sqlite-%E9%9A%8F%E6%9C%BA%E6%95%B0/","summary":"1ã€éšæœºæ•° SQL è„šæœ¬\nupdate \u0026#34;CYBuildings2\u0026#34; set \u0026#34;imgIndex\u0026#34; = FLOOR(1 + (RANDOM()+9223372036854775808)/2.0/9223372036854775808 * 7); ","title":"Sqlite éšæœºæ•°"},{"content":"æŸ¥çœ‹åº“çš„ç‰ˆæœ¬ï¼ˆwin32 or 64ï¼‰ 1ã€é€šè¿‡ vs è‡ªå¸¦å·¥å…· dumpbin.exe dumpbin.exe /headers dllæ–‡ä»¶è·¯å¾„\n2ã€ä½¿ç”¨ notepad++ ç›´æ¥ç”¨ è®°äº‹æœ¬ æˆ–è€… notepad++ æ‰“å¼€exeæ–‡ä»¶ï¼ˆdllæ–‡ä»¶ï¼‰ï¼Œä¼šæœ‰å¾ˆå¤šä¹±ç ï¼Œä¸è¦å¤´ç–¼ï¼Œæ¥ä¸‹æ¥åªéœ€è¦åœ¨ç¬¬äºŒæ®µä¸­æ‰¾åˆ° PE ä¸¤ä¸ªå­—æ¯ï¼Œåœ¨å…¶åçš„ä¸è¿œå‡ºä¼šå‡ºç°d æˆ–è€…Lã€‚è‹¥æ˜¯dï¼Œåˆ™è¯æ˜è¯¥ç¨‹åºæ˜¯64ä½ï¼›è‹¥æ˜¯Lï¼Œåˆ™è¯æ˜æ˜¯32ä½ã€‚\n","permalink":"https://874656645.github.io/rick/posts/15-%E6%9F%A5%E7%9C%8B-dll-%E7%89%88%E6%9C%AC/","summary":"æŸ¥çœ‹åº“çš„ç‰ˆæœ¬ï¼ˆwin32 or 64ï¼‰ 1ã€é€šè¿‡ vs è‡ªå¸¦å·¥å…· dumpbin.exe dumpbin.exe /headers dllæ–‡ä»¶è·¯å¾„\n2ã€ä½¿ç”¨ notepad++ ç›´æ¥ç”¨ è®°äº‹æœ¬ æˆ–è€… notepad++ æ‰“å¼€exeæ–‡ä»¶ï¼ˆdllæ–‡ä»¶ï¼‰ï¼Œä¼šæœ‰å¾ˆå¤šä¹±ç ï¼Œä¸è¦å¤´ç–¼ï¼Œæ¥ä¸‹æ¥åªéœ€è¦åœ¨ç¬¬äºŒæ®µä¸­æ‰¾åˆ° PE ä¸¤ä¸ªå­—æ¯ï¼Œåœ¨å…¶åçš„ä¸è¿œå‡ºä¼šå‡ºç°d æˆ–è€…Lã€‚è‹¥æ˜¯dï¼Œåˆ™è¯æ˜è¯¥ç¨‹åºæ˜¯64ä½ï¼›è‹¥æ˜¯Lï¼Œåˆ™è¯æ˜æ˜¯32ä½ã€‚","title":"æŸ¥çœ‹ dll ç‰ˆæœ¬"},{"content":"minicondaåŒ…ç®¡ç†å™¨å¸¸ç”¨å‘½ä»¤ 0ã€æŒ‡å®šcondaçš„å·¥ä½œå¹³å° set CONDA_FORCE_32BIT=1 // æŒ‡å®š conda çš„å·¥ä½œå¹³å°ä¸º win-32\nset CONDA_FORCE_32BIT= // æŒ‡å®š conda çš„å·¥ä½œå¹³å°ä¸º x64\n1ã€æŒ‡å®šcondaçš„èµ„æºé•œåƒ # æ¨èä½¿ç”¨ä¸­ç§‘å¤§çš„ conda config --add channels https://mirrors.ustc.edu.cn/anaconda/pkgs/free # æ¸…åçš„é•œåƒå¥½åƒç”¨ä¸äº†äº† conda config --add channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/free # è®¾ç½®æœç´¢æ—¶æ˜¾ç¤ºé€šé“åœ°å€ conda config --set show_channel_urls yes æ‰§è¡Œæ­¤å‘½ä»¤åä¼šåœ¨å½“å‰çš„ç”¨æˆ·æ–‡ä»¶å¤¹ä¸‹ç”Ÿæˆä¸€ä¸ª .condarc çš„é…ç½®æ–‡ä»¶\n2ã€æœç´¢æŸä¸ªåº“çš„æ‰€æœ‰ç‰ˆæœ¬ conda search gdal\n3ã€æŸ¥çœ‹å½“å‰ç¯å¢ƒä¸‹å·²å®‰è£…çš„åŒ… conda list\n4ã€åˆ›å»ºä¸€ä¸ªè™šæ‹Ÿç¯å¢ƒ conda create --name python34 python=3.4\n5ã€æ¿€æ´»æŸä¸ªç¯å¢ƒ activate python34 // for windows\nsource activate python34 // for Linux \u0026amp; Mac\n6ã€å–æ¶ˆæ¿€æ´» conda deactivate // for windows\nsource conda deactivate // for Linux \u0026amp; Mac\n7ã€åˆ é™¤ä¸€ä¸ªç¯å¢ƒ conda remove --name python34 --all\n8ã€æŸ¥çœ‹å·²å®‰è£…çš„ç¯å¢ƒ conda info -e\n9ã€æŸ¥çœ‹å½“å‰æ¿€æ´»ç¯å¢ƒä¸‹çš„å®‰è£…åŒ… conda list\n10ã€æŸ¥çœ‹æŸä¸ªæŒ‡å®šç¯å¢ƒçš„å®‰è£…åŒ… conda list -n python34\n11ã€å®‰è£…åˆ°å½“å‰æ¿€æ´»ç¯å¢ƒ conda install gdal\n12ã€å®‰è£…åˆ°æŒ‡å®šç¯å¢ƒ conda install -n python34 numpy\n13ã€æ¸…ç† conda clean -p // åˆ é™¤æ²¡æœ‰ç”¨çš„åŒ…\nconda clean -t // åˆ é™¤taræ‰“åŒ…\n14ã€æŸ¥çœ‹å¸®åŠ© conda --help conda -h conda env -h conda update -h 15ã€æŸ¥çœ‹å½“å‰æ‰€æœ‰ç¯å¢ƒ conda info --envs\n","permalink":"https://874656645.github.io/rick/posts/14-conda-learn/","summary":"minicondaåŒ…ç®¡ç†å™¨å¸¸ç”¨å‘½ä»¤ 0ã€æŒ‡å®šcondaçš„å·¥ä½œå¹³å° set CONDA_FORCE_32BIT=1 // æŒ‡å®š conda çš„å·¥ä½œå¹³å°ä¸º win-32\nset CONDA_FORCE_32BIT= // æŒ‡å®š conda çš„å·¥ä½œå¹³å°ä¸º x64\n1ã€æŒ‡å®šcondaçš„èµ„æºé•œåƒ # æ¨èä½¿ç”¨ä¸­ç§‘å¤§çš„ conda config --add channels https://mirrors.ustc.edu.cn/anaconda/pkgs/free # æ¸…åçš„é•œåƒå¥½åƒç”¨ä¸äº†äº† conda config --add channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/free # è®¾ç½®æœç´¢æ—¶æ˜¾ç¤ºé€šé“åœ°å€ conda config --set show_channel_urls yes æ‰§è¡Œæ­¤å‘½ä»¤åä¼šåœ¨å½“å‰çš„ç”¨æˆ·æ–‡ä»¶å¤¹ä¸‹ç”Ÿæˆä¸€ä¸ª .condarc çš„é…ç½®æ–‡ä»¶\n2ã€æœç´¢æŸä¸ªåº“çš„æ‰€æœ‰ç‰ˆæœ¬ conda search gdal\n3ã€æŸ¥çœ‹å½“å‰ç¯å¢ƒä¸‹å·²å®‰è£…çš„åŒ… conda list\n4ã€åˆ›å»ºä¸€ä¸ªè™šæ‹Ÿç¯å¢ƒ conda create --name python34 python=3.4\n5ã€æ¿€æ´»æŸä¸ªç¯å¢ƒ activate python34 // for windows\nsource activate python34 // for Linux \u0026amp; Mac\n6ã€å–æ¶ˆæ¿€æ´» conda deactivate // for windows","title":"Conda Learn"},{"content":"win10 å°å¨œå¼€å§‹èœå•æ— æ³•æœç´¢åº”ç”¨ 1.ç”¨ç®¡ç†å‘˜æƒé™æ‰“å¼€ powershell.exe æˆ–è€… cmd;\n2.åœ¨å…¶ä¸­è¾“å…¥ä¸‹åˆ—å‘½ä»¤ï¼Œé‡æ–°æ³¨å†Œæ¿€æ´»å°å¨œ\nGet-AppXPackage -Name Microsoft.Windows.Cortana | Foreach {Add-AppxPackage -DisableDevelopmentMode -Register \u0026quot;$($_.InstallLocation)\\AppXManifest.xml\u0026quot;}\n","permalink":"https://874656645.github.io/rick/posts/13-restart-cortana/","summary":"win10 å°å¨œå¼€å§‹èœå•æ— æ³•æœç´¢åº”ç”¨ 1.ç”¨ç®¡ç†å‘˜æƒé™æ‰“å¼€ powershell.exe æˆ–è€… cmd;\n2.åœ¨å…¶ä¸­è¾“å…¥ä¸‹åˆ—å‘½ä»¤ï¼Œé‡æ–°æ³¨å†Œæ¿€æ´»å°å¨œ\nGet-AppXPackage -Name Microsoft.Windows.Cortana | Foreach {Add-AppxPackage -DisableDevelopmentMode -Register \u0026quot;$($_.InstallLocation)\\AppXManifest.xml\u0026quot;}","title":"Restart Cortana"},{"content":"cmakeå‘½ä»¤\n1ã€ç”Ÿæˆ VS 2015 win64 ç‰ˆæœ¬çš„è§£å†³æ–¹æ¡ˆ æ³¨ï¼šä¸‹é¢çš„å‘½ä»¤è¦åœ¨cmdä¸‹ä½¿ç”¨ï¼Œpower shellä¸å¯ä»¥\ncmake -H. -B./cmk_build/Win64 -G \u0026quot;Visual Studio 15 2017 Win64\u0026quot;\n2ã€æŒ‡å®šç›®æ ‡ç‰ˆæœ¬ cmake -D CMAKE_SYSTEM_VERSION=8.1 -H. -B./cmk_build/Win64 -G \u0026quot;Visual Studio 15 2017 Win64\u0026quot;\n3ã€ä½¿ç”¨ MinGW ç¼–è¯‘å™¨ cmake -H. -B./cmk_build/MinGW -G \u0026quot;MinGW Makefiles\u0026quot;\n","permalink":"https://874656645.github.io/rick/posts/12-cmake-learn/","summary":"cmakeå‘½ä»¤\n1ã€ç”Ÿæˆ VS 2015 win64 ç‰ˆæœ¬çš„è§£å†³æ–¹æ¡ˆ æ³¨ï¼šä¸‹é¢çš„å‘½ä»¤è¦åœ¨cmdä¸‹ä½¿ç”¨ï¼Œpower shellä¸å¯ä»¥\ncmake -H. -B./cmk_build/Win64 -G \u0026quot;Visual Studio 15 2017 Win64\u0026quot;\n2ã€æŒ‡å®šç›®æ ‡ç‰ˆæœ¬ cmake -D CMAKE_SYSTEM_VERSION=8.1 -H. -B./cmk_build/Win64 -G \u0026quot;Visual Studio 15 2017 Win64\u0026quot;\n3ã€ä½¿ç”¨ MinGW ç¼–è¯‘å™¨ cmake -H. -B./cmk_build/MinGW -G \u0026quot;MinGW Makefiles\u0026quot;","title":"Cmake Learn"},{"content":"vcpkgå®‰è£…åŠä½¿ç”¨\næ³¨æ„ï¼šéœ€è¦å®‰è£…vsçš„è‹±æ–‡è¯­è¨€åŒ…1ã€æŒ‡å®š vcpkg ä¸­ msvc çš„ç¼–è¯‘ç‰ˆæœ¬ åœ¨ vcpkg/triplets/æ–‡ä»¶å¤¹ä¸‹çš„æ‰€æœ‰cmakeæ–‡ä»¶ä¸­æ·»åŠ ä»£ç  set(VCPKG_PLATFORM_TOOLSET v140)\nå¦‚æœåŒæ—¶å®‰è£…äº†vs2017ï¼Œéœ€è¦ç¡®ä¿å®‰è£…vs2017çš„è‹±æ–‡è¯­è¨€åŒ…\n","permalink":"https://874656645.github.io/rick/posts/11-vcpkg-learn/","summary":"vcpkgå®‰è£…åŠä½¿ç”¨\næ³¨æ„ï¼šéœ€è¦å®‰è£…vsçš„è‹±æ–‡è¯­è¨€åŒ…1ã€æŒ‡å®š vcpkg ä¸­ msvc çš„ç¼–è¯‘ç‰ˆæœ¬ åœ¨ vcpkg/triplets/æ–‡ä»¶å¤¹ä¸‹çš„æ‰€æœ‰cmakeæ–‡ä»¶ä¸­æ·»åŠ ä»£ç  set(VCPKG_PLATFORM_TOOLSET v140)\nå¦‚æœåŒæ—¶å®‰è£…äº†vs2017ï¼Œéœ€è¦ç¡®ä¿å®‰è£…vs2017çš„è‹±æ–‡è¯­è¨€åŒ…","title":"Vcpkg Learn"},{"content":"Power shellæ‰§è¡Œç­–ç•¥ åŸæ–‡ç½‘å€\n1ã€æŸ¥çœ‹å½“å‰çš„å®‰å…¨ç­–ç•¥ Get-ExecutionPolicy\n2ã€ä¿®æ”¹æ‰§è¡Œç­–ç•¥ ps:è¿™ç§æ–¹æ³•ä¼šå°†æ‰§è¡Œç­–ç•¥ä¿å­˜åˆ°æ³¨å†Œè¡¨\nSet-ExecutionPolicy UnRestricted\nor\nSet-ExecutionPolicy -ExecutionPolicy RemoteSigned\n3ã€æŸ¥çœ‹æ‰€æœ‰æ”¯æŒçš„æ‰§è¡Œç­–ç•¥ [System.Enum]::GetNames([Microsoft.PowerShell.ExecutionPolicy])\n4ã€è·å–å½±å“å½“å‰ä¼šè¯çš„æ‰€æœ‰æ‰§è¡Œç­–ç•¥ Get-ExecutionPolicy -List\n6ã€ä¸ºå½“å‰ Windows PowerShell ä¼šè¯è®¾ç½®æ‰§è¡Œç­–ç•¥ PowerShell.exe -ExecutionPolicy RemoteSigned\n","permalink":"https://874656645.github.io/rick/posts/10-power-shell-executionpolicy/","summary":"Power shellæ‰§è¡Œç­–ç•¥ åŸæ–‡ç½‘å€\n1ã€æŸ¥çœ‹å½“å‰çš„å®‰å…¨ç­–ç•¥ Get-ExecutionPolicy\n2ã€ä¿®æ”¹æ‰§è¡Œç­–ç•¥ ps:è¿™ç§æ–¹æ³•ä¼šå°†æ‰§è¡Œç­–ç•¥ä¿å­˜åˆ°æ³¨å†Œè¡¨\nSet-ExecutionPolicy UnRestricted\nor\nSet-ExecutionPolicy -ExecutionPolicy RemoteSigned\n3ã€æŸ¥çœ‹æ‰€æœ‰æ”¯æŒçš„æ‰§è¡Œç­–ç•¥ [System.Enum]::GetNames([Microsoft.PowerShell.ExecutionPolicy])\n4ã€è·å–å½±å“å½“å‰ä¼šè¯çš„æ‰€æœ‰æ‰§è¡Œç­–ç•¥ Get-ExecutionPolicy -List\n6ã€ä¸ºå½“å‰ Windows PowerShell ä¼šè¯è®¾ç½®æ‰§è¡Œç­–ç•¥ PowerShell.exe -ExecutionPolicy RemoteSigned","title":"Power Shell ExecutionPolicy"},{"content":"1ã€ä½¿ç”¨requestsåº“è®¿é—®ç½‘å€ 2ã€ä½¿ç”¨xpathæŠ€æœ¯æå–ç½‘é¡µç›®æ ‡å›¾ç‰‡ç½‘å€ 3ã€é€šè¿‡osåº“ä¿å­˜å›¾ç‰‡åˆ°æœ¬åœ° #coding = utf-8 import requests import os from lxml import etree from urllib.parse import quote,unquote # import urllib.request class DmdSpider(object): name = \u0026#34;dmd\u0026#34; save_path = \u0026#39;E:/python/manhuadao/pics/\u0026#39; __picNo = 0 # è®¿é—®æ¼«ç”»å²›ç½‘é¡µ def start_request(self, url): header = {\u0026#39;User-Agent\u0026#39;: \u0026#39;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/72.0.3626.119 Safari/537.36\u0026#39;} r = requests.get(url, params=header) # print(r.text) self.__get_imgs(r) # è‡ªåŠ¨è·³è½¬ä¸‹ä¸€é¡µ html = etree.HTML(r.text) next_urls = html.xpath(\u0026#39;//div[@class=\u0026#34;read-bottom\u0026#34;]//a[@class=\u0026#34;next\u0026#34;]/@href\u0026#39;) # print(next) for href in next_urls: nexturl = href.split(\u0026#39;=\u0026#39;)[-1] self.start_request(unquote(nexturl)) # ä½¿ç”¨xpathæå–ç½‘é¡µä¸­çš„å›¾ç‰‡ç½‘å€ def __get_imgs(self, resbonse): html = etree.HTML(resbonse.text) # print(html) # result = etree.tostring(html) # print(result.decode(\u0026#34;utf-8\u0026#34;)) img_srcs = html.xpath(\u0026#39;//div[@class=\u0026#34;center-t\u0026#34;]//div[@class=\u0026#34;main-content\u0026#34;]//img/@src\u0026#39;) # print(img_srcs) for url in img_srcs: self.__save_img(url) # ä¸‹è½½å›¾ç‰‡ def __save_img(self, url): # arr = url.split(\u0026#39;-\u0026#39;) # picName = arr[-1].split(\u0026#39;.\u0026#39;)[0] header = {\u0026#39;User-Agent\u0026#39;: \u0026#39;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/72.0.3626.119 Safari/537.36\u0026#39;} # request = urllib.request.Request(url, None, header)  # response = urllib.request.urlopen(request) # with open(\u0026#39;E:/python/manhuadao/pics/%s.jpg\u0026#39; %picName, \u0026#34;wb\u0026#34;) as f: # f.write(response.read()) # print(response) response = requests.get(url, params = header) # print(response.content) if not os.path.exists(self.save_path): os.makedirs(self.save_path) with open(self.save_path + \u0026#39;%s.jpg\u0026#39;%self.__picNo, \u0026#34;wb\u0026#34;) as f: f.write(response.content) self.__picNo = self.__picNo + 1 def main(): dmd = DmdSpider() dmd.start_request(\u0026#39;http://www.manhuadao.cn/Comic/ComicView?comicid=58df8c73d401da325c9cf77c\u0026amp;chapterid=9587480\u0026#39;) if __name__ == \u0026#34;__main__\u0026#34;: main() ","permalink":"https://874656645.github.io/rick/posts/9-crawl-pictures-from-website/","summary":"1ã€ä½¿ç”¨requestsåº“è®¿é—®ç½‘å€ 2ã€ä½¿ç”¨xpathæŠ€æœ¯æå–ç½‘é¡µç›®æ ‡å›¾ç‰‡ç½‘å€ 3ã€é€šè¿‡osåº“ä¿å­˜å›¾ç‰‡åˆ°æœ¬åœ° #coding = utf-8 import requests import os from lxml import etree from urllib.parse import quote,unquote # import urllib.request class DmdSpider(object): name = \u0026#34;dmd\u0026#34; save_path = \u0026#39;E:/python/manhuadao/pics/\u0026#39; __picNo = 0 # è®¿é—®æ¼«ç”»å²›ç½‘é¡µ def start_request(self, url): header = {\u0026#39;User-Agent\u0026#39;: \u0026#39;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/72.0.3626.119 Safari/537.36\u0026#39;} r = requests.get(url, params=header) # print(r.text) self.__get_imgs(r) # è‡ªåŠ¨è·³è½¬ä¸‹ä¸€é¡µ html = etree.HTML(r.text) next_urls = html.xpath(\u0026#39;//div[@class=\u0026#34;read-bottom\u0026#34;]//a[@class=\u0026#34;next\u0026#34;]/@href\u0026#39;) # print(next) for href in next_urls: nexturl = href.","title":"Crawl Pictures From Website"},{"content":"åŸæ–‡ç½‘å€\nåœ¨pythonä¸­ä½¿ç”¨virtualenvåˆ›å»ºè™šæ‹Ÿç¯å¢ƒ æ³¨æ„ï¼šè¦ä½¿ç”¨cmdå‘½ä»¤è¡Œï¼Œä¸èƒ½ä½¿ç”¨Power Shell1ã€ä½¿ç”¨pipå®‰è£… pip install virtualenv\n2ã€åˆ›å»ºé¡¹ç›®ç›®å½•å¹¶ç”¨cdè¿›å…¥ mkdir E:\\python\\Virtualenv cd E:\\python\\Virtualenv 3ã€åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ virtualenv -p c:\\Python36\\python.exe env\næˆ–è€…\nvirtualenv env\næ­¤å‘½ä»¤ä¼šåœ¨å½“å‰ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªenvç›®å½•\n4ã€å¯åŠ¨è™šæ‹Ÿç¯å¢ƒ env\\Scripts\\activate\n5ã€ç¦»å¼€è™šæ‹Ÿç¯å¢ƒ deactivate\n6ã€åˆ é™¤envæ–‡ä»¶å¤¹å³å¯ ","permalink":"https://874656645.github.io/rick/posts/8-python-virtualenv/","summary":"åŸæ–‡ç½‘å€\nåœ¨pythonä¸­ä½¿ç”¨virtualenvåˆ›å»ºè™šæ‹Ÿç¯å¢ƒ æ³¨æ„ï¼šè¦ä½¿ç”¨cmdå‘½ä»¤è¡Œï¼Œä¸èƒ½ä½¿ç”¨Power Shell1ã€ä½¿ç”¨pipå®‰è£… pip install virtualenv\n2ã€åˆ›å»ºé¡¹ç›®ç›®å½•å¹¶ç”¨cdè¿›å…¥ mkdir E:\\python\\Virtualenv cd E:\\python\\Virtualenv 3ã€åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ virtualenv -p c:\\Python36\\python.exe env\næˆ–è€…\nvirtualenv env\næ­¤å‘½ä»¤ä¼šåœ¨å½“å‰ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªenvç›®å½•\n4ã€å¯åŠ¨è™šæ‹Ÿç¯å¢ƒ env\\Scripts\\activate\n5ã€ç¦»å¼€è™šæ‹Ÿç¯å¢ƒ deactivate\n6ã€åˆ é™¤envæ–‡ä»¶å¤¹å³å¯ ","title":"Python Virtualenv"},{"content":"åŸæ–‡ç½‘å€\n1. Using a virtual environment (recommended) pip install virtualenv\nè¯¦ç»†æ“ä½œ\n2. Creating a new Scrapy project scrapy startproject tutorial\n3. Writing a spider to crawl a site and extract data This is the code for our first Spider. Save it in a file named quotes_spider.py under the tutorial/spiders directory in your project:\nimport scrapy class QuotesSpider(scrapy.Spider): name = \u0026#34;quotes\u0026#34; def start_requests(self): urls = [ \u0026#39;http://quotes.toscrape.com/page/1/\u0026#39;, \u0026#39;http://quotes.toscrape.com/page/2/\u0026#39;, ] for url in urls: yield scrapy.Request(url=url, callback=self.parse) def parse(self, response): page = response.url.split(\u0026#34;/\u0026#34;)[-2] filename = \u0026#39;quotes-%s.html\u0026#39; % page with open(filename, \u0026#39;wb\u0026#39;) as f: f.write(response.body) self.log(\u0026#39;Saved file %s\u0026#39; % filename) 3.1 Extracting data in our spider import scrapy class QuotesSpider(scrapy.Spider): name = \u0026#34;quotes\u0026#34; start_urls = [ \u0026#39;http://quotes.toscrape.com/page/1/\u0026#39;, \u0026#39;http://quotes.toscrape.com/page/2/\u0026#39;, ] def parse(self, response): for quote in response.css(\u0026#39;div.quote\u0026#39;): yield { \u0026#39;text\u0026#39;: quote.css(\u0026#39;span.text::text\u0026#39;).get(), \u0026#39;author\u0026#39;: quote.css(\u0026#39;small.author::text\u0026#39;).get(), \u0026#39;tags\u0026#39;: quote.css(\u0026#39;div.tags a.tag::text\u0026#39;).getall(), } 3.2 Storing the scraped data scrapy crawl quotes -o quotes.json\nor\nscrapy crawl quotes -o quotes.jl\n4. Exporting the scraped data using the command line scrapy crawl quotes\n5. Changing spider to recursively follow links import scrapy class QuotesSpider(scrapy.Spider): name = \u0026#34;quotes\u0026#34; start_urls = [ \u0026#39;http://quotes.toscrape.com/page/1/\u0026#39;, ] def parse(self, response): for quote in response.css(\u0026#39;div.quote\u0026#39;): yield { \u0026#39;text\u0026#39;: quote.css(\u0026#39;span.text::text\u0026#39;).get(), \u0026#39;author\u0026#39;: quote.css(\u0026#39;small.author::text\u0026#39;).get(), \u0026#39;tags\u0026#39;: quote.css(\u0026#39;div.tags a.tag::text\u0026#39;).getall(), } next_page = response.css(\u0026#39;li.next a::attr(href)\u0026#39;).get() if next_page is not None: next_page = response.urljoin(next_page) yield scrapy.Request(next_page, callback=self.parse) 5.1 A shortcut for creating Requests import scrapy class QuotesSpider(scrapy.Spider): name = \u0026#34;quotes\u0026#34; start_urls = [ \u0026#39;http://quotes.toscrape.com/page/1/\u0026#39;, ] def parse(self, response): for quote in response.css(\u0026#39;div.quote\u0026#39;): yield { \u0026#39;text\u0026#39;: quote.css(\u0026#39;span.text::text\u0026#39;).get(), \u0026#39;author\u0026#39;: quote.css(\u0026#39;span small::text\u0026#39;).get(), \u0026#39;tags\u0026#39;: quote.css(\u0026#39;div.tags a.tag::text\u0026#39;).getall(), } next_page = response.css(\u0026#39;li.next a::attr(href)\u0026#39;).get() if next_page is not None: yield response.follow(next_page, callback=self.parse) 6. Using spider arguments scrapy crawl quotes -o quotes-humor.json -a tag=humor\nimport scrapy class QuotesSpider(scrapy.Spider): name = \u0026#34;quotes\u0026#34; def start_requests(self): url = \u0026#39;http://quotes.toscrape.com/\u0026#39; tag = getattr(self, \u0026#39;tag\u0026#39;, None) if tag is not None: url = url + \u0026#39;tag/\u0026#39; + tag yield scrapy.Request(url, self.parse) def parse(self, response): for quote in response.css(\u0026#39;div.quote\u0026#39;): yield { \u0026#39;text\u0026#39;: quote.css(\u0026#39;span.text::text\u0026#39;).get(), \u0026#39;author\u0026#39;: quote.css(\u0026#39;small.author::text\u0026#39;).get(), } next_page = response.css(\u0026#39;li.next a::attr(href)\u0026#39;).get() if next_page is not None: yield response.follow(next_page, self.parse) ","permalink":"https://874656645.github.io/rick/posts/7-scrapy-learn/","summary":"åŸæ–‡ç½‘å€\n1. Using a virtual environment (recommended) pip install virtualenv\nè¯¦ç»†æ“ä½œ\n2. Creating a new Scrapy project scrapy startproject tutorial\n3. Writing a spider to crawl a site and extract data This is the code for our first Spider. Save it in a file named quotes_spider.py under the tutorial/spiders directory in your project:\nimport scrapy class QuotesSpider(scrapy.Spider): name = \u0026#34;quotes\u0026#34; def start_requests(self): urls = [ \u0026#39;http://quotes.toscrape.com/page/1/\u0026#39;, \u0026#39;http://quotes.toscrape.com/page/2/\u0026#39;, ] for url in urls: yield scrapy.","title":"Scrapy Learn"},{"content":"1. é…ç½®npmé•œåƒæº 1.1 ä¸´æ—¶ä½¿ç”¨ npm --registry https://registry.npm.taobao.org install --save-dev electron\n1.2 æŒä¹…ä½¿ç”¨ npm config set registry https://registry.npm.taobao.org\n1.3 é…ç½®åå¯é€šè¿‡ä¸‹é¢æ–¹å¼æ¥éªŒè¯æ˜¯å¦æˆåŠŸ npm config get registry æˆ– npm info electron 1.4 é€šè¿‡cnpmä½¿ç”¨ npm install -g cnpm --registry=https://registry.npm.taobao.org\n1.5 ä½¿ç”¨ cnpm install express\n","permalink":"https://874656645.github.io/rick/posts/6-npm-commond-learning/","summary":"1. é…ç½®npmé•œåƒæº 1.1 ä¸´æ—¶ä½¿ç”¨ npm --registry https://registry.npm.taobao.org install --save-dev electron\n1.2 æŒä¹…ä½¿ç”¨ npm config set registry https://registry.npm.taobao.org\n1.3 é…ç½®åå¯é€šè¿‡ä¸‹é¢æ–¹å¼æ¥éªŒè¯æ˜¯å¦æˆåŠŸ npm config get registry æˆ– npm info electron 1.4 é€šè¿‡cnpmä½¿ç”¨ npm install -g cnpm --registry=https://registry.npm.taobao.org\n1.5 ä½¿ç”¨ cnpm install express","title":"Npm Commond Learning"},{"content":"1. Use npm run example 1.1 Clone repository git clone https://github.com/electron/electron-quick-start\n1.2 Go into the repository cd electron-quick-start\n1.3 Install dependencies PS:ä¸ºäº†åŠ å¿«ä¸‹è½½ä¾èµ–æ¨¡å—çš„é€Ÿåº¦ï¼Œé€šè¿‡ä¿®æ”¹é•œåƒæºELECTRON_MIRROR=https://npm.taobao.org/mirrors/electron/ npm install\næˆ–è€…æ˜¯\nnpm install --registry=https://registry.npm.taobao.org\n1.4 Run the app npm start\n2. Use yarn create a electron program 2.1 Create a program folder md electron-yarn-cz\nè¿›å…¥é¡¹ç›®æ–‡ä»¶å¤¹\ncd electron-yarn-cz\n2.2 Create a program config file yarn init\n2.3 Instal electron environment yarn add electron --dev --registry=https://registry.npm.taobao.org\n2.4 Add main.js and index.html 2.5 Edit package.json file \u0026#34;main\u0026#34;: \u0026#34;main.js\u0026#34;, \u0026#34;scripts\u0026#34;: { \u0026#34;start\u0026#34;: \u0026#34;electron .\u0026#34; } 3. æ‰“åŒ…é¡¹ç›® _æ¨èdevtron å’Œ electron-builder 2ä¸ªå¼€å‘å·¥å…·ï¼Œé…ç½®ç®€å•ï¼ŒåŠŸèƒ½å¼ºå¤§\n3.1 æ·»åŠ æ‰“åŒ…æ¨¡å— yarn add electron-builder --dev\n3.2 åœ¨package.jsä¸­æ·»åŠ å‘½ä»¤ \u0026#34;scripts\u0026#34;: { \u0026#34;start\u0026#34;: \u0026#34;electron .\u0026#34;, \u0026#34;pack\u0026#34;: \u0026#34;electron-builder --dir\u0026#34;, \u0026#34;dist\u0026#34;: \u0026#34;electron-builder\u0026#34; } 3.3 è¿è¡Œ yarn dist ","permalink":"https://874656645.github.io/rick/posts/5-learn-electron/","summary":"1. Use npm run example 1.1 Clone repository git clone https://github.com/electron/electron-quick-start\n1.2 Go into the repository cd electron-quick-start\n1.3 Install dependencies PS:ä¸ºäº†åŠ å¿«ä¸‹è½½ä¾èµ–æ¨¡å—çš„é€Ÿåº¦ï¼Œé€šè¿‡ä¿®æ”¹é•œåƒæºELECTRON_MIRROR=https://npm.taobao.org/mirrors/electron/ npm install\næˆ–è€…æ˜¯\nnpm install --registry=https://registry.npm.taobao.org\n1.4 Run the app npm start\n2. Use yarn create a electron program 2.1 Create a program folder md electron-yarn-cz\nè¿›å…¥é¡¹ç›®æ–‡ä»¶å¤¹\ncd electron-yarn-cz\n2.2 Create a program config file yarn init\n2.3 Instal electron environment yarn add electron --dev --registry=https://registry.npm.taobao.org\n2.4 Add main.","title":"Learn Electron"},{"content":"win10æŸ¥çœ‹ç«¯å£ä½¿ç”¨æƒ…å†µ 1. å¯Ÿçœ‹æ‰€æœ‰å·²ä½¿ç”¨çš„ç«¯å£ netstat -ano\n2. æŸ¥çœ‹ç‰¹å®šç«¯å£çš„ä½¿ç”¨ netstat -ano|findstr \u0026quot;443\u0026quot;\n3. æŸ¥çœ‹å ç”¨ç«¯å£çš„è¿›ç¨‹PID tasklist|findstr \u0026quot;7648\u0026quot;\n","permalink":"https://874656645.github.io/rick/posts/4-netstat/","summary":"win10æŸ¥çœ‹ç«¯å£ä½¿ç”¨æƒ…å†µ 1. å¯Ÿçœ‹æ‰€æœ‰å·²ä½¿ç”¨çš„ç«¯å£ netstat -ano\n2. æŸ¥çœ‹ç‰¹å®šç«¯å£çš„ä½¿ç”¨ netstat -ano|findstr \u0026quot;443\u0026quot;\n3. æŸ¥çœ‹å ç”¨ç«¯å£çš„è¿›ç¨‹PID tasklist|findstr \u0026quot;7648\u0026quot;","title":"Netstat"},{"content":"1ã€åˆå§‹åŒ–æœ¬åœ°ä»“åº“  é€‚åˆè¿œç¨‹ä»“åº“æ˜¯ç©ºä»“åº“  cd public git init git remote add blog https://github.com/874656645/rick  å¦‚æœæ–°å»ºçš„ä»“åº“æœ‰ä¸œè¥¿ï¼Œæœ€å¥½å…ˆå…‹éš†åˆ°æœ¬åœ°ï¼Œå†å‘é‡Œé¢æ·»åŠ æ–‡ä»¶  git clone https://github.com/adityatelange/hugo-PaperMod.git\n å…‹éš†å«æœ‰å­ä»“åº“çš„ä»£ç   git clone -b exampleSite --recursive https://github.com/adityatelange/hugo-PaperMod.git\n å…‹éš†æŸä¸€ä¸ªåˆ†æ”¯  git clone -b exampleSite https://github.com/adityatelange/hugo-PaperMod.git\n2ã€æ›´æ–°è¿œç¨‹ä»“åº“ä»£ç åˆ°æœ¬åœ° git pull blog master\n3ã€å°†å˜åŒ–æäº¤åˆ°æœ¬åœ°ä»“åº“ git commit -m \u0026quot;delete all files\u0026quot;\ngit commit -am \u0026quot;update\u0026quot;\n4ã€pushæ¨é€åˆ°è¿œç¨‹ä»“åº“ git push blog master\n5ã€æ·»åŠ è¿œç¨‹ä»“åº“åˆ«åå’Œç½‘å€ git remote add blog https://github.com/874656645/rick\n6ã€åˆ é™¤é…ç½®çš„è¿œç¨‹ä»“åº“åˆ«å git remote remove blog\n7ã€æ·»åŠ æ–‡ä»¶ git add -A\n8ã€åˆ é™¤æ–‡ä»¶ git rm *\n9ã€åˆ é™¤è¿œç¨‹ä»“åº“ä¸­çš„æ–‡ä»¶ã€æ–‡ä»¶å¤¹ git rm -r --cached \u0026quot;*.*\u0026quot;\n*.*è¡¨ç¤ºå…¨éƒ¨æ–‡ä»¶å’Œæ–‡ä»¶å¤¹ï¼Œå¦‚æœæƒ³åˆ é™¤å…·ä½“çš„æ–‡ä»¶æˆ–æ–‡ä»¶å¤¹ï¼Œä½¿ç”¨å…·ä½“çš„åç§°å°±å¯ä»¥äº†\n10ã€æŸ¥çœ‹æ‰€æœ‰åˆ†æ”¯å¹¶åˆ‡æ¢ git branch -a\ngit branch -r\ngit checkout dev5\n11ã€åˆ é™¤è¿œç¨‹åˆ†æ”¯ git push blog --delete name\n12ã€è§£å†³failed to push some refs to git git pull --rebase blog master\n13ã€ä¸éœ€éªŒè¯ç”¨æˆ·åå’Œå¯†ç  æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤\ngit config --global credential.helper store\næ­¤å‘½ä»¤ä¼šåœ¨ .gitconfig æ–‡ä»¶ä¸­æ·»åŠ å¦‚ä¸‹æ–‡æœ¬\n[credential] helper = store 14ã€é‡æ–°è¾“å…¥ç”¨æˆ·åå’Œå¯†ç  git config --system --unset credential.helper\næˆ–è€…æŠŠä¸Šé¢æ–‡ä»¶ä¸­çš„ store åˆ æ‰\n15ã€æ·»åŠ å­ä»“åº“ git submodule add \u0026lt;ä»“åº“åœ°å€\u0026gt; \u0026lt;æœ¬åœ°è·¯å¾„\u0026gt;\næ·»åŠ æˆåŠŸåï¼Œåœ¨çˆ¶ä»“åº“æ ¹ç›®å½•å¢åŠ äº† .gitmodule æ–‡ä»¶ï¼Œå¹¶ä¸”åœ¨çˆ¶ä»“åº“çš„ git é…ç½®æ–‡ä»¶ä¸­åŠ å…¥äº† submodule æ®µ\n16ã€checkout å­ä»“åº“ git submodule update --init --recursive\ngit submodule init\ngit submodule update\n17ã€åˆ é™¤å­æ¨¡å— git submodule deinit {MOD_NAME}\né€†åˆå§‹åŒ–æ¨¡å—ï¼Œå…¶ä¸­ {MOD_NAME} ä¸ºæ¨¡å—ç›®å½•ï¼Œæ‰§è¡Œåå¯å‘ç°æ¨¡å—ç›®å½•è¢«æ¸…ç©º\ngit rm --cached {MOD_NAME}\nåˆ é™¤ .gitmodules ä¸­è®°å½•çš„æ¨¡å—ä¿¡æ¯ï¼ˆ\u0026ndash;cached é€‰é¡¹æ¸…é™¤ .git/modules ä¸­çš„ç¼“å­˜ï¼‰\nä½†æ˜¯æµ‹è¯•æœ‰é—®é¢˜ï¼Œ git é…ç½®æ–‡ä»¶ä¸­çš„ submodule æ®µå’Œ*.git/modules* ä¸­ä»æœ‰ç¼“å­˜\n18ã€å¸¸ç”¨å‘½ä»¤ ","permalink":"https://874656645.github.io/rick/posts/3-git-commond/","summary":"1ã€åˆå§‹åŒ–æœ¬åœ°ä»“åº“  é€‚åˆè¿œç¨‹ä»“åº“æ˜¯ç©ºä»“åº“  cd public git init git remote add blog https://github.com/874656645/rick  å¦‚æœæ–°å»ºçš„ä»“åº“æœ‰ä¸œè¥¿ï¼Œæœ€å¥½å…ˆå…‹éš†åˆ°æœ¬åœ°ï¼Œå†å‘é‡Œé¢æ·»åŠ æ–‡ä»¶  git clone https://github.com/adityatelange/hugo-PaperMod.git\n å…‹éš†å«æœ‰å­ä»“åº“çš„ä»£ç   git clone -b exampleSite --recursive https://github.com/adityatelange/hugo-PaperMod.git\n å…‹éš†æŸä¸€ä¸ªåˆ†æ”¯  git clone -b exampleSite https://github.com/adityatelange/hugo-PaperMod.git\n2ã€æ›´æ–°è¿œç¨‹ä»“åº“ä»£ç åˆ°æœ¬åœ° git pull blog master\n3ã€å°†å˜åŒ–æäº¤åˆ°æœ¬åœ°ä»“åº“ git commit -m \u0026quot;delete all files\u0026quot;\ngit commit -am \u0026quot;update\u0026quot;\n4ã€pushæ¨é€åˆ°è¿œç¨‹ä»“åº“ git push blog master\n5ã€æ·»åŠ è¿œç¨‹ä»“åº“åˆ«åå’Œç½‘å€ git remote add blog https://github.com/874656645/rick\n6ã€åˆ é™¤é…ç½®çš„è¿œç¨‹ä»“åº“åˆ«å git remote remove blog\n7ã€æ·»åŠ æ–‡ä»¶ git add -A","title":"Git Commond"},{"content":"ä½¿ç”¨ Hugo åˆ›å»ºé™æ€ç½‘ç«™ Hugo å®˜ç½‘ Hugo ä¸­æ–‡ç½‘ ç½‘ç«™çš®è‚¤\nStep1ï¼šåˆ›å»ºç«™ç‚¹ è¿›å…¥åˆ° E:/Hugo/Sitesæ–‡ä»¶å¤¹\nhugo new site HugoLearning.com\ncd HugoLearning.com\ngit init\nStep2ï¼šæ·»åŠ æ ·å¼ä¸»é¢˜ åœ¨çš®è‚¤åˆ—è¡¨æŒ‘é€‰ä¸€ä¸ªå¿ƒä»ªçš„çš®è‚¤ï¼Œæ‰¾åˆ°ç›¸å…³çš„ GitHub åœ°å€ï¼Œåˆ›å»ºç›®å½• themesï¼Œåœ¨ themes ç›®å½•é‡ŒæŠŠçš®è‚¤ git clone ä¸‹æ¥\ngit submodule add https://github.com/budparr/gohugo-theme-ananke.git themes/ananke\nç¼–è¾‘ config.toml é…ç½®æ–‡ä»¶\næœ€åä¸€è¡Œæ·»åŠ  theme = \u0026quot;ananke\u0026quot;\næˆ–è€…åœ¨å‘½ä»¤è¡Œæ‰§è¡Œ echo 'theme = \u0026quot;ananke\u0026quot;' \u0026gt;\u0026gt; config.toml\nStep3ï¼šæ·»åŠ markdownæ–‡ä»¶å†…å®¹ hugo new posts/Hello-Hugo.md\nhugo new --kind post posts/1-Papermod-Theme-ä¸­æ–‡.md\nNote: post is a kind of archetypes( post.md )\nStep4: å¯åŠ¨ç½‘ç«™ hugo server -D\nç„¶åè¾“å…¥æ§åˆ¶å°æç¤ºçš„ç½‘å€ï¼Œæ¯”å¦‚ï¼š http://localhost:1313/\nStep5ï¼šç”Ÿæˆç½‘ç«™ å‘½ä»¤è¡Œæ‰§è¡Œ hugoï¼Œåœ¨ç½‘ç«™ç›®å½•ç”Ÿæˆpublicæ–‡ä»¶å¤¹ï¼Œå‘å¸ƒçš„ç½‘ç«™æ–‡ä»¶éƒ½åœ¨è¿™ä¸ªæ–‡ä»¶ä¸­\n æ³¨æ„ï¼šå¦‚æœçœ‹ä¸åˆ°å†…å®¹ï¼Œå°†mdæ–‡ä»¶ä¸­çš„draftè®¾ç½®ä¸ºfalse  Step5ï¼šå°†ç½‘ç«™å‘å¸ƒåˆ° git ä½¿ç”¨gitå·¥å…·å°†æ–‡ä»¶ä¸Šä¼ åˆ°è¿œç¨‹ä»“åº“å°±å¯ä»¥äº†ï¼Œä»“åº“è¿˜éœ€è¦åšä¸€äº›è®¾ç½®ï¼›\n","permalink":"https://874656645.github.io/rick/posts/2-hugo-create-a-new-site/","summary":"ä½¿ç”¨ Hugo åˆ›å»ºé™æ€ç½‘ç«™ Hugo å®˜ç½‘ Hugo ä¸­æ–‡ç½‘ ç½‘ç«™çš®è‚¤\nStep1ï¼šåˆ›å»ºç«™ç‚¹ è¿›å…¥åˆ° E:/Hugo/Sitesæ–‡ä»¶å¤¹\nhugo new site HugoLearning.com\ncd HugoLearning.com\ngit init\nStep2ï¼šæ·»åŠ æ ·å¼ä¸»é¢˜ åœ¨çš®è‚¤åˆ—è¡¨æŒ‘é€‰ä¸€ä¸ªå¿ƒä»ªçš„çš®è‚¤ï¼Œæ‰¾åˆ°ç›¸å…³çš„ GitHub åœ°å€ï¼Œåˆ›å»ºç›®å½• themesï¼Œåœ¨ themes ç›®å½•é‡ŒæŠŠçš®è‚¤ git clone ä¸‹æ¥\ngit submodule add https://github.com/budparr/gohugo-theme-ananke.git themes/ananke\nç¼–è¾‘ config.toml é…ç½®æ–‡ä»¶\næœ€åä¸€è¡Œæ·»åŠ  theme = \u0026quot;ananke\u0026quot;\næˆ–è€…åœ¨å‘½ä»¤è¡Œæ‰§è¡Œ echo 'theme = \u0026quot;ananke\u0026quot;' \u0026gt;\u0026gt; config.toml\nStep3ï¼šæ·»åŠ markdownæ–‡ä»¶å†…å®¹ hugo new posts/Hello-Hugo.md\nhugo new --kind post posts/1-Papermod-Theme-ä¸­æ–‡.md\nNote: post is a kind of archetypes( post.md )\nStep4: å¯åŠ¨ç½‘ç«™ hugo server -D","title":"Hugo Create a New Site by Hugo"}]